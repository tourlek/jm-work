(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Il(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const Pe={},ds=[],zt=()=>{},gv=()=>!1,_v=/^on[^a-z]/,Ba=t=>_v.test(t),wl=t=>t.startsWith("onUpdate:"),qe=Object.assign,Tl=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},yv=Object.prototype.hasOwnProperty,fe=(t,e)=>yv.call(t,e),Z=Array.isArray,fs=t=>Ua(t)==="[object Map]",cp=t=>Ua(t)==="[object Set]",ie=t=>typeof t=="function",ze=t=>typeof t=="string",Al=t=>typeof t=="symbol",xe=t=>t!==null&&typeof t=="object",up=t=>xe(t)&&ie(t.then)&&ie(t.catch),lp=Object.prototype.toString,Ua=t=>lp.call(t),Ev=t=>Ua(t).slice(8,-1),hp=t=>Ua(t)==="[object Object]",bl=t=>ze(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Jo=Il(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$a=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},vv=/-(\w)/g,an=$a(t=>t.replace(vv,(e,n)=>n?n.toUpperCase():"")),Iv=/\B([A-Z])/g,Fs=$a(t=>t.replace(Iv,"-$1").toLowerCase()),qa=$a(t=>t.charAt(0).toUpperCase()+t.slice(1)),Uc=$a(t=>t?`on${qa(t)}`:""),Ci=(t,e)=>!Object.is(t,e),Zo=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ua=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},pu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},wv=t=>{const e=ze(t)?Number(t):NaN;return isNaN(e)?t:e};let Rd;const gu=()=>Rd||(Rd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rl(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ze(r)?Rv(r):Rl(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(ze(t))return t;if(xe(t))return t}}const Tv=/;(?![^(]*\))/g,Av=/:([^]+)/,bv=/\/\*[^]*?\*\//g;function Rv(t){const e={};return t.replace(bv,"").split(Tv).forEach(n=>{if(n){const r=n.split(Av);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Vi(t){let e="";if(ze(t))e=t;else if(Z(t))for(let n=0;n<t.length;n++){const r=Vi(t[n]);r&&(e+=r+" ")}else if(xe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Pv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sv=Il(Pv);function dp(t){return!!t||t===""}const TV=t=>ze(t)?t:t==null?"":Z(t)||xe(t)&&(t.toString===lp||!ie(t.toString))?JSON.stringify(t,fp,2):String(t),fp=(t,e)=>e&&e.__v_isRef?fp(t,e.value):fs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:cp(e)?{[`Set(${e.size})`]:[...e.values()]}:xe(e)&&!Z(e)&&!hp(e)?String(e):e;let Vt;class mp{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Vt,!e&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Vt;try{return Vt=this,e()}finally{Vt=n}}}on(){Vt=this}off(){Vt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function pp(t){return new mp(t)}function Cv(t,e=Vt){e&&e.active&&e.effects.push(t)}function gp(){return Vt}function Vv(t){Vt&&Vt.cleanups.push(t)}const Pl=t=>{const e=new Set(t);return e.w=0,e.n=0,e},_p=t=>(t.w&Gn)>0,yp=t=>(t.n&Gn)>0,xv=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Gn},Dv=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];_p(s)&&!yp(s)?s.delete(t):e[n++]=s,s.w&=~Gn,s.n&=~Gn}e.length=n}},la=new WeakMap;let ci=0,Gn=1;const _u=30;let qt;const Vr=Symbol(""),yu=Symbol("");class Sl{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Cv(this,r)}run(){if(!this.active)return this.fn();let e=qt,n=Bn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=qt,qt=this,Bn=!0,Gn=1<<++ci,ci<=_u?xv(this):Pd(this),this.fn()}finally{ci<=_u&&Dv(this),Gn=1<<--ci,qt=this.parent,Bn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){qt===this?this.deferStop=!0:this.active&&(Pd(this),this.onStop&&this.onStop(),this.active=!1)}}function Pd(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Bn=!0;const Ep=[];function Ls(){Ep.push(Bn),Bn=!1}function Bs(){const t=Ep.pop();Bn=t===void 0?!0:t}function Pt(t,e,n){if(Bn&&qt){let r=la.get(t);r||la.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Pl()),vp(s)}}function vp(t,e){let n=!1;ci<=_u?yp(t)||(t.n|=Gn,n=!_p(t)):n=!t.has(qt),n&&(t.add(qt),qt.deps.push(t))}function yn(t,e,n,r,s,i){const o=la.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Z(t)){const c=Number(r);o.forEach((u,l)=>{(l==="length"||l>=c)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Z(t)?bl(n)&&a.push(o.get("length")):(a.push(o.get(Vr)),fs(t)&&a.push(o.get(yu)));break;case"delete":Z(t)||(a.push(o.get(Vr)),fs(t)&&a.push(o.get(yu)));break;case"set":fs(t)&&a.push(o.get(Vr));break}if(a.length===1)a[0]&&Eu(a[0]);else{const c=[];for(const u of a)u&&c.push(...u);Eu(Pl(c))}}function Eu(t,e){const n=Z(t)?t:[...t];for(const r of n)r.computed&&Sd(r);for(const r of n)r.computed||Sd(r)}function Sd(t,e){(t!==qt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function Nv(t,e){var n;return(n=la.get(t))==null?void 0:n.get(e)}const kv=Il("__proto__,__v_isRef,__isVue"),Ip=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Al)),Ov=Cl(),Mv=Cl(!1,!0),Fv=Cl(!0),Cd=Lv();function Lv(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=ue(this);for(let i=0,o=this.length;i<o;i++)Pt(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(ue)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ls();const r=ue(this)[e].apply(this,n);return Bs(),r}}),t}function Bv(t){const e=ue(this);return Pt(e,"has",t),e.hasOwnProperty(t)}function Cl(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?tI:Rp:e?bp:Ap).get(r))return r;const o=Z(r);if(!t){if(o&&fe(Cd,s))return Reflect.get(Cd,s,i);if(s==="hasOwnProperty")return Bv}const a=Reflect.get(r,s,i);return(Al(s)?Ip.has(s):kv(s))||(t||Pt(r,"get",s),e)?a:Ue(a)?o&&bl(s)?a:a.value:xe(a)?t?Sp(a):co(a):a}}const Uv=wp(),$v=wp(!0);function wp(t=!1){return function(n,r,s,i){let o=n[r];if(Es(o)&&Ue(o)&&!Ue(s))return!1;if(!t&&(!ha(s)&&!Es(s)&&(o=ue(o),s=ue(s)),!Z(n)&&Ue(o)&&!Ue(s)))return o.value=s,!0;const a=Z(n)&&bl(r)?Number(r)<n.length:fe(n,r),c=Reflect.set(n,r,s,i);return n===ue(i)&&(a?Ci(s,o)&&yn(n,"set",r,s):yn(n,"add",r,s)),c}}function qv(t,e){const n=fe(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&yn(t,"delete",e,void 0),r}function jv(t,e){const n=Reflect.has(t,e);return(!Al(e)||!Ip.has(e))&&Pt(t,"has",e),n}function Kv(t){return Pt(t,"iterate",Z(t)?"length":Vr),Reflect.ownKeys(t)}const Tp={get:Ov,set:Uv,deleteProperty:qv,has:jv,ownKeys:Kv},zv={get:Fv,set(t,e){return!0},deleteProperty(t,e){return!0}},Gv=qe({},Tp,{get:Mv,set:$v}),Vl=t=>t,ja=t=>Reflect.getPrototypeOf(t);function No(t,e,n=!1,r=!1){t=t.__v_raw;const s=ue(t),i=ue(e);n||(e!==i&&Pt(s,"get",e),Pt(s,"get",i));const{has:o}=ja(s),a=r?Vl:n?Nl:xi;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function ko(t,e=!1){const n=this.__v_raw,r=ue(n),s=ue(t);return e||(t!==s&&Pt(r,"has",t),Pt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Oo(t,e=!1){return t=t.__v_raw,!e&&Pt(ue(t),"iterate",Vr),Reflect.get(t,"size",t)}function Vd(t){t=ue(t);const e=ue(this);return ja(e).has.call(e,t)||(e.add(t),yn(e,"add",t,t)),this}function xd(t,e){e=ue(e);const n=ue(this),{has:r,get:s}=ja(n);let i=r.call(n,t);i||(t=ue(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Ci(e,o)&&yn(n,"set",t,e):yn(n,"add",t,e),this}function Dd(t){const e=ue(this),{has:n,get:r}=ja(e);let s=n.call(e,t);s||(t=ue(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&yn(e,"delete",t,void 0),i}function Nd(){const t=ue(this),e=t.size!==0,n=t.clear();return e&&yn(t,"clear",void 0,void 0),n}function Mo(t,e){return function(r,s){const i=this,o=i.__v_raw,a=ue(o),c=e?Vl:t?Nl:xi;return!t&&Pt(a,"iterate",Vr),o.forEach((u,l)=>r.call(s,c(u),c(l),i))}}function Fo(t,e,n){return function(...r){const s=this.__v_raw,i=ue(s),o=fs(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),l=n?Vl:e?Nl:xi;return!e&&Pt(i,"iterate",c?yu:Vr),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[l(h[0]),l(h[1])]:l(h),done:d}},[Symbol.iterator](){return this}}}}function Rn(t){return function(...e){return t==="delete"?!1:this}}function Wv(){const t={get(i){return No(this,i)},get size(){return Oo(this)},has:ko,add:Vd,set:xd,delete:Dd,clear:Nd,forEach:Mo(!1,!1)},e={get(i){return No(this,i,!1,!0)},get size(){return Oo(this)},has:ko,add:Vd,set:xd,delete:Dd,clear:Nd,forEach:Mo(!1,!0)},n={get(i){return No(this,i,!0)},get size(){return Oo(this,!0)},has(i){return ko.call(this,i,!0)},add:Rn("add"),set:Rn("set"),delete:Rn("delete"),clear:Rn("clear"),forEach:Mo(!0,!1)},r={get(i){return No(this,i,!0,!0)},get size(){return Oo(this,!0)},has(i){return ko.call(this,i,!0)},add:Rn("add"),set:Rn("set"),delete:Rn("delete"),clear:Rn("clear"),forEach:Mo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Fo(i,!1,!1),n[i]=Fo(i,!0,!1),e[i]=Fo(i,!1,!0),r[i]=Fo(i,!0,!0)}),[t,n,e,r]}const[Hv,Qv,Yv,Xv]=Wv();function xl(t,e){const n=e?t?Xv:Yv:t?Qv:Hv;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(fe(n,s)&&s in r?n:r,s,i)}const Jv={get:xl(!1,!1)},Zv={get:xl(!1,!0)},eI={get:xl(!0,!1)},Ap=new WeakMap,bp=new WeakMap,Rp=new WeakMap,tI=new WeakMap;function nI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rI(t){return t.__v_skip||!Object.isExtensible(t)?0:nI(Ev(t))}function co(t){return Es(t)?t:Dl(t,!1,Tp,Jv,Ap)}function Pp(t){return Dl(t,!1,Gv,Zv,bp)}function Sp(t){return Dl(t,!0,zv,eI,Rp)}function Dl(t,e,n,r,s){if(!xe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=rI(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function Un(t){return Es(t)?Un(t.__v_raw):!!(t&&t.__v_isReactive)}function Es(t){return!!(t&&t.__v_isReadonly)}function ha(t){return!!(t&&t.__v_isShallow)}function Cp(t){return Un(t)||Es(t)}function ue(t){const e=t&&t.__v_raw;return e?ue(e):t}function Ka(t){return ua(t,"__v_skip",!0),t}const xi=t=>xe(t)?co(t):t,Nl=t=>xe(t)?Sp(t):t;function Vp(t){Bn&&qt&&(t=ue(t),vp(t.dep||(t.dep=Pl())))}function xp(t,e){t=ue(t);const n=t.dep;n&&Eu(n)}function Ue(t){return!!(t&&t.__v_isRef===!0)}function kl(t){return Dp(t,!1)}function sI(t){return Dp(t,!0)}function Dp(t,e){return Ue(t)?t:new iI(t,e)}class iI{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:ue(e),this._value=n?e:xi(e)}get value(){return Vp(this),this._value}set value(e){const n=this.__v_isShallow||ha(e)||Es(e);e=n?e:ue(e),Ci(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:xi(e),xp(this))}}function $n(t){return Ue(t)?t.value:t}const oI={get:(t,e,n)=>$n(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ue(s)&&!Ue(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Np(t){return Un(t)?t:new Proxy(t,oI)}function aI(t){const e=Z(t)?new Array(t.length):{};for(const n in t)e[n]=uI(t,n);return e}class cI{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Nv(ue(this._object),this._key)}}function uI(t,e,n){const r=t[e];return Ue(r)?r:new cI(t,e,n)}class lI{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Sl(e,()=>{this._dirty||(this._dirty=!0,xp(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=ue(this);return Vp(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function hI(t,e,n=!1){let r,s;const i=ie(t);return i?(r=t,s=zt):(r=t.get,s=t.set),new lI(r,s,i||!s,n)}function qn(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){za(i,e,n)}return s}function Lt(t,e,n,r){if(ie(t)){const i=qn(t,e,n,r);return i&&up(i)&&i.catch(o=>{za(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(Lt(t[i],e,n,r));return s}function za(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const u=i.ec;if(u){for(let l=0;l<u.length;l++)if(u[l](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){qn(c,null,10,[t,o,a]);return}}dI(t,n,s,r)}function dI(t,e,n,r=!0){console.error(t)}let Di=!1,vu=!1;const lt=[];let Zt=0;const ms=[];let fn=null,_r=0;const kp=Promise.resolve();let Ol=null;function Ml(t){const e=Ol||kp;return t?e.then(this?t.bind(this):t):e}function fI(t){let e=Zt+1,n=lt.length;for(;e<n;){const r=e+n>>>1;Ni(lt[r])<t?e=r+1:n=r}return e}function Fl(t){(!lt.length||!lt.includes(t,Di&&t.allowRecurse?Zt+1:Zt))&&(t.id==null?lt.push(t):lt.splice(fI(t.id),0,t),Op())}function Op(){!Di&&!vu&&(vu=!0,Ol=kp.then(Fp))}function mI(t){const e=lt.indexOf(t);e>Zt&&lt.splice(e,1)}function pI(t){Z(t)?ms.push(...t):(!fn||!fn.includes(t,t.allowRecurse?_r+1:_r))&&ms.push(t),Op()}function kd(t,e=Di?Zt+1:0){for(;e<lt.length;e++){const n=lt[e];n&&n.pre&&(lt.splice(e,1),e--,n())}}function Mp(t){if(ms.length){const e=[...new Set(ms)];if(ms.length=0,fn){fn.push(...e);return}for(fn=e,fn.sort((n,r)=>Ni(n)-Ni(r)),_r=0;_r<fn.length;_r++)fn[_r]();fn=null,_r=0}}const Ni=t=>t.id==null?1/0:t.id,gI=(t,e)=>{const n=Ni(t)-Ni(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Fp(t){vu=!1,Di=!0,lt.sort(gI);const e=zt;try{for(Zt=0;Zt<lt.length;Zt++){const n=lt[Zt];n&&n.active!==!1&&qn(n,null,14)}}finally{Zt=0,lt.length=0,Mp(),Di=!1,Ol=null,(lt.length||ms.length)&&Fp()}}function _I(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Pe;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const l=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[l]||Pe;d&&(s=n.map(f=>ze(f)?f.trim():f)),h&&(s=n.map(pu))}let a,c=r[a=Uc(e)]||r[a=Uc(an(e))];!c&&i&&(c=r[a=Uc(Fs(e))]),c&&Lt(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Lt(u,t,6,s)}}function Lp(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!ie(t)){const c=u=>{const l=Lp(u,e,!0);l&&(a=!0,qe(o,l))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(xe(t)&&r.set(t,null),null):(Z(i)?i.forEach(c=>o[c]=null):qe(o,i),xe(t)&&r.set(t,o),o)}function Ga(t,e){return!t||!Ba(e)?!1:(e=e.slice(2).replace(/Once$/,""),fe(t,e[0].toLowerCase()+e.slice(1))||fe(t,Fs(e))||fe(t,e))}let Xe=null,Bp=null;function da(t){const e=Xe;return Xe=t,Bp=t&&t.type.__scopeId||null,e}function yI(t,e=Xe,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Gd(-1);const i=da(e);let o;try{o=t(...s)}finally{da(i),r._d&&Gd(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function $c(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:u,render:l,renderCache:h,data:d,setupState:f,ctx:_,inheritAttrs:y}=t;let I,R;const V=da(t);try{if(n.shapeFlag&4){const x=s||r;I=Jt(l.call(x,x,h,i,f,d,_)),R=c}else{const x=e;I=Jt(x.length>1?x(i,{attrs:c,slots:a,emit:u}):x(i,null)),R=e.props?c:EI(c)}}catch(x){yi.length=0,za(x,t,1),I=ht(Ut)}let N=I;if(R&&y!==!1){const x=Object.keys(R),{shapeFlag:j}=N;x.length&&j&7&&(o&&x.some(wl)&&(R=vI(R,o)),N=Wn(N,R))}return n.dirs&&(N=Wn(N),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&(N.transition=n.transition),I=N,da(V),I}const EI=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ba(n))&&((e||(e={}))[n]=t[n]);return e},vI=(t,e)=>{const n={};for(const r in t)(!wl(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function II(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Od(r,o,u):!!o;if(c&8){const l=e.dynamicProps;for(let h=0;h<l.length;h++){const d=l[h];if(o[d]!==r[d]&&!Ga(u,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Od(r,o,u):!0:!!o;return!1}function Od(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Ga(n,i))return!0}return!1}function wI({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const TI=t=>t.__isSuspense;function AI(t,e){e&&e.pendingBranch?Z(t)?e.effects.push(...t):e.effects.push(t):pI(t)}function AV(t,e){return Ll(t,null,e)}const Lo={};function pi(t,e,n){return Ll(t,e,n)}function Ll(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=Pe){var a;const c=gp()===((a=We)==null?void 0:a.scope)?We:null;let u,l=!1,h=!1;if(Ue(t)?(u=()=>t.value,l=ha(t)):Un(t)?(u=()=>t,r=!0):Z(t)?(h=!0,l=t.some(x=>Un(x)||ha(x)),u=()=>t.map(x=>{if(Ue(x))return x.value;if(Un(x))return br(x);if(ie(x))return qn(x,c,2)})):ie(t)?e?u=()=>qn(t,c,2):u=()=>{if(!(c&&c.isUnmounted))return d&&d(),Lt(t,c,3,[f])}:u=zt,e&&r){const x=u;u=()=>br(x())}let d,f=x=>{d=V.onStop=()=>{qn(x,c,4)}},_;if(Li)if(f=zt,e?n&&Lt(e,c,3,[u(),h?[]:void 0,f]):u(),s==="sync"){const x=vw();_=x.__watcherHandles||(x.__watcherHandles=[])}else return zt;let y=h?new Array(t.length).fill(Lo):Lo;const I=()=>{if(V.active)if(e){const x=V.run();(r||l||(h?x.some((j,J)=>Ci(j,y[J])):Ci(x,y)))&&(d&&d(),Lt(e,c,3,[x,y===Lo?void 0:h&&y[0]===Lo?[]:y,f]),y=x)}else V.run()};I.allowRecurse=!!e;let R;s==="sync"?R=I:s==="post"?R=()=>wt(I,c&&c.suspense):(I.pre=!0,c&&(I.id=c.uid),R=()=>Fl(I));const V=new Sl(u,R);e?n?I():y=V.run():s==="post"?wt(V.run.bind(V),c&&c.suspense):V.run();const N=()=>{V.stop(),c&&c.scope&&Tl(c.scope.effects,V)};return _&&_.push(N),N}function bI(t,e,n){const r=this.proxy,s=ze(t)?t.includes(".")?Up(r,t):()=>r[t]:t.bind(r,r);let i;ie(e)?i=e:(i=e.handler,n=e);const o=We;vs(this);const a=Ll(s,i.bind(r),n);return o?vs(o):xr(),a}function Up(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function br(t,e){if(!xe(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ue(t))br(t.value,e);else if(Z(t))for(let n=0;n<t.length;n++)br(t[n],e);else if(cp(t)||fs(t))t.forEach(n=>{br(n,e)});else if(hp(t))for(const n in t)br(t[n],e);return t}function bV(t,e){const n=Xe;if(n===null)return t;const r=Ja(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,u=Pe]=e[i];o&&(ie(o)&&(o={mounted:o,updated:o}),o.deep&&br(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:c,modifiers:u}))}return t}function hr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Ls(),Lt(c,n,8,[t.el,a,t,e]),Bs())}}function $p(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gp(()=>{t.isMounted=!0}),Hp(()=>{t.isUnmounting=!0}),t}const kt=[Function,Array],qp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:kt,onEnter:kt,onAfterEnter:kt,onEnterCancelled:kt,onBeforeLeave:kt,onLeave:kt,onAfterLeave:kt,onLeaveCancelled:kt,onBeforeAppear:kt,onAppear:kt,onAfterAppear:kt,onAppearCancelled:kt},RI={name:"BaseTransition",props:qp,setup(t,{slots:e}){const n=cg(),r=$p();let s;return()=>{const i=e.default&&Bl(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const y of i)if(y.type!==Ut){o=y;break}}const a=ue(t),{mode:c}=a;if(r.isLeaving)return qc(o);const u=Md(o);if(!u)return qc(o);const l=ki(u,a,r,n);Oi(u,l);const h=n.subTree,d=h&&Md(h);let f=!1;const{getTransitionKey:_}=u.type;if(_){const y=_();s===void 0?s=y:y!==s&&(s=y,f=!0)}if(d&&d.type!==Ut&&(!yr(u,d)||f)){const y=ki(d,a,r,n);if(Oi(d,y),c==="out-in")return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},qc(o);c==="in-out"&&u.type!==Ut&&(y.delayLeave=(I,R,V)=>{const N=jp(r,d);N[String(d.key)]=d,I._leaveCb=()=>{R(),I._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=V})}return o}}},PI=RI;function jp(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function ki(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:l,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:_,onBeforeAppear:y,onAppear:I,onAfterAppear:R,onAppearCancelled:V}=e,N=String(t.key),x=jp(n,t),j=(B,Q)=>{B&&Lt(B,r,9,Q)},J=(B,Q)=>{const re=Q[1];j(B,Q),Z(B)?B.every(Te=>Te.length<=1)&&re():B.length<=1&&re()},oe={mode:i,persisted:o,beforeEnter(B){let Q=a;if(!n.isMounted)if(s)Q=y||a;else return;B._leaveCb&&B._leaveCb(!0);const re=x[N];re&&yr(t,re)&&re.el._leaveCb&&re.el._leaveCb(),j(Q,[B])},enter(B){let Q=c,re=u,Te=l;if(!n.isMounted)if(s)Q=I||c,re=R||u,Te=V||l;else return;let K=!1;const ge=B._enterCb=rt=>{K||(K=!0,rt?j(Te,[B]):j(re,[B]),oe.delayedLeave&&oe.delayedLeave(),B._enterCb=void 0)};Q?J(Q,[B,ge]):ge()},leave(B,Q){const re=String(t.key);if(B._enterCb&&B._enterCb(!0),n.isUnmounting)return Q();j(h,[B]);let Te=!1;const K=B._leaveCb=ge=>{Te||(Te=!0,Q(),ge?j(_,[B]):j(f,[B]),B._leaveCb=void 0,x[re]===t&&delete x[re])};x[re]=t,d?J(d,[B,K]):K()},clone(B){return ki(B,e,n,r)}};return oe}function qc(t){if(Wa(t))return t=Wn(t),t.children=null,t}function Md(t){return Wa(t)?t.children?t.children[0]:void 0:t}function Oi(t,e){t.shapeFlag&6&&t.component?Oi(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Bl(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===xt?(o.patchFlag&128&&s++,r=r.concat(Bl(o.children,e,a))):(e||o.type!==Ut)&&r.push(a!=null?Wn(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Kp(t,e){return ie(t)?(()=>qe({name:t.name},e,{setup:t}))():t}const gi=t=>!!t.type.__asyncLoader,Wa=t=>t.type.__isKeepAlive;function SI(t,e){zp(t,"a",e)}function CI(t,e){zp(t,"da",e)}function zp(t,e,n=We){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Ha(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Wa(s.parent.vnode)&&VI(r,e,n,s),s=s.parent}}function VI(t,e,n,r){const s=Ha(e,t,r,!0);Qp(()=>{Tl(r[e],s)},n)}function Ha(t,e,n=We,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Ls(),vs(n);const a=Lt(e,n,t,o);return xr(),Bs(),a});return r?s.unshift(i):s.push(i),i}}const In=t=>(e,n=We)=>(!Li||t==="sp")&&Ha(t,(...r)=>e(...r),n),xI=In("bm"),Gp=In("m"),DI=In("bu"),Wp=In("u"),Hp=In("bum"),Qp=In("um"),NI=In("sp"),kI=In("rtg"),OI=In("rtc");function MI(t,e=We){Ha("ec",t,e)}const Yp="components";function FI(t,e){return BI(Yp,t,!0,e)||t}const LI=Symbol.for("v-ndc");function BI(t,e,n=!0,r=!1){const s=Xe||We;if(s){const i=s.type;if(t===Yp){const a=_w(i,!1);if(a&&(a===e||a===an(e)||a===qa(an(e))))return i}const o=Fd(s[t]||i[t],e)||Fd(s.appContext[t],e);return!o&&r?i:o}}function Fd(t,e){return t&&(t[e]||t[an(e)]||t[qa(an(e))])}function RV(t,e,n,r){let s;const i=n&&n[r];if(Z(t)||ze(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(xe(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const u=o[a];s[a]=e(t[u],u,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function PV(t,e,n={},r,s){if(Xe.isCE||Xe.parent&&gi(Xe.parent)&&Xe.parent.isCE)return e!=="default"&&(n.name=e),ht("slot",n,r&&r());let i=t[e];i&&i._c&&(i._d=!1),Ya();const o=i&&Xp(i(n)),a=ql(xt,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Xp(t){return t.some(e=>ma(e)?!(e.type===Ut||e.type===xt&&!Xp(e.children)):!0)?t:null}const Iu=t=>t?ug(t)?Ja(t)||t.proxy:Iu(t.parent):null,_i=qe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Iu(t.parent),$root:t=>Iu(t.root),$emit:t=>t.emit,$options:t=>Ul(t),$forceUpdate:t=>t.f||(t.f=()=>Fl(t.update)),$nextTick:t=>t.n||(t.n=Ml.bind(t.proxy)),$watch:t=>bI.bind(t)}),jc=(t,e)=>t!==Pe&&!t.__isScriptSetup&&fe(t,e),UI={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(jc(r,e))return o[e]=1,r[e];if(s!==Pe&&fe(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&fe(u,e))return o[e]=3,i[e];if(n!==Pe&&fe(n,e))return o[e]=4,n[e];wu&&(o[e]=0)}}const l=_i[e];let h,d;if(l)return e==="$attrs"&&Pt(t,"get",e),l(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Pe&&fe(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,fe(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return jc(s,e)?(s[e]=n,!0):r!==Pe&&fe(r,e)?(r[e]=n,!0):fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Pe&&fe(t,o)||jc(e,o)||(a=i[0])&&fe(a,o)||fe(r,o)||fe(_i,o)||fe(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:fe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ld(t){return Z(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let wu=!0;function $I(t){const e=Ul(t),n=t.proxy,r=t.ctx;wu=!1,e.beforeCreate&&Bd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:l,beforeMount:h,mounted:d,beforeUpdate:f,updated:_,activated:y,deactivated:I,beforeDestroy:R,beforeUnmount:V,destroyed:N,unmounted:x,render:j,renderTracked:J,renderTriggered:oe,errorCaptured:B,serverPrefetch:Q,expose:re,inheritAttrs:Te,components:K,directives:ge,filters:rt}=e;if(u&&qI(u,r,null),o)for(const Ae in o){const _e=o[Ae];ie(_e)&&(r[Ae]=_e.bind(n))}if(s){const Ae=s.call(n,n);xe(Ae)&&(t.data=co(Ae))}if(wu=!0,i)for(const Ae in i){const _e=i[Ae],ln=ie(_e)?_e.bind(n,n):ie(_e.get)?_e.get.bind(n,n):zt,bn=!ie(_e)&&ie(_e.set)?_e.set.bind(n):zt,Qt=Ot({get:ln,set:bn});Object.defineProperty(r,Ae,{enumerable:!0,configurable:!0,get:()=>Qt.value,set:It=>Qt.value=It})}if(a)for(const Ae in a)Jp(a[Ae],r,n,Ae);if(c){const Ae=ie(c)?c.call(n):c;Reflect.ownKeys(Ae).forEach(_e=>{ea(_e,Ae[_e])})}l&&Bd(l,t,"c");function le(Ae,_e){Z(_e)?_e.forEach(ln=>Ae(ln.bind(n))):_e&&Ae(_e.bind(n))}if(le(xI,h),le(Gp,d),le(DI,f),le(Wp,_),le(SI,y),le(CI,I),le(MI,B),le(OI,J),le(kI,oe),le(Hp,V),le(Qp,x),le(NI,Q),Z(re))if(re.length){const Ae=t.exposed||(t.exposed={});re.forEach(_e=>{Object.defineProperty(Ae,_e,{get:()=>n[_e],set:ln=>n[_e]=ln})})}else t.exposed||(t.exposed={});j&&t.render===zt&&(t.render=j),Te!=null&&(t.inheritAttrs=Te),K&&(t.components=K),ge&&(t.directives=ge)}function qI(t,e,n=zt){Z(t)&&(t=Tu(t));for(const r in t){const s=t[r];let i;xe(s)?"default"in s?i=Bt(s.from||r,s.default,!0):i=Bt(s.from||r):i=Bt(s),Ue(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Bd(t,e,n){Lt(Z(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Jp(t,e,n,r){const s=r.includes(".")?Up(n,r):()=>n[r];if(ze(t)){const i=e[t];ie(i)&&pi(s,i)}else if(ie(t))pi(s,t.bind(n));else if(xe(t))if(Z(t))t.forEach(i=>Jp(i,e,n,r));else{const i=ie(t.handler)?t.handler.bind(n):e[t.handler];ie(i)&&pi(s,i,t)}}function Ul(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>fa(c,u,o,!0)),fa(c,e,o)),xe(e)&&i.set(e,c),c}function fa(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&fa(t,i,n,!0),s&&s.forEach(o=>fa(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=jI[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const jI={data:Ud,props:$d,emits:$d,methods:ui,computed:ui,beforeCreate:pt,created:pt,beforeMount:pt,mounted:pt,beforeUpdate:pt,updated:pt,beforeDestroy:pt,beforeUnmount:pt,destroyed:pt,unmounted:pt,activated:pt,deactivated:pt,errorCaptured:pt,serverPrefetch:pt,components:ui,directives:ui,watch:zI,provide:Ud,inject:KI};function Ud(t,e){return e?t?function(){return qe(ie(t)?t.call(this,this):t,ie(e)?e.call(this,this):e)}:e:t}function KI(t,e){return ui(Tu(t),Tu(e))}function Tu(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function pt(t,e){return t?[...new Set([].concat(t,e))]:e}function ui(t,e){return t?qe(Object.create(null),t,e):e}function $d(t,e){return t?Z(t)&&Z(e)?[...new Set([...t,...e])]:qe(Object.create(null),Ld(t),Ld(e??{})):e}function zI(t,e){if(!t)return e;if(!e)return t;const n=qe(Object.create(null),t);for(const r in e)n[r]=pt(t[r],e[r]);return n}function Zp(){return{app:null,config:{isNativeTag:gv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GI=0;function WI(t,e){return function(r,s=null){ie(r)||(r=qe({},r)),s!=null&&!xe(s)&&(s=null);const i=Zp(),o=new Set;let a=!1;const c=i.app={_uid:GI++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Iw,get config(){return i.config},set config(u){},use(u,...l){return o.has(u)||(u&&ie(u.install)?(o.add(u),u.install(c,...l)):ie(u)&&(o.add(u),u(c,...l))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,l){return l?(i.components[u]=l,c):i.components[u]},directive(u,l){return l?(i.directives[u]=l,c):i.directives[u]},mount(u,l,h){if(!a){const d=ht(r,s);return d.appContext=i,l&&e?e(d,u):t(d,u,h),a=!0,c._container=u,u.__vue_app__=c,Ja(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(u,l){return i.provides[u]=l,c},runWithContext(u){Mi=c;try{return u()}finally{Mi=null}}};return c}}let Mi=null;function ea(t,e){if(We){let n=We.provides;const r=We.parent&&We.parent.provides;r===n&&(n=We.provides=Object.create(r)),n[t]=e}}function Bt(t,e,n=!1){const r=We||Xe;if(r||Mi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Mi._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ie(e)?e.call(r&&r.proxy):e}}function HI(){return!!(We||Xe||Mi)}function QI(t,e,n,r=!1){const s={},i={};ua(i,Xa,1),t.propsDefaults=Object.create(null),eg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Pp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function YI(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=ue(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let h=0;h<l.length;h++){let d=l[h];if(Ga(t.emitsOptions,d))continue;const f=e[d];if(c)if(fe(i,d))f!==i[d]&&(i[d]=f,u=!0);else{const _=an(d);s[_]=Au(c,a,_,f,t,!1)}else f!==i[d]&&(i[d]=f,u=!0)}}}else{eg(t,e,s,i)&&(u=!0);let l;for(const h in a)(!e||!fe(e,h)&&((l=Fs(h))===h||!fe(e,l)))&&(c?n&&(n[h]!==void 0||n[l]!==void 0)&&(s[h]=Au(c,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!fe(e,h))&&(delete i[h],u=!0)}u&&yn(t,"set","$attrs")}function eg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Jo(c))continue;const u=e[c];let l;s&&fe(s,l=an(c))?!i||!i.includes(l)?n[l]=u:(a||(a={}))[l]=u:Ga(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=ue(n),u=a||Pe;for(let l=0;l<i.length;l++){const h=i[l];n[h]=Au(s,c,h,u[h],t,!fe(u,h))}}return o}function Au(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=fe(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ie(c)){const{propsDefaults:u}=s;n in u?r=u[n]:(vs(s),r=u[n]=c.call(null,e),xr())}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Fs(n))&&(r=!0))}return r}function tg(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!ie(t)){const l=h=>{c=!0;const[d,f]=tg(h,e,!0);qe(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!i&&!c)return xe(t)&&r.set(t,ds),ds;if(Z(i))for(let l=0;l<i.length;l++){const h=an(i[l]);qd(h)&&(o[h]=Pe)}else if(i)for(const l in i){const h=an(l);if(qd(h)){const d=i[l],f=o[h]=Z(d)||ie(d)?{type:d}:qe({},d);if(f){const _=zd(Boolean,f.type),y=zd(String,f.type);f[0]=_>-1,f[1]=y<0||_<y,(_>-1||fe(f,"default"))&&a.push(h)}}}const u=[o,a];return xe(t)&&r.set(t,u),u}function qd(t){return t[0]!=="$"}function jd(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Kd(t,e){return jd(t)===jd(e)}function zd(t,e){return Z(e)?e.findIndex(n=>Kd(n,t)):ie(e)&&Kd(e,t)?0:-1}const ng=t=>t[0]==="_"||t==="$stable",$l=t=>Z(t)?t.map(Jt):[Jt(t)],XI=(t,e,n)=>{if(e._n)return e;const r=yI((...s)=>$l(e(...s)),n);return r._c=!1,r},rg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(ng(s))continue;const i=t[s];if(ie(i))e[s]=XI(s,i,r);else if(i!=null){const o=$l(i);e[s]=()=>o}}},sg=(t,e)=>{const n=$l(e);t.slots.default=()=>n},JI=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=ue(e),ua(e,"_",n)):rg(e,t.slots={})}else t.slots={},e&&sg(t,e);ua(t.slots,Xa,1)},ZI=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Pe;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(qe(s,e),!n&&a===1&&delete s._):(i=!e.$stable,rg(e,s)),o=e}else e&&(sg(t,e),o={default:1});if(i)for(const a in s)!ng(a)&&!(a in o)&&delete s[a]};function bu(t,e,n,r,s=!1){if(Z(t)){t.forEach((d,f)=>bu(d,e&&(Z(e)?e[f]:e),n,r,s));return}if(gi(r)&&!s)return;const i=r.shapeFlag&4?Ja(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,l=a.refs===Pe?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==c&&(ze(u)?(l[u]=null,fe(h,u)&&(h[u]=null)):Ue(u)&&(u.value=null)),ie(c))qn(c,a,12,[o,l]);else{const d=ze(c),f=Ue(c);if(d||f){const _=()=>{if(t.f){const y=d?fe(h,c)?h[c]:l[c]:c.value;s?Z(y)&&Tl(y,i):Z(y)?y.includes(i)||y.push(i):d?(l[c]=[i],fe(h,c)&&(h[c]=l[c])):(c.value=[i],t.k&&(l[t.k]=c.value))}else d?(l[c]=o,fe(h,c)&&(h[c]=o)):f&&(c.value=o,t.k&&(l[t.k]=o))};o?(_.id=-1,wt(_,n)):_()}}}const wt=AI;function ew(t){return tw(t)}function tw(t,e){const n=gu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:l,parentNode:h,nextSibling:d,setScopeId:f=zt,insertStaticContent:_}=t,y=(m,p,g,w=null,A=null,S=null,U=!1,D=null,O=!!p.dynamicChildren)=>{if(m===p)return;m&&!yr(m,p)&&(w=T(m),It(m,A,S,!0),m=null),p.patchFlag===-2&&(O=!1,p.dynamicChildren=null);const{type:C,ref:Y,shapeFlag:z}=p;switch(C){case Qa:I(m,p,g,w);break;case Ut:R(m,p,g,w);break;case Kc:m==null&&V(p,g,w,U);break;case xt:K(m,p,g,w,A,S,U,D,O);break;default:z&1?j(m,p,g,w,A,S,U,D,O):z&6?ge(m,p,g,w,A,S,U,D,O):(z&64||z&128)&&C.process(m,p,g,w,A,S,U,D,O,M)}Y!=null&&A&&bu(Y,m&&m.ref,S,p||m,!p)},I=(m,p,g,w)=>{if(m==null)r(p.el=a(p.children),g,w);else{const A=p.el=m.el;p.children!==m.children&&u(A,p.children)}},R=(m,p,g,w)=>{m==null?r(p.el=c(p.children||""),g,w):p.el=m.el},V=(m,p,g,w)=>{[m.el,m.anchor]=_(m.children,p,g,w,m.el,m.anchor)},N=({el:m,anchor:p},g,w)=>{let A;for(;m&&m!==p;)A=d(m),r(m,g,w),m=A;r(p,g,w)},x=({el:m,anchor:p})=>{let g;for(;m&&m!==p;)g=d(m),s(m),m=g;s(p)},j=(m,p,g,w,A,S,U,D,O)=>{U=U||p.type==="svg",m==null?J(p,g,w,A,S,U,D,O):Q(m,p,A,S,U,D,O)},J=(m,p,g,w,A,S,U,D)=>{let O,C;const{type:Y,props:z,shapeFlag:X,transition:te,dirs:ae}=m;if(O=m.el=o(m.type,S,z&&z.is,z),X&8?l(O,m.children):X&16&&B(m.children,O,null,w,A,S&&Y!=="foreignObject",U,D),ae&&hr(m,null,w,"created"),oe(O,m,m.scopeId,U,w),z){for(const we in z)we!=="value"&&!Jo(we)&&i(O,we,null,z[we],S,m.children,w,A,ct);"value"in z&&i(O,"value",null,z.value),(C=z.onVnodeBeforeMount)&&Xt(C,w,m)}ae&&hr(m,null,w,"beforeMount");const be=(!A||A&&!A.pendingBranch)&&te&&!te.persisted;be&&te.beforeEnter(O),r(O,p,g),((C=z&&z.onVnodeMounted)||be||ae)&&wt(()=>{C&&Xt(C,w,m),be&&te.enter(O),ae&&hr(m,null,w,"mounted")},A)},oe=(m,p,g,w,A)=>{if(g&&f(m,g),w)for(let S=0;S<w.length;S++)f(m,w[S]);if(A){let S=A.subTree;if(p===S){const U=A.vnode;oe(m,U,U.scopeId,U.slotScopeIds,A.parent)}}},B=(m,p,g,w,A,S,U,D,O=0)=>{for(let C=O;C<m.length;C++){const Y=m[C]=D?kn(m[C]):Jt(m[C]);y(null,Y,p,g,w,A,S,U,D)}},Q=(m,p,g,w,A,S,U)=>{const D=p.el=m.el;let{patchFlag:O,dynamicChildren:C,dirs:Y}=p;O|=m.patchFlag&16;const z=m.props||Pe,X=p.props||Pe;let te;g&&dr(g,!1),(te=X.onVnodeBeforeUpdate)&&Xt(te,g,p,m),Y&&hr(p,m,g,"beforeUpdate"),g&&dr(g,!0);const ae=A&&p.type!=="foreignObject";if(C?re(m.dynamicChildren,C,D,g,w,ae,S):U||_e(m,p,D,null,g,w,ae,S,!1),O>0){if(O&16)Te(D,p,z,X,g,w,A);else if(O&2&&z.class!==X.class&&i(D,"class",null,X.class,A),O&4&&i(D,"style",z.style,X.style,A),O&8){const be=p.dynamicProps;for(let we=0;we<be.length;we++){const je=be[we],$t=z[je],es=X[je];(es!==$t||je==="value")&&i(D,je,$t,es,A,m.children,g,w,ct)}}O&1&&m.children!==p.children&&l(D,p.children)}else!U&&C==null&&Te(D,p,z,X,g,w,A);((te=X.onVnodeUpdated)||Y)&&wt(()=>{te&&Xt(te,g,p,m),Y&&hr(p,m,g,"updated")},w)},re=(m,p,g,w,A,S,U)=>{for(let D=0;D<p.length;D++){const O=m[D],C=p[D],Y=O.el&&(O.type===xt||!yr(O,C)||O.shapeFlag&70)?h(O.el):g;y(O,C,Y,null,w,A,S,U,!0)}},Te=(m,p,g,w,A,S,U)=>{if(g!==w){if(g!==Pe)for(const D in g)!Jo(D)&&!(D in w)&&i(m,D,g[D],null,U,p.children,A,S,ct);for(const D in w){if(Jo(D))continue;const O=w[D],C=g[D];O!==C&&D!=="value"&&i(m,D,C,O,U,p.children,A,S,ct)}"value"in w&&i(m,"value",g.value,w.value)}},K=(m,p,g,w,A,S,U,D,O)=>{const C=p.el=m?m.el:a(""),Y=p.anchor=m?m.anchor:a("");let{patchFlag:z,dynamicChildren:X,slotScopeIds:te}=p;te&&(D=D?D.concat(te):te),m==null?(r(C,g,w),r(Y,g,w),B(p.children,g,Y,A,S,U,D,O)):z>0&&z&64&&X&&m.dynamicChildren?(re(m.dynamicChildren,X,g,A,S,U,D),(p.key!=null||A&&p===A.subTree)&&ig(m,p,!0)):_e(m,p,g,Y,A,S,U,D,O)},ge=(m,p,g,w,A,S,U,D,O)=>{p.slotScopeIds=D,m==null?p.shapeFlag&512?A.ctx.activate(p,g,w,U,O):rt(p,g,w,A,S,U,O):mt(m,p,O)},rt=(m,p,g,w,A,S,U)=>{const D=m.component=dw(m,w,A);if(Wa(m)&&(D.ctx.renderer=M),fw(D),D.asyncDep){if(A&&A.registerDep(D,le),!m.el){const O=D.subTree=ht(Ut);R(null,O,p,g)}return}le(D,m,p,g,A,S,U)},mt=(m,p,g)=>{const w=p.component=m.component;if(II(m,p,g))if(w.asyncDep&&!w.asyncResolved){Ae(w,p,g);return}else w.next=p,mI(w.update),w.update();else p.el=m.el,w.vnode=p},le=(m,p,g,w,A,S,U)=>{const D=()=>{if(m.isMounted){let{next:Y,bu:z,u:X,parent:te,vnode:ae}=m,be=Y,we;dr(m,!1),Y?(Y.el=ae.el,Ae(m,Y,U)):Y=ae,z&&Zo(z),(we=Y.props&&Y.props.onVnodeBeforeUpdate)&&Xt(we,te,Y,ae),dr(m,!0);const je=$c(m),$t=m.subTree;m.subTree=je,y($t,je,h($t.el),T($t),m,A,S),Y.el=je.el,be===null&&wI(m,je.el),X&&wt(X,A),(we=Y.props&&Y.props.onVnodeUpdated)&&wt(()=>Xt(we,te,Y,ae),A)}else{let Y;const{el:z,props:X}=p,{bm:te,m:ae,parent:be}=m,we=gi(p);if(dr(m,!1),te&&Zo(te),!we&&(Y=X&&X.onVnodeBeforeMount)&&Xt(Y,be,p),dr(m,!0),z&&ye){const je=()=>{m.subTree=$c(m),ye(z,m.subTree,m,A,null)};we?p.type.__asyncLoader().then(()=>!m.isUnmounted&&je()):je()}else{const je=m.subTree=$c(m);y(null,je,g,w,m,A,S),p.el=je.el}if(ae&&wt(ae,A),!we&&(Y=X&&X.onVnodeMounted)){const je=p;wt(()=>Xt(Y,be,je),A)}(p.shapeFlag&256||be&&gi(be.vnode)&&be.vnode.shapeFlag&256)&&m.a&&wt(m.a,A),m.isMounted=!0,p=g=w=null}},O=m.effect=new Sl(D,()=>Fl(C),m.scope),C=m.update=()=>O.run();C.id=m.uid,dr(m,!0),C()},Ae=(m,p,g)=>{p.component=m;const w=m.vnode.props;m.vnode=p,m.next=null,YI(m,p.props,w,g),ZI(m,p.children,g),Ls(),kd(),Bs()},_e=(m,p,g,w,A,S,U,D,O=!1)=>{const C=m&&m.children,Y=m?m.shapeFlag:0,z=p.children,{patchFlag:X,shapeFlag:te}=p;if(X>0){if(X&128){bn(C,z,g,w,A,S,U,D,O);return}else if(X&256){ln(C,z,g,w,A,S,U,D,O);return}}te&8?(Y&16&&ct(C,A,S),z!==C&&l(g,z)):Y&16?te&16?bn(C,z,g,w,A,S,U,D,O):ct(C,A,S,!0):(Y&8&&l(g,""),te&16&&B(z,g,w,A,S,U,D,O))},ln=(m,p,g,w,A,S,U,D,O)=>{m=m||ds,p=p||ds;const C=m.length,Y=p.length,z=Math.min(C,Y);let X;for(X=0;X<z;X++){const te=p[X]=O?kn(p[X]):Jt(p[X]);y(m[X],te,g,null,A,S,U,D,O)}C>Y?ct(m,A,S,!0,!1,z):B(p,g,w,A,S,U,D,O,z)},bn=(m,p,g,w,A,S,U,D,O)=>{let C=0;const Y=p.length;let z=m.length-1,X=Y-1;for(;C<=z&&C<=X;){const te=m[C],ae=p[C]=O?kn(p[C]):Jt(p[C]);if(yr(te,ae))y(te,ae,g,null,A,S,U,D,O);else break;C++}for(;C<=z&&C<=X;){const te=m[z],ae=p[X]=O?kn(p[X]):Jt(p[X]);if(yr(te,ae))y(te,ae,g,null,A,S,U,D,O);else break;z--,X--}if(C>z){if(C<=X){const te=X+1,ae=te<Y?p[te].el:w;for(;C<=X;)y(null,p[C]=O?kn(p[C]):Jt(p[C]),g,ae,A,S,U,D,O),C++}}else if(C>X)for(;C<=z;)It(m[C],A,S,!0),C++;else{const te=C,ae=C,be=new Map;for(C=ae;C<=X;C++){const Ct=p[C]=O?kn(p[C]):Jt(p[C]);Ct.key!=null&&be.set(Ct.key,C)}let we,je=0;const $t=X-ae+1;let es=!1,Td=0;const Ys=new Array($t);for(C=0;C<$t;C++)Ys[C]=0;for(C=te;C<=z;C++){const Ct=m[C];if(je>=$t){It(Ct,A,S,!0);continue}let Yt;if(Ct.key!=null)Yt=be.get(Ct.key);else for(we=ae;we<=X;we++)if(Ys[we-ae]===0&&yr(Ct,p[we])){Yt=we;break}Yt===void 0?It(Ct,A,S,!0):(Ys[Yt-ae]=C+1,Yt>=Td?Td=Yt:es=!0,y(Ct,p[Yt],g,null,A,S,U,D,O),je++)}const Ad=es?nw(Ys):ds;for(we=Ad.length-1,C=$t-1;C>=0;C--){const Ct=ae+C,Yt=p[Ct],bd=Ct+1<Y?p[Ct+1].el:w;Ys[C]===0?y(null,Yt,g,bd,A,S,U,D,O):es&&(we<0||C!==Ad[we]?Qt(Yt,g,bd,2):we--)}}},Qt=(m,p,g,w,A=null)=>{const{el:S,type:U,transition:D,children:O,shapeFlag:C}=m;if(C&6){Qt(m.component.subTree,p,g,w);return}if(C&128){m.suspense.move(p,g,w);return}if(C&64){U.move(m,p,g,M);return}if(U===xt){r(S,p,g);for(let z=0;z<O.length;z++)Qt(O[z],p,g,w);r(m.anchor,p,g);return}if(U===Kc){N(m,p,g);return}if(w!==2&&C&1&&D)if(w===0)D.beforeEnter(S),r(S,p,g),wt(()=>D.enter(S),A);else{const{leave:z,delayLeave:X,afterLeave:te}=D,ae=()=>r(S,p,g),be=()=>{z(S,()=>{ae(),te&&te()})};X?X(S,ae,be):be()}else r(S,p,g)},It=(m,p,g,w=!1,A=!1)=>{const{type:S,props:U,ref:D,children:O,dynamicChildren:C,shapeFlag:Y,patchFlag:z,dirs:X}=m;if(D!=null&&bu(D,null,g,m,!0),Y&256){p.ctx.deactivate(m);return}const te=Y&1&&X,ae=!gi(m);let be;if(ae&&(be=U&&U.onVnodeBeforeUnmount)&&Xt(be,p,m),Y&6)Do(m.component,g,w);else{if(Y&128){m.suspense.unmount(g,w);return}te&&hr(m,null,p,"beforeUnmount"),Y&64?m.type.remove(m,p,g,A,M,w):C&&(S!==xt||z>0&&z&64)?ct(C,p,g,!1,!0):(S===xt&&z&384||!A&&Y&16)&&ct(O,p,g),w&&Jr(m)}(ae&&(be=U&&U.onVnodeUnmounted)||te)&&wt(()=>{be&&Xt(be,p,m),te&&hr(m,null,p,"unmounted")},g)},Jr=m=>{const{type:p,el:g,anchor:w,transition:A}=m;if(p===xt){Zr(g,w);return}if(p===Kc){x(m);return}const S=()=>{s(g),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(m.shapeFlag&1&&A&&!A.persisted){const{leave:U,delayLeave:D}=A,O=()=>U(g,S);D?D(m.el,S,O):O()}else S()},Zr=(m,p)=>{let g;for(;m!==p;)g=d(m),s(m),m=g;s(p)},Do=(m,p,g)=>{const{bum:w,scope:A,update:S,subTree:U,um:D}=m;w&&Zo(w),A.stop(),S&&(S.active=!1,It(U,m,p,g)),D&&wt(D,p),wt(()=>{m.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},ct=(m,p,g,w=!1,A=!1,S=0)=>{for(let U=S;U<m.length;U++)It(m[U],p,g,w,A)},T=m=>m.shapeFlag&6?T(m.component.subTree):m.shapeFlag&128?m.suspense.next():d(m.anchor||m.el),q=(m,p,g)=>{m==null?p._vnode&&It(p._vnode,null,null,!0):y(p._vnode||null,m,p,null,null,null,g),kd(),Mp(),p._vnode=m},M={p:y,um:It,m:Qt,r:Jr,mt:rt,mc:B,pc:_e,pbc:re,n:T,o:t};let H,ye;return e&&([H,ye]=e(M)),{render:q,hydrate:H,createApp:WI(q,H)}}function dr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function ig(t,e,n=!1){const r=t.children,s=e.children;if(Z(r)&&Z(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=kn(s[i]),a.el=o.el),n||ig(o,a)),a.type===Qa&&(a.el=o.el)}}function nw(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const rw=t=>t.__isTeleport,xt=Symbol.for("v-fgt"),Qa=Symbol.for("v-txt"),Ut=Symbol.for("v-cmt"),Kc=Symbol.for("v-stc"),yi=[];let jt=null;function Ya(t=!1){yi.push(jt=t?null:[])}function sw(){yi.pop(),jt=yi[yi.length-1]||null}let Fi=1;function Gd(t){Fi+=t}function og(t){return t.dynamicChildren=Fi>0?jt||ds:null,sw(),Fi>0&&jt&&jt.push(t),t}function iw(t,e,n,r,s,i){return og(mn(t,e,n,r,s,i,!0))}function ql(t,e,n,r,s){return og(ht(t,e,n,r,s,!0))}function ma(t){return t?t.__v_isVNode===!0:!1}function yr(t,e){return t.type===e.type&&t.key===e.key}const Xa="__vInternal",ag=({key:t})=>t??null,ta=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ze(t)||Ue(t)||ie(t)?{i:Xe,r:t,k:e,f:!!n}:t:null);function mn(t,e=null,n=null,r=0,s=null,i=t===xt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ag(e),ref:e&&ta(e),scopeId:Bp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Xe};return a?(jl(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=ze(n)?8:16),Fi>0&&!o&&jt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&jt.push(c),c}const ht=ow;function ow(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===LI)&&(t=Ut),ma(t)){const a=Wn(t,e,!0);return n&&jl(a,n),Fi>0&&!i&&jt&&(a.shapeFlag&6?jt[jt.indexOf(t)]=a:jt.push(a)),a.patchFlag|=-2,a}if(yw(t)&&(t=t.__vccOpts),e){e=aw(e);let{class:a,style:c}=e;a&&!ze(a)&&(e.class=Vi(a)),xe(c)&&(Cp(c)&&!Z(c)&&(c=qe({},c)),e.style=Rl(c))}const o=ze(t)?1:TI(t)?128:rw(t)?64:xe(t)?4:ie(t)?2:0;return mn(t,e,n,r,s,o,i,!0)}function aw(t){return t?Cp(t)||Xa in t?qe({},t):t:null}function Wn(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?uw(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&ag(a),ref:e&&e.ref?n&&s?Z(s)?s.concat(ta(e)):[s,ta(e)]:ta(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Wn(t.ssContent),ssFallback:t.ssFallback&&Wn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function cw(t=" ",e=0){return ht(Qa,null,t,e)}function SV(t="",e=!1){return e?(Ya(),ql(Ut,null,t)):ht(Ut,null,t)}function Jt(t){return t==null||typeof t=="boolean"?ht(Ut):Z(t)?ht(xt,null,t.slice()):typeof t=="object"?kn(t):ht(Qa,null,String(t))}function kn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Wn(t)}function jl(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Z(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),jl(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Xa in e)?e._ctx=Xe:s===3&&Xe&&(Xe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ie(e)?(e={default:e,_ctx:Xe},n=32):(e=String(e),r&64?(n=16,e=[cw(e)]):n=8);t.children=e,t.shapeFlag|=n}function uw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Vi([e.class,r.class]));else if(s==="style")e.style=Rl([e.style,r.style]);else if(Ba(s)){const i=e[s],o=r[s];o&&i!==o&&!(Z(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Xt(t,e,n,r=null){Lt(t,e,7,[n,r])}const lw=Zp();let hw=0;function dw(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||lw,i={uid:hw++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new mp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tg(r,s),emitsOptions:Lp(r,s),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:r.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=_I.bind(null,i),t.ce&&t.ce(i),i}let We=null;const cg=()=>We||Xe;let Kl,ts,Wd="__VUE_INSTANCE_SETTERS__";(ts=gu()[Wd])||(ts=gu()[Wd]=[]),ts.push(t=>We=t),Kl=t=>{ts.length>1?ts.forEach(e=>e(t)):ts[0](t)};const vs=t=>{Kl(t),t.scope.on()},xr=()=>{We&&We.scope.off(),Kl(null)};function ug(t){return t.vnode.shapeFlag&4}let Li=!1;function fw(t,e=!1){Li=e;const{props:n,children:r}=t.vnode,s=ug(t);QI(t,n,s,e),JI(t,r);const i=s?mw(t,e):void 0;return Li=!1,i}function mw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Ka(new Proxy(t.ctx,UI));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?gw(t):null;vs(t),Ls();const i=qn(r,t,0,[t.props,s]);if(Bs(),xr(),up(i)){if(i.then(xr,xr),e)return i.then(o=>{Hd(t,o,e)}).catch(o=>{za(o,t,0)});t.asyncDep=i}else Hd(t,i,e)}else lg(t,e)}function Hd(t,e,n){ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xe(e)&&(t.setupState=Np(e)),lg(t,n)}let Qd;function lg(t,e,n){const r=t.type;if(!t.render){if(!e&&Qd&&!r.render){const s=r.template||Ul(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,u=qe(qe({isCustomElement:i,delimiters:a},o),c);r.render=Qd(s,u)}}t.render=r.render||zt}vs(t),Ls(),$I(t),Bs(),xr()}function pw(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Pt(t,"get","$attrs"),e[n]}}))}function gw(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return pw(t)},slots:t.slots,emit:t.emit,expose:e}}function Ja(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Np(Ka(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in _i)return _i[n](t)},has(e,n){return n in e||n in _i}}))}function _w(t,e=!0){return ie(t)?t.displayName||t.name:t.name||e&&t.__name}function yw(t){return ie(t)&&"__vccOpts"in t}const Ot=(t,e)=>hI(t,e,Li);function zl(t,e,n){const r=arguments.length;return r===2?xe(e)&&!Z(e)?ma(e)?ht(t,null,[e]):ht(t,e):ht(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ma(n)&&(n=[n]),ht(t,e,n))}const Ew=Symbol.for("v-scx"),vw=()=>Bt(Ew),Iw="3.3.4",ww="http://www.w3.org/2000/svg",Er=typeof document<"u"?document:null,Yd=Er&&Er.createElement("template"),Tw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Er.createElementNS(ww,t):Er.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Er.createTextNode(t),createComment:t=>Er.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Er.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Yd.innerHTML=r?`<svg>${t}</svg>`:t;const a=Yd.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Aw(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function bw(t,e,n){const r=t.style,s=ze(n);if(n&&!s){if(e&&!ze(e))for(const i in e)n[i]==null&&Ru(r,i,"");for(const i in n)Ru(r,i,n[i])}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const Xd=/\s*!important$/;function Ru(t,e,n){if(Z(n))n.forEach(r=>Ru(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Rw(t,e);Xd.test(n)?t.setProperty(Fs(r),n.replace(Xd,""),"important"):t[r]=n}}const Jd=["Webkit","Moz","ms"],zc={};function Rw(t,e){const n=zc[e];if(n)return n;let r=an(e);if(r!=="filter"&&r in t)return zc[e]=r;r=qa(r);for(let s=0;s<Jd.length;s++){const i=Jd[s]+r;if(i in t)return zc[e]=i}return e}const Zd="http://www.w3.org/1999/xlink";function Pw(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Zd,e.slice(6,e.length)):t.setAttributeNS(Zd,e,n);else{const i=Sv(e);n==null||i&&!dp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Sw(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const u=a==="OPTION"?t.getAttribute("value"):t.value,l=n??"";u!==l&&(t.value=l),n==null&&t.removeAttribute(e);return}let c=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=dp(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function os(t,e,n,r){t.addEventListener(e,n,r)}function Cw(t,e,n,r){t.removeEventListener(e,n,r)}function Vw(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=xw(e);if(r){const u=i[e]=kw(r,s);os(t,a,u,c)}else o&&(Cw(t,a,o,c),i[e]=void 0)}}const ef=/(?:Once|Passive|Capture)$/;function xw(t){let e;if(ef.test(t)){e={};let r;for(;r=t.match(ef);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Fs(t.slice(2)),e]}let Gc=0;const Dw=Promise.resolve(),Nw=()=>Gc||(Dw.then(()=>Gc=0),Gc=Date.now());function kw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Lt(Ow(r,n.value),e,5,[r])};return n.value=t,n.attached=Nw(),n}function Ow(t,e){if(Z(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const tf=/^on[a-z]/,Mw=(t,e,n,r,s=!1,i,o,a,c)=>{e==="class"?Aw(t,r,s):e==="style"?bw(t,n,r):Ba(e)?wl(e)||Vw(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Fw(t,e,r,s))?Sw(t,e,r,i,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Pw(t,e,r,s))};function Fw(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&tf.test(e)&&ie(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||tf.test(e)&&ze(n)?!1:e in t}const Pn="transition",Xs="animation",hg=(t,{slots:e})=>zl(PI,fg(t),e);hg.displayName="Transition";const dg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Lw=hg.props=qe({},qp,dg),fr=(t,e=[])=>{Z(t)?t.forEach(n=>n(...e)):t&&t(...e)},nf=t=>t?Z(t)?t.some(e=>e.length>1):t.length>1:!1;function fg(t){const e={};for(const K in t)K in dg||(e[K]=t[K]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:l=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,_=Bw(s),y=_&&_[0],I=_&&_[1],{onBeforeEnter:R,onEnter:V,onEnterCancelled:N,onLeave:x,onLeaveCancelled:j,onBeforeAppear:J=R,onAppear:oe=V,onAppearCancelled:B=N}=e,Q=(K,ge,rt)=>{Dn(K,ge?l:a),Dn(K,ge?u:o),rt&&rt()},re=(K,ge)=>{K._isLeaving=!1,Dn(K,h),Dn(K,f),Dn(K,d),ge&&ge()},Te=K=>(ge,rt)=>{const mt=K?oe:V,le=()=>Q(ge,K,rt);fr(mt,[ge,le]),rf(()=>{Dn(ge,K?c:i),dn(ge,K?l:a),nf(mt)||sf(ge,r,y,le)})};return qe(e,{onBeforeEnter(K){fr(R,[K]),dn(K,i),dn(K,o)},onBeforeAppear(K){fr(J,[K]),dn(K,c),dn(K,u)},onEnter:Te(!1),onAppear:Te(!0),onLeave(K,ge){K._isLeaving=!0;const rt=()=>re(K,ge);dn(K,h),pg(),dn(K,d),rf(()=>{K._isLeaving&&(Dn(K,h),dn(K,f),nf(x)||sf(K,r,I,rt))}),fr(x,[K,rt])},onEnterCancelled(K){Q(K,!1),fr(N,[K])},onAppearCancelled(K){Q(K,!0),fr(B,[K])},onLeaveCancelled(K){re(K),fr(j,[K])}})}function Bw(t){if(t==null)return null;if(xe(t))return[Wc(t.enter),Wc(t.leave)];{const e=Wc(t);return[e,e]}}function Wc(t){return wv(t)}function dn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function Dn(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function rf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Uw=0;function sf(t,e,n,r){const s=t._endId=++Uw,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=mg(t,e);if(!o)return r();const u=o+"end";let l=0;const h=()=>{t.removeEventListener(u,d),i()},d=f=>{f.target===t&&++l>=c&&h()};setTimeout(()=>{l<c&&h()},a+1),t.addEventListener(u,d)}function mg(t,e){const n=window.getComputedStyle(t),r=_=>(n[_]||"").split(", "),s=r(`${Pn}Delay`),i=r(`${Pn}Duration`),o=of(s,i),a=r(`${Xs}Delay`),c=r(`${Xs}Duration`),u=of(a,c);let l=null,h=0,d=0;e===Pn?o>0&&(l=Pn,h=o,d=i.length):e===Xs?u>0&&(l=Xs,h=u,d=c.length):(h=Math.max(o,u),l=h>0?o>u?Pn:Xs:null,d=l?l===Pn?i.length:c.length:0);const f=l===Pn&&/\b(transform|all)(,|$)/.test(r(`${Pn}Property`).toString());return{type:l,timeout:h,propCount:d,hasTransform:f}}function of(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>af(n)+af(t[r])))}function af(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function pg(){return document.body.offsetHeight}const gg=new WeakMap,_g=new WeakMap,yg={name:"TransitionGroup",props:qe({},Lw,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=cg(),r=$p();let s,i;return Wp(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!zw(s[0].el,n.vnode.el,o))return;s.forEach(qw),s.forEach(jw);const a=s.filter(Kw);pg(),a.forEach(c=>{const u=c.el,l=u.style;dn(u,o),l.transform=l.webkitTransform=l.transitionDuration="";const h=u._moveCb=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",h),u._moveCb=null,Dn(u,o))};u.addEventListener("transitionend",h)})}),()=>{const o=ue(t),a=fg(o);let c=o.tag||xt;s=i,i=e.default?Bl(e.default()):[];for(let u=0;u<i.length;u++){const l=i[u];l.key!=null&&Oi(l,ki(l,a,r,n))}if(s)for(let u=0;u<s.length;u++){const l=s[u];Oi(l,ki(l,a,r,n)),gg.set(l,l.el.getBoundingClientRect())}return ht(c,null,i)}}},$w=t=>delete t.mode;yg.props;const CV=yg;function qw(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function jw(t){_g.set(t,t.el.getBoundingClientRect())}function Kw(t){const e=gg.get(t),n=_g.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function zw(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:i}=mg(r);return s.removeChild(r),i}const cf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Z(e)?n=>Zo(e,n):e};function Gw(t){t.target.composing=!0}function uf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const VV={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t._assign=cf(s);const i=r||s.props&&s.props.type==="number";os(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=pu(a)),t._assign(a)}),n&&os(t,"change",()=>{t.value=t.value.trim()}),e||(os(t,"compositionstart",Gw),os(t,"compositionend",uf),os(t,"change",uf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t._assign=cf(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(s||t.type==="number")&&pu(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},Ww=["ctrl","shift","alt","meta"],Hw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Ww.some(n=>t[`${n}Key`]&&!e.includes(n))},xV=(t,e)=>(n,...r)=>{for(let s=0;s<e.length;s++){const i=Hw[e[s]];if(i&&i(n,e))return}return t(n,...r)},DV={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Js(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Js(t,!0),r.enter(t)):r.leave(t,()=>{Js(t,!1)}):Js(t,e))},beforeUnmount(t,{value:e}){Js(t,e)}};function Js(t,e){t.style.display=e?t._vod:"none"}const Qw=qe({patchProp:Mw},Tw);let lf;function Yw(){return lf||(lf=ew(Qw))}const Xw=(...t)=>{const e=Yw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Jw(r);if(!s)return;const i=e._component;!ie(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Jw(t){return ze(t)?document.querySelector(t):t}var Zw=!1;/*!
  * pinia v2.1.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let Eg;const Za=t=>Eg=t,vg=Symbol();function Pu(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ei;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ei||(Ei={}));function eT(){const t=pp(!0),e=t.run(()=>kl({}));let n=[],r=[];const s=Ka({install(i){Za(s),s._a=i,i.provide(vg,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!Zw?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const Ig=()=>{};function hf(t,e,n,r=Ig){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&gp()&&Vv(s),s}function ns(t,...e){t.slice().forEach(n=>{n(...e)})}const tT=t=>t();function Su(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Pu(s)&&Pu(r)&&t.hasOwnProperty(n)&&!Ue(r)&&!Un(r)?t[n]=Su(s,r):t[n]=r}return t}const nT=Symbol();function rT(t){return!Pu(t)||!t.hasOwnProperty(nT)}const{assign:Nn}=Object;function sT(t){return!!(Ue(t)&&t.effect)}function iT(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let c;function u(){a||(n.state.value[t]=s?s():{});const l=aI(n.state.value[t]);return Nn(l,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=Ka(Ot(()=>{Za(n);const f=n._s.get(t);return o[d].call(f,f)})),h),{}))}return c=wg(t,u,e,n,r,!0),c}function wg(t,e,n={},r,s,i){let o;const a=Nn({actions:{}},n),c={deep:!0};let u,l,h=[],d=[],f;const _=r.state.value[t];!i&&!_&&(r.state.value[t]={}),kl({});let y;function I(B){let Q;u=l=!1,typeof B=="function"?(B(r.state.value[t]),Q={type:Ei.patchFunction,storeId:t,events:f}):(Su(r.state.value[t],B),Q={type:Ei.patchObject,payload:B,storeId:t,events:f});const re=y=Symbol();Ml().then(()=>{y===re&&(u=!0)}),l=!0,ns(h,Q,r.state.value[t])}const R=i?function(){const{state:Q}=n,re=Q?Q():{};this.$patch(Te=>{Nn(Te,re)})}:Ig;function V(){o.stop(),h=[],d=[],r._s.delete(t)}function N(B,Q){return function(){Za(r);const re=Array.from(arguments),Te=[],K=[];function ge(le){Te.push(le)}function rt(le){K.push(le)}ns(d,{args:re,name:B,store:j,after:ge,onError:rt});let mt;try{mt=Q.apply(this&&this.$id===t?this:j,re)}catch(le){throw ns(K,le),le}return mt instanceof Promise?mt.then(le=>(ns(Te,le),le)).catch(le=>(ns(K,le),Promise.reject(le))):(ns(Te,mt),mt)}}const x={_p:r,$id:t,$onAction:hf.bind(null,d),$patch:I,$reset:R,$subscribe(B,Q={}){const re=hf(h,B,Q.detached,()=>Te()),Te=o.run(()=>pi(()=>r.state.value[t],K=>{(Q.flush==="sync"?l:u)&&B({storeId:t,type:Ei.direct,events:f},K)},Nn({},c,Q)));return re},$dispose:V},j=co(x);r._s.set(t,j);const J=r._a&&r._a.runWithContext||tT,oe=r._e.run(()=>(o=pp(),J(()=>o.run(e))));for(const B in oe){const Q=oe[B];if(Ue(Q)&&!sT(Q)||Un(Q))i||(_&&rT(Q)&&(Ue(Q)?Q.value=_[B]:Su(Q,_[B])),r.state.value[t][B]=Q);else if(typeof Q=="function"){const re=N(B,Q);oe[B]=re,a.actions[B]=Q}}return Nn(j,oe),Nn(ue(j),oe),Object.defineProperty(j,"$state",{get:()=>r.state.value[t],set:B=>{I(Q=>{Nn(Q,B)})}}),r._p.forEach(B=>{Nn(j,o.run(()=>B({store:j,app:r._a,pinia:r,options:a})))}),_&&i&&n.hydrate&&n.hydrate(j.$state,_),u=!0,l=!0,j}function NV(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,c){const u=HI();return a=a||(u?Bt(vg,null):null),a&&Za(a),a=Eg,a._s.has(r)||(i?wg(r,e,s,a):iT(r,s,a)),a._s.get(r)}return o.$id=r,o}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const as=typeof window<"u";function oT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Ee=Object.assign;function Hc(t,e){const n={};for(const r in e){const s=e[r];n[r]=Gt(s)?s.map(t):t(s)}return n}const vi=()=>{},Gt=Array.isArray,aT=/\/$/,cT=t=>t.replace(aT,"");function Qc(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=dT(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function uT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function df(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function lT(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Is(e.matched[r],n.matched[s])&&Tg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Is(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Tg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!hT(t[n],e[n]))return!1;return!0}function hT(t,e){return Gt(t)?ff(t,e):Gt(e)?ff(e,t):t===e}function ff(t,e){return Gt(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function dT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Bi;(function(t){t.pop="pop",t.push="push"})(Bi||(Bi={}));var Ii;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ii||(Ii={}));function fT(t){if(!t)if(as){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),cT(t)}const mT=/^[^#]+#/;function pT(t,e){return t.replace(mT,"#")+e}function gT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ec=()=>({left:window.pageXOffset,top:window.pageYOffset});function _T(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=gT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function mf(t,e){return(history.state?history.state.position-e:-1)+t}const Cu=new Map;function yT(t,e){Cu.set(t,e)}function ET(t){const e=Cu.get(t);return Cu.delete(t),e}let vT=()=>location.protocol+"//"+location.host;function Ag(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),df(c,"")}return df(n,t)+r+s}function IT(t,e,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const f=Ag(t,location),_=n.value,y=e.value;let I=0;if(d){if(n.value=f,e.value=d,o&&o===_){o=null;return}I=y?d.position-y.position:0}else r(f);s.forEach(R=>{R(n.value,_,{delta:I,type:Bi.pop,direction:I?I>0?Ii.forward:Ii.back:Ii.unknown})})};function c(){o=n.value}function u(d){s.push(d);const f=()=>{const _=s.indexOf(d);_>-1&&s.splice(_,1)};return i.push(f),f}function l(){const{history:d}=window;d.state&&d.replaceState(Ee({},d.state,{scroll:ec()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function pf(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?ec():null}}function wT(t){const{history:e,location:n}=window,r={value:Ag(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,l){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:vT()+t+c;try{e[l?"replaceState":"pushState"](u,"",d),s.value=u}catch(f){console.error(f),n[l?"replace":"assign"](d)}}function o(c,u){const l=Ee({},e.state,pf(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,l,!0),r.value=c}function a(c,u){const l=Ee({},s.value,e.state,{forward:c,scroll:ec()});i(l.current,l,!0);const h=Ee({},pf(r.value,c,null),{position:l.position+1},u);i(c,h,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function TT(t){t=fT(t);const e=wT(t),n=IT(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ee({location:"",base:t,go:r,createHref:pT.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function AT(t){return typeof t=="string"||t&&typeof t=="object"}function bg(t){return typeof t=="string"||typeof t=="symbol"}const Sn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Rg=Symbol("");var gf;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(gf||(gf={}));function ws(t,e){return Ee(new Error,{type:t,[Rg]:!0},e)}function hn(t,e){return t instanceof Error&&Rg in t&&(e==null||!!(t.type&e))}const _f="[^/]+?",bT={sensitive:!1,strict:!1,start:!0,end:!0},RT=/[.+*?^${}()[\]/\\]/g;function PT(t,e){const n=Ee({},bT,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const l=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const d=u[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(RT,"\\$&"),f+=40;else if(d.type===1){const{value:_,repeatable:y,optional:I,regexp:R}=d;i.push({name:_,repeatable:y,optional:I});const V=R||_f;if(V!==_f){f+=10;try{new RegExp(`(${V})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${_}" (${V}): `+x.message)}}let N=y?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;h||(N=I&&u.length<2?`(?:/${N})`:"/"+N),I&&(N+="?"),s+=N,f+=20,I&&(f+=-8),y&&(f+=-20),V===".*"&&(f+=-50)}l.push(f)}r.push(l)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const l=u.match(o),h={};if(!l)return null;for(let d=1;d<l.length;d++){const f=l[d]||"",_=i[d-1];h[_.name]=f&&_.repeatable?f.split("/"):f}return h}function c(u){let l="",h=!1;for(const d of t){(!h||!l.endsWith("/"))&&(l+="/"),h=!1;for(const f of d)if(f.type===0)l+=f.value;else if(f.type===1){const{value:_,repeatable:y,optional:I}=f,R=_ in u?u[_]:"";if(Gt(R)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const V=Gt(R)?R.join("/"):R;if(!V)if(I)d.length<2&&(l.endsWith("/")?l=l.slice(0,-1):h=!0);else throw new Error(`Missing required param "${_}"`);l+=V}}return l||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function ST(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function CT(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=ST(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(yf(r))return 1;if(yf(s))return-1}return s.length-r.length}function yf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const VT={type:0,value:""},xT=/[a-zA-Z0-9_]/;function DT(t){if(!t)return[[]];if(t==="/")return[[VT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",l="";function h(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:l,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:xT.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+c:n=3:l+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,l="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),s}function NT(t,e,n){const r=PT(DT(t.path),n),s=Ee(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function kT(t,e){const n=[],r=new Map;e=If({strict:!1,end:!0,sensitive:!1},e);function s(l){return r.get(l)}function i(l,h,d){const f=!d,_=OT(l);_.aliasOf=d&&d.record;const y=If(e,l),I=[_];if("alias"in l){const N=typeof l.alias=="string"?[l.alias]:l.alias;for(const x of N)I.push(Ee({},_,{components:d?d.record.components:_.components,path:x,aliasOf:d?d.record:_}))}let R,V;for(const N of I){const{path:x}=N;if(h&&x[0]!=="/"){const j=h.record.path,J=j[j.length-1]==="/"?"":"/";N.path=h.record.path+(x&&J+x)}if(R=NT(N,h,y),d?d.alias.push(R):(V=V||R,V!==R&&V.alias.push(R),f&&l.name&&!vf(R)&&o(l.name)),_.children){const j=_.children;for(let J=0;J<j.length;J++)i(j[J],R,d&&d.children[J])}d=d||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&c(R)}return V?()=>{o(V)}:vi}function o(l){if(bg(l)){const h=r.get(l);h&&(r.delete(l),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(l);h>-1&&(n.splice(h,1),l.record.name&&r.delete(l.record.name),l.children.forEach(o),l.alias.forEach(o))}}function a(){return n}function c(l){let h=0;for(;h<n.length&&CT(l,n[h])>=0&&(l.record.path!==n[h].record.path||!Pg(l,n[h]));)h++;n.splice(h,0,l),l.record.name&&!vf(l)&&r.set(l.record.name,l)}function u(l,h){let d,f={},_,y;if("name"in l&&l.name){if(d=r.get(l.name),!d)throw ws(1,{location:l});y=d.record.name,f=Ee(Ef(h.params,d.keys.filter(V=>!V.optional).map(V=>V.name)),l.params&&Ef(l.params,d.keys.map(V=>V.name))),_=d.stringify(f)}else if("path"in l)_=l.path,d=n.find(V=>V.re.test(_)),d&&(f=d.parse(_),y=d.record.name);else{if(d=h.name?r.get(h.name):n.find(V=>V.re.test(h.path)),!d)throw ws(1,{location:l,currentLocation:h});y=d.record.name,f=Ee({},h.params,l.params),_=d.stringify(f)}const I=[];let R=d;for(;R;)I.unshift(R.record),R=R.parent;return{name:y,path:_,params:f,matched:I,meta:FT(I)}}return t.forEach(l=>i(l)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Ef(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function OT(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:MT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function MT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function vf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function FT(t){return t.reduce((e,n)=>Ee(e,n.meta),{})}function If(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Pg(t,e){return e.children.some(n=>n===t||Pg(t,n))}const Sg=/#/g,LT=/&/g,BT=/\//g,UT=/=/g,$T=/\?/g,Cg=/\+/g,qT=/%5B/g,jT=/%5D/g,Vg=/%5E/g,KT=/%60/g,xg=/%7B/g,zT=/%7C/g,Dg=/%7D/g,GT=/%20/g;function Gl(t){return encodeURI(""+t).replace(zT,"|").replace(qT,"[").replace(jT,"]")}function WT(t){return Gl(t).replace(xg,"{").replace(Dg,"}").replace(Vg,"^")}function Vu(t){return Gl(t).replace(Cg,"%2B").replace(GT,"+").replace(Sg,"%23").replace(LT,"%26").replace(KT,"`").replace(xg,"{").replace(Dg,"}").replace(Vg,"^")}function HT(t){return Vu(t).replace(UT,"%3D")}function QT(t){return Gl(t).replace(Sg,"%23").replace($T,"%3F")}function YT(t){return t==null?"":QT(t).replace(BT,"%2F")}function pa(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function XT(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Cg," "),o=i.indexOf("="),a=pa(o<0?i:i.slice(0,o)),c=o<0?null:pa(i.slice(o+1));if(a in e){let u=e[a];Gt(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function wf(t){let e="";for(let n in t){const r=t[n];if(n=HT(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Gt(r)?r.map(i=>i&&Vu(i)):[r&&Vu(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function JT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Gt(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const ZT=Symbol(""),Tf=Symbol(""),tc=Symbol(""),Wl=Symbol(""),xu=Symbol("");function Zs(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function On(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(ws(4,{from:n,to:e})):h instanceof Error?a(h):AT(h)?a(ws(2,{from:e,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},u=t.call(r&&r.instances[s],e,n,c);let l=Promise.resolve(u);t.length<3&&(l=l.then(c)),l.catch(h=>a(h))})}function Yc(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(eA(a)){const u=(a.__vccOpts||a)[e];u&&s.push(On(u,n,r,i,o))}else{let c=a();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const l=oT(u)?u.default:u;i.components[o]=l;const d=(l.__vccOpts||l)[e];return d&&On(d,n,r,i,o)()}))}}return s}function eA(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Af(t){const e=Bt(tc),n=Bt(Wl),r=Ot(()=>e.resolve($n(t.to))),s=Ot(()=>{const{matched:c}=r.value,{length:u}=c,l=c[u-1],h=n.matched;if(!l||!h.length)return-1;const d=h.findIndex(Is.bind(null,l));if(d>-1)return d;const f=bf(c[u-2]);return u>1&&bf(l)===f&&h[h.length-1].path!==f?h.findIndex(Is.bind(null,c[u-2])):d}),i=Ot(()=>s.value>-1&&sA(n.params,r.value.params)),o=Ot(()=>s.value>-1&&s.value===n.matched.length-1&&Tg(n.params,r.value.params));function a(c={}){return rA(c)?e[$n(t.replace)?"replace":"push"]($n(t.to)).catch(vi):Promise.resolve()}return{route:r,href:Ot(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const tA=Kp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Af,setup(t,{slots:e}){const n=co(Af(t)),{options:r}=Bt(tc),s=Ot(()=>({[Rf(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Rf(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:zl("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),nA=tA;function rA(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function sA(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Gt(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function bf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Rf=(t,e,n)=>t??e??n,iA=Kp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Bt(xu),s=Ot(()=>t.route||r.value),i=Bt(Tf,0),o=Ot(()=>{let u=$n(i);const{matched:l}=s.value;let h;for(;(h=l[u])&&!h.components;)u++;return u}),a=Ot(()=>s.value.matched[o.value]);ea(Tf,Ot(()=>o.value+1)),ea(ZT,a),ea(xu,s);const c=kl();return pi(()=>[c.value,a.value,t.name],([u,l,h],[d,f,_])=>{l&&(l.instances[h]=u,f&&f!==l&&u&&u===d&&(l.leaveGuards.size||(l.leaveGuards=f.leaveGuards),l.updateGuards.size||(l.updateGuards=f.updateGuards))),u&&l&&(!f||!Is(l,f)||!d)&&(l.enterCallbacks[h]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=s.value,l=t.name,h=a.value,d=h&&h.components[l];if(!d)return Pf(n.default,{Component:d,route:u});const f=h.props[l],_=f?f===!0?u.params:typeof f=="function"?f(u):f:null,I=zl(d,Ee({},_,e,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(h.instances[l]=null)},ref:c}));return Pf(n.default,{Component:I,route:u})||I}}});function Pf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const oA=iA;function aA(t){const e=kT(t.routes,t),n=t.parseQuery||XT,r=t.stringifyQuery||wf,s=t.history,i=Zs(),o=Zs(),a=Zs(),c=sI(Sn);let u=Sn;as&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Hc.bind(null,T=>""+T),h=Hc.bind(null,YT),d=Hc.bind(null,pa);function f(T,q){let M,H;return bg(T)?(M=e.getRecordMatcher(T),H=q):H=T,e.addRoute(H,M)}function _(T){const q=e.getRecordMatcher(T);q&&e.removeRoute(q)}function y(){return e.getRoutes().map(T=>T.record)}function I(T){return!!e.getRecordMatcher(T)}function R(T,q){if(q=Ee({},q||c.value),typeof T=="string"){const g=Qc(n,T,q.path),w=e.resolve({path:g.path},q),A=s.createHref(g.fullPath);return Ee(g,w,{params:d(w.params),hash:pa(g.hash),redirectedFrom:void 0,href:A})}let M;if("path"in T)M=Ee({},T,{path:Qc(n,T.path,q.path).path});else{const g=Ee({},T.params);for(const w in g)g[w]==null&&delete g[w];M=Ee({},T,{params:h(g)}),q.params=h(q.params)}const H=e.resolve(M,q),ye=T.hash||"";H.params=l(d(H.params));const m=uT(r,Ee({},T,{hash:WT(ye),path:H.path})),p=s.createHref(m);return Ee({fullPath:m,hash:ye,query:r===wf?JT(T.query):T.query||{}},H,{redirectedFrom:void 0,href:p})}function V(T){return typeof T=="string"?Qc(n,T,c.value.path):Ee({},T)}function N(T,q){if(u!==T)return ws(8,{from:q,to:T})}function x(T){return oe(T)}function j(T){return x(Ee(V(T),{replace:!0}))}function J(T){const q=T.matched[T.matched.length-1];if(q&&q.redirect){const{redirect:M}=q;let H=typeof M=="function"?M(T):M;return typeof H=="string"&&(H=H.includes("?")||H.includes("#")?H=V(H):{path:H},H.params={}),Ee({query:T.query,hash:T.hash,params:"path"in H?{}:T.params},H)}}function oe(T,q){const M=u=R(T),H=c.value,ye=T.state,m=T.force,p=T.replace===!0,g=J(M);if(g)return oe(Ee(V(g),{state:typeof g=="object"?Ee({},ye,g.state):ye,force:m,replace:p}),q||M);const w=M;w.redirectedFrom=q;let A;return!m&&lT(r,H,M)&&(A=ws(16,{to:w,from:H}),Qt(H,H,!0,!1)),(A?Promise.resolve(A):re(w,H)).catch(S=>hn(S)?hn(S,2)?S:bn(S):_e(S,w,H)).then(S=>{if(S){if(hn(S,2))return oe(Ee({replace:p},V(S.to),{state:typeof S.to=="object"?Ee({},ye,S.to.state):ye,force:m}),q||w)}else S=K(w,H,!0,p,ye);return Te(w,H,S),S})}function B(T,q){const M=N(T,q);return M?Promise.reject(M):Promise.resolve()}function Q(T){const q=Zr.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(T):T()}function re(T,q){let M;const[H,ye,m]=cA(T,q);M=Yc(H.reverse(),"beforeRouteLeave",T,q);for(const g of H)g.leaveGuards.forEach(w=>{M.push(On(w,T,q))});const p=B.bind(null,T,q);return M.push(p),ct(M).then(()=>{M=[];for(const g of i.list())M.push(On(g,T,q));return M.push(p),ct(M)}).then(()=>{M=Yc(ye,"beforeRouteUpdate",T,q);for(const g of ye)g.updateGuards.forEach(w=>{M.push(On(w,T,q))});return M.push(p),ct(M)}).then(()=>{M=[];for(const g of m)if(g.beforeEnter)if(Gt(g.beforeEnter))for(const w of g.beforeEnter)M.push(On(w,T,q));else M.push(On(g.beforeEnter,T,q));return M.push(p),ct(M)}).then(()=>(T.matched.forEach(g=>g.enterCallbacks={}),M=Yc(m,"beforeRouteEnter",T,q),M.push(p),ct(M))).then(()=>{M=[];for(const g of o.list())M.push(On(g,T,q));return M.push(p),ct(M)}).catch(g=>hn(g,8)?g:Promise.reject(g))}function Te(T,q,M){a.list().forEach(H=>Q(()=>H(T,q,M)))}function K(T,q,M,H,ye){const m=N(T,q);if(m)return m;const p=q===Sn,g=as?history.state:{};M&&(H||p?s.replace(T.fullPath,Ee({scroll:p&&g&&g.scroll},ye)):s.push(T.fullPath,ye)),c.value=T,Qt(T,q,M,p),bn()}let ge;function rt(){ge||(ge=s.listen((T,q,M)=>{if(!Do.listening)return;const H=R(T),ye=J(H);if(ye){oe(Ee(ye,{replace:!0}),H).catch(vi);return}u=H;const m=c.value;as&&yT(mf(m.fullPath,M.delta),ec()),re(H,m).catch(p=>hn(p,12)?p:hn(p,2)?(oe(p.to,H).then(g=>{hn(g,20)&&!M.delta&&M.type===Bi.pop&&s.go(-1,!1)}).catch(vi),Promise.reject()):(M.delta&&s.go(-M.delta,!1),_e(p,H,m))).then(p=>{p=p||K(H,m,!1),p&&(M.delta&&!hn(p,8)?s.go(-M.delta,!1):M.type===Bi.pop&&hn(p,20)&&s.go(-1,!1)),Te(H,m,p)}).catch(vi)}))}let mt=Zs(),le=Zs(),Ae;function _e(T,q,M){bn(T);const H=le.list();return H.length?H.forEach(ye=>ye(T,q,M)):console.error(T),Promise.reject(T)}function ln(){return Ae&&c.value!==Sn?Promise.resolve():new Promise((T,q)=>{mt.add([T,q])})}function bn(T){return Ae||(Ae=!T,rt(),mt.list().forEach(([q,M])=>T?M(T):q()),mt.reset()),T}function Qt(T,q,M,H){const{scrollBehavior:ye}=t;if(!as||!ye)return Promise.resolve();const m=!M&&ET(mf(T.fullPath,0))||(H||!M)&&history.state&&history.state.scroll||null;return Ml().then(()=>ye(T,q,m)).then(p=>p&&_T(p)).catch(p=>_e(p,T,q))}const It=T=>s.go(T);let Jr;const Zr=new Set,Do={currentRoute:c,listening:!0,addRoute:f,removeRoute:_,hasRoute:I,getRoutes:y,resolve:R,options:t,push:x,replace:j,go:It,back:()=>It(-1),forward:()=>It(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:le.add,isReady:ln,install(T){const q=this;T.component("RouterLink",nA),T.component("RouterView",oA),T.config.globalProperties.$router=q,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>$n(c)}),as&&!Jr&&c.value===Sn&&(Jr=!0,x(s.location).catch(ye=>{}));const M={};for(const ye in Sn)Object.defineProperty(M,ye,{get:()=>c.value[ye],enumerable:!0});T.provide(tc,q),T.provide(Wl,Pp(M)),T.provide(xu,c);const H=T.unmount;Zr.add(T),T.unmount=function(){Zr.delete(T),Zr.size<1&&(u=Sn,ge&&ge(),ge=null,c.value=Sn,Jr=!1,Ae=!1),H()}}};function ct(T){return T.reduce((q,M)=>q.then(()=>Q(M)),Promise.resolve())}return Do}function cA(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Is(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>Is(u,c))||s.push(c))}return[n,r,s]}function kV(){return Bt(tc)}function uA(){return Bt(Wl)}const lA={class:"flex"},hA={class:"text-white w-48 h-screen"},dA={class:"p-5"},fA={class:"p-8 w-full overflow-scroll h-screen max-h-screen main-content bg-gray-200"},mA={__name:"sidebar",setup(t){const e=uA();let n=r=>e.path===r;return(r,s)=>{const i=FI("router-view");return Ya(),iw("div",lA,[mn("aside",hA,[mn("nav",dA,[mn("div",null,[mn("a",{class:Vi({"active-link":$n(n)("/")}),href:"/"}," Home ",2)]),mn("div",null,[mn("a",{class:Vi({"active-link":$n(n)("/list-employee")}),href:"/list-employee"}," List ",2)])])]),mn("div",fA,[ht(i)])])}}};const pA=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},gA={__name:"App",setup(t){return(e,n)=>(Ya(),ql(mA))}},_A=pA(gA,[["__scopeId","data-v-28761126"]]),yA="modulepreload",EA=function(t){return"/"+t},Sf={},Bo=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=EA(i),i in Sf)return;Sf[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let l=s.length-1;l>=0;l--){const h=s[l];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":yA,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((l,h)=>{u.addEventListener("load",l),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},vA=aA({history:TT("/"),routes:[{path:"/",name:"home",component:()=>Bo(()=>import("./home-30b19495.js"),["assets/home-30b19495.js","assets/form-input-329611a2.js","assets/button-f840e959.js","assets/employee-eabfc88c.js"])},{path:"/list-employee",name:"list-employee",component:()=>Bo(()=>import("./index-7da4d5f6.js"),["assets/index-7da4d5f6.js","assets/table-ce0a312e.js","assets/button-f840e959.js","assets/employee-eabfc88c.js"])},{path:"/edit-employee/:id",name:"edit-list-employee",component:()=>Bo(()=>import("./index-779e26c0.js"),["assets/index-779e26c0.js","assets/form-input-329611a2.js","assets/button-f840e959.js","assets/table-ce0a312e.js","assets/employer-e335ad34.js","assets/employer-57c5a6a9.css","assets/employee-eabfc88c.js"])},{path:"/edit-employer/:id",name:"edit-employer",component:()=>Bo(()=>import("./index-08b3955a.js"),["assets/index-08b3955a.js","assets/form-input-329611a2.js","assets/button-f840e959.js","assets/employer-e335ad34.js","assets/employer-57c5a6a9.css"])}]});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},IA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,l=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ng(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new wA;const d=i<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const _=u<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TA=function(t){const e=Ng(t);return kg.encodeByteArray(e,!0)},ga=function(t){return TA(t).replace(/\./g,"")},AA=function(t){try{return kg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _a(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!bA(n)||(t[n]=_a(t[n],e[n]));return t}function bA(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=()=>RA().__FIREBASE_DEFAULTS__,SA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AA(t[1]);return e&&JSON.parse(e)},Og=()=>{try{return PA()||SA()||CA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Mg=()=>{var t;return(t=Og())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ga(JSON.stringify(n)),ga(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DA(){var t;const e=(t=Og())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NA(){return typeof self=="object"&&self.self===self}function kA(){return!DA()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fg(){try{return typeof indexedDB=="object"}catch{return!1}}function OA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="FirebaseError";class zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MA,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nc.prototype.create)}}class nc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?FA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new zr(s,a,r)}}function FA(t,e){return t.replace(LA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const LA=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Vf(i)&&Vf(o)){if(!Nu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Vf(t){return t!==null&&typeof t=="object"}function BA(t,e){const n=new UA(t,e);return n.subscribe.bind(n)}class UA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$A(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Xc),s.error===void 0&&(s.error=Xc),s.complete===void 0&&(s.complete=Xc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $A(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KA(e))try{this.getOrInitializeService({instanceIdentifier:pr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pr){return this.instances.has(e)}getOptions(e=pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pr){return this.component?this.component.multipleInstances?e:pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jA(t){return t===pr?void 0:t}function KA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=[];var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const Lg={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},GA=pe.INFO,WA={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},HA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=WA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ql{constructor(e){this.name=e,this._logLevel=GA,this._logHandler=HA,this._userLogHandler=null,Hl.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Lg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}function QA(t){Hl.forEach(e=>{e.setLogLevel(t)})}function YA(t,e){for(const n of Hl){let r=null;e&&e.level&&(r=Lg[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:pe[i].toLowerCase(),message:a,args:o,type:s.name})}}}const XA=(t,e)=>e.some(n=>t instanceof n);let xf,Df;function JA(){return xf||(xf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZA(){return Df||(Df=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bg=new WeakMap,ku=new WeakMap,Ug=new WeakMap,Jc=new WeakMap,Yl=new WeakMap;function e0(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(jn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bg.set(n,t)}).catch(()=>{}),Yl.set(e,t),e}function t0(t){if(ku.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ku.set(t,e)}let Ou={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ku.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ug.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function n0(t){Ou=t(Ou)}function r0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zc(this),e,...n);return Ug.set(r,e.sort?e.sort():[e]),jn(r)}:ZA().includes(t)?function(...e){return t.apply(Zc(this),e),jn(Bg.get(this))}:function(...e){return jn(t.apply(Zc(this),e))}}function s0(t){return typeof t=="function"?r0(t):(t instanceof IDBTransaction&&t0(t),XA(t,JA())?new Proxy(t,Ou):t)}function jn(t){if(t instanceof IDBRequest)return e0(t);if(Jc.has(t))return Jc.get(t);const e=s0(t);return e!==t&&(Jc.set(t,e),Yl.set(e,t)),e}const Zc=t=>Yl.get(t);function i0(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=jn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(jn(o.result),c.oldVersion,c.newVersion,jn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const o0=["get","getKey","getAll","getAllKeys","count"],a0=["put","add","delete","clear"],eu=new Map;function Nf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(eu.get(e))return eu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=a0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||o0.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return eu.set(e,i),i}n0(t=>({...t,get:(e,n,r)=>Nf(e,n)||t.get(e,n,r),has:(e,n)=>!!Nf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u0(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function u0(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mu="@firebase/app",kf="0.9.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Ql("@firebase/app"),l0="@firebase/app-compat",h0="@firebase/analytics-compat",d0="@firebase/analytics",f0="@firebase/app-check-compat",m0="@firebase/app-check",p0="@firebase/auth",g0="@firebase/auth-compat",_0="@firebase/database",y0="@firebase/database-compat",E0="@firebase/functions",v0="@firebase/functions-compat",I0="@firebase/installations",w0="@firebase/installations-compat",T0="@firebase/messaging",A0="@firebase/messaging-compat",b0="@firebase/performance",R0="@firebase/performance-compat",P0="@firebase/remote-config",S0="@firebase/remote-config-compat",C0="@firebase/storage",V0="@firebase/storage-compat",x0="@firebase/firestore",D0="@firebase/firestore-compat",N0="firebase",k0="10.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="[DEFAULT]",O0={[Mu]:"fire-core",[l0]:"fire-core-compat",[d0]:"fire-analytics",[h0]:"fire-analytics-compat",[m0]:"fire-app-check",[f0]:"fire-app-check-compat",[p0]:"fire-auth",[g0]:"fire-auth-compat",[_0]:"fire-rtdb",[y0]:"fire-rtdb-compat",[E0]:"fire-fn",[v0]:"fire-fn-compat",[I0]:"fire-iid",[w0]:"fire-iid-compat",[T0]:"fire-fcm",[A0]:"fire-fcm-compat",[b0]:"fire-perf",[R0]:"fire-perf-compat",[P0]:"fire-rc",[S0]:"fire-rc-compat",[C0]:"fire-gcs",[V0]:"fire-gcs-compat",[x0]:"fire-fst",[D0]:"fire-fst-compat","fire-js":"fire-js",[N0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Map,Ui=new Map;function ya(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $g(t,e){t.container.addOrOverwriteComponent(e)}function Ts(t){const e=t.name;if(Ui.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Ui.set(e,t);for(const n of Qn.values())ya(n,t);return!0}function qg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function M0(t,e,n=Hn){qg(t,e).clearInstance(n)}function F0(){Ui.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},_n=new nc("app","Firebase",L0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B0=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=k0;function Jl(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hn,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _n.create("bad-app-name",{appName:String(s)});if(n||(n=Mg()),!n)throw _n.create("no-options");const i=Qn.get(s);if(i){if(Nu(n,i.options)&&Nu(r,i.config))return i;throw _n.create("duplicate-app",{appName:s})}const o=new zA(s);for(const c of Ui.values())o.addComponent(c);const a=new B0(n,r,o);return Qn.set(s,a),a}function U0(t=Hn){const e=Qn.get(t);if(!e&&t===Hn&&Mg())return Jl();if(!e)throw _n.create("no-app",{appName:t});return e}function $0(){return Array.from(Qn.values())}async function jg(t){const e=t.name;Qn.has(e)&&(Qn.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Kn(t,e,n){var r;let s=(r=O0[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(a.join(" "));return}Ts(new kr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function Kg(t,e){if(t!==null&&typeof t!="function")throw _n.create("invalid-log-argument");YA(t,e)}function zg(t){QA(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="firebase-heartbeat-database",j0=1,$i="firebase-heartbeat-store";let tu=null;function Gg(){return tu||(tu=i0(q0,j0,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($i)}}}).catch(t=>{throw _n.create("idb-open",{originalErrorMessage:t.message})})),tu}async function K0(t){try{return await(await Gg()).transaction($i).objectStore($i).get(Wg(t))}catch(e){if(e instanceof zr)Or.warn(e.message);else{const n=_n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(n.message)}}}async function Of(t,e){try{const r=(await Gg()).transaction($i,"readwrite");await r.objectStore($i).put(e,Wg(t)),await r.done}catch(n){if(n instanceof zr)Or.warn(n.message);else{const r=_n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Or.warn(r.message)}}}function Wg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=1024,G0=30*24*60*60*1e3;class W0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Mf();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=G0}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mf(),{heartbeatsToSend:n,unsentEntries:r}=H0(this._heartbeatsCache.heartbeats),s=ga(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Mf(){return new Date().toISOString().substring(0,10)}function H0(t,e=z0){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ff(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ff(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Q0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fg()?OA().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await K0(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Of(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Of(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ff(t){return ga(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){Ts(new kr("platform-logger",e=>new c0(e),"PRIVATE")),Ts(new kr("heartbeat",e=>new W0(e),"PRIVATE")),Kn(Mu,kf,t),Kn(Mu,kf,"esm2017"),Kn("fire-js","")}Y0("");const X0=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:zr,SDK_VERSION:Xl,_DEFAULT_ENTRY_NAME:Hn,_addComponent:ya,_addOrOverwriteComponent:$g,_apps:Qn,_clearComponents:F0,_components:Ui,_getProvider:qg,_registerComponent:Ts,_removeServiceInstance:M0,deleteApp:jg,getApp:U0,getApps:$0,initializeApp:Jl,onLog:Kg,registerVersion:Kn,setLogLevel:zg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this._delegate=e,this.firebase=n,ya(e,new kr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),jg(this._delegate)))}_getService(e,n=Hn){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Hn){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){ya(this._delegate,e)}_addOrOverwriteComponent(e){$g(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Lf=new nc("app-compat","Firebase",Z0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:Kn,setLogLevel:zg,onLog:Kg,apps:null,SDK_VERSION:Xl,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:X0}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function s(u){if(u=u||Hn,!Cf(e,u))throw Lf.create("no-app",{appName:u});return e[u]}s.App=t;function i(u,l={}){const h=Jl(u,l);if(Cf(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const l=u.name,h=l.replace("-compat","");if(Ts(u)&&u.type==="PUBLIC"){const d=(f=s())=>{if(typeof f[h]!="function")throw Lf.create("invalid-app-argument",{appName:l});return f[h]()};u.serviceProps!==void 0&&_a(d,u.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,l).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[h]:null}function c(u,l){return l==="serverAuth"?null:l}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(){const t=eb(J0);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Hg,extendNamespace:e,createSubscribe:BA,ErrorFactory:nc,deepExtend:_a});function e(n){_a(t,n)}return t}const tb=Hg();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new Ql("@firebase/app-compat"),nb="@firebase/app-compat",rb="0.2.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t){Kn(nb,rb,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(NA()&&self.firebase!==void 0){Bf.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Bf.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Zl=tb;sb();var ib="firebase",ob="10.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zl.registerVersion(ib,ob,"app-compat");var ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},L,eh=eh||{},ee=ab||self;function rc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function uo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function cb(t){return Object.prototype.hasOwnProperty.call(t,nu)&&t[nu]||(t[nu]=++ub)}var nu="closure_uid_"+(1e9*Math.random()>>>0),ub=0;function lb(t,e,n){return t.call.apply(t.bind,arguments)}function hb(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function dt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?dt=lb:dt=hb,dt.apply(null,arguments)}function Uo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function et(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function ir(){this.s=this.s,this.o=this.o}var db=0;ir.prototype.s=!1;ir.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),db!=0)&&cb(this)};ir.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qg=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function th(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Uf(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(rc(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function ft(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var fb=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ee.addEventListener("test",()=>{},e),ee.removeEventListener("test",()=>{},e)}catch{}return t}();function qi(t){return/^[\s\xa0]*$/.test(t)}function sc(){var t=ee.navigator;return t&&(t=t.userAgent)?t:""}function en(t){return sc().indexOf(t)!=-1}function nh(t){return nh[" "](t),t}nh[" "]=function(){};function mb(t,e){var n=oR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var pb=en("Opera"),As=en("Trident")||en("MSIE"),Yg=en("Edge"),Fu=Yg||As,Xg=en("Gecko")&&!(sc().toLowerCase().indexOf("webkit")!=-1&&!en("Edge"))&&!(en("Trident")||en("MSIE"))&&!en("Edge"),gb=sc().toLowerCase().indexOf("webkit")!=-1&&!en("Edge");function Jg(){var t=ee.document;return t?t.documentMode:void 0}var Lu;e:{var ru="",su=function(){var t=sc();if(Xg)return/rv:([^\);]+)(\)|;)/.exec(t);if(Yg)return/Edge\/([\d\.]+)/.exec(t);if(As)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(gb)return/WebKit\/(\S+)/.exec(t);if(pb)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(su&&(ru=su?su[1]:""),As){var iu=Jg();if(iu!=null&&iu>parseFloat(ru)){Lu=String(iu);break e}}Lu=ru}var Bu;if(ee.document&&As){var $f=Jg();Bu=$f||parseInt(Lu,10)||void 0}else Bu=void 0;var _b=Bu;function ji(t,e){if(ft.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Xg){e:{try{nh(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:yb[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ji.$.h.call(this)}}et(ji,ft);var yb={2:"touch",3:"pen",4:"mouse"};ji.prototype.h=function(){ji.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var lo="closure_listenable_"+(1e6*Math.random()|0),Eb=0;function vb(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++Eb,this.fa=this.ia=!1}function ic(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function rh(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Ib(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Zg(t){const e={};for(const n in t)e[n]=t[n];return e}const qf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function e_(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<qf.length;i++)n=qf[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function oc(t){this.src=t,this.g={},this.h=0}oc.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=$u(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new vb(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Uu(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Qg(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ic(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function $u(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var sh="closure_lm_"+(1e6*Math.random()|0),ou={};function t_(t,e,n,r,s){if(r&&r.once)return r_(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)t_(t,e[i],n,r,s);return null}return n=ah(n),t&&t[lo]?t.O(e,n,uo(r)?!!r.capture:!!r,s):n_(t,e,n,!1,r,s)}function n_(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=uo(s)?!!s.capture:!!s,a=oh(t);if(a||(t[sh]=a=new oc(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=wb(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)fb||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(i_(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wb(){function t(n){return e.call(t.src,t.listener,n)}const e=Tb;return t}function r_(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)r_(t,e[i],n,r,s);return null}return n=ah(n),t&&t[lo]?t.P(e,n,uo(r)?!!r.capture:!!r,s):n_(t,e,n,!0,r,s)}function s_(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)s_(t,e[i],n,r,s);else r=uo(r)?!!r.capture:!!r,n=ah(n),t&&t[lo]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=$u(i,n,r,s),-1<n&&(ic(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=oh(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$u(e,n,r,s)),(n=-1<t?e[t]:null)&&ih(n))}function ih(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[lo])Uu(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(i_(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=oh(e))?(Uu(n,t),n.h==0&&(n.src=null,e[sh]=null)):ic(t)}}}function i_(t){return t in ou?ou[t]:ou[t]="on"+t}function Tb(t,e){if(t.fa)t=!0;else{e=new ji(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ih(t),t=n.call(r,e)}return t}function oh(t){return t=t[sh],t instanceof oc?t:null}var au="__closure_events_fn_"+(1e9*Math.random()>>>0);function ah(t){return typeof t=="function"?t:(t[au]||(t[au]=function(e){return t.handleEvent(e)}),t[au])}function Ze(){ir.call(this),this.i=new oc(this),this.S=this,this.J=null}et(Ze,ir);Ze.prototype[lo]=!0;Ze.prototype.removeEventListener=function(t,e,n,r){s_(this,t,e,n,r)};function at(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ft(e,t);else if(e instanceof ft)e.target=e.target||t;else{var s=e;e=new ft(r,t),e_(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=$o(o,r,!0,e)&&s}if(o=e.g=t,s=$o(o,r,!0,e)&&s,s=$o(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=$o(o,r,!1,e)&&s}Ze.prototype.N=function(){if(Ze.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ic(n[r]);delete t.g[e],t.h--}}this.J=null};Ze.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ze.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function $o(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Uu(t.i,o),s=a.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var ch=ee.JSON.stringify;class Ab{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function bb(){var t=uh;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Rb{constructor(){this.h=this.g=null}add(e,n){const r=o_.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var o_=new Ab(()=>new Pb,t=>t.reset());class Pb{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Sb(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Cb(t){ee.setTimeout(()=>{throw t},0)}let Ki,zi=!1,uh=new Rb,a_=()=>{const t=ee.Promise.resolve(void 0);Ki=()=>{t.then(Vb)}};var Vb=()=>{for(var t;t=bb();){try{t.h.call(t.g)}catch(n){Cb(n)}var e=o_;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}zi=!1};function ac(t,e){Ze.call(this),this.h=t||1,this.g=e||ee,this.j=dt(this.qb,this),this.l=Date.now()}et(ac,Ze);L=ac.prototype;L.ga=!1;L.T=null;L.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),at(this,"tick"),this.ga&&(lh(this),this.start()))}};L.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function lh(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}L.N=function(){ac.$.N.call(this),lh(this),delete this.g};function hh(t,e,n){if(typeof t=="function")n&&(t=dt(t,n));else if(t&&typeof t.handleEvent=="function")t=dt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ee.setTimeout(t,e||0)}function c_(t){t.g=hh(()=>{t.g=null,t.i&&(t.i=!1,c_(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class xb extends ir{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:c_(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(t){ir.call(this),this.h=t,this.g={}}et(Gi,ir);var jf=[];function u_(t,e,n,r){Array.isArray(n)||(n&&(jf[0]=n.toString()),n=jf);for(var s=0;s<n.length;s++){var i=t_(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function l_(t){rh(t.g,function(e,n){this.g.hasOwnProperty(n)&&ih(e)},t),t.g={}}Gi.prototype.N=function(){Gi.$.N.call(this),l_(this)};Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function cc(){this.g=!0}cc.prototype.Ea=function(){this.g=!1};function Db(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function Nb(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function hs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Ob(t,n)+(r?" "+r:"")})}function kb(t,e){t.info(function(){return"TIMEOUT: "+e})}cc.prototype.info=function(){};function Ob(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return ch(n)}catch{return e}}var Gr={},Kf=null;function uc(){return Kf=Kf||new Ze}Gr.Ta="serverreachability";function h_(t){ft.call(this,Gr.Ta,t)}et(h_,ft);function Wi(t){const e=uc();at(e,new h_(e))}Gr.STAT_EVENT="statevent";function d_(t,e){ft.call(this,Gr.STAT_EVENT,t),this.stat=e}et(d_,ft);function yt(t){const e=uc();at(e,new d_(e,t))}Gr.Ua="timingevent";function f_(t,e){ft.call(this,Gr.Ua,t),this.size=e}et(f_,ft);function ho(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){t()},e)}var lc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},m_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function dh(){}dh.prototype.h=null;function zf(t){return t.h||(t.h=t.i())}function p_(){}var fo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fh(){ft.call(this,"d")}et(fh,ft);function mh(){ft.call(this,"c")}et(mh,ft);var qu;function hc(){}et(hc,dh);hc.prototype.g=function(){return new XMLHttpRequest};hc.prototype.i=function(){return{}};qu=new hc;function mo(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Gi(this),this.P=Mb,t=Fu?125:void 0,this.V=new ac(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new g_}function g_(){this.i=null,this.g="",this.h=!1}var Mb=45e3,ju={},Ea={};L=mo.prototype;L.setTimeout=function(t){this.P=t};function Ku(t,e,n){t.L=1,t.v=fc(En(e)),t.s=n,t.S=!0,__(t,null)}function __(t,e){t.G=Date.now(),po(t),t.A=En(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),b_(n.i,"t",r),t.C=0,n=t.l.J,t.h=new g_,t.g=G_(t.l,n?e:null,!t.s),0<t.O&&(t.M=new xb(dt(t.Pa,t,t.g),t.O)),u_(t.U,t.g,"readystatechange",t.nb),e=t.I?Zg(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Wi(),Db(t.j,t.u,t.A,t.m,t.W,t.s)}L.nb=function(t){t=t.target;const e=this.M;e&&tn(t)==3?e.l():this.Pa(t)};L.Pa=function(t){try{if(t==this.g)e:{const l=tn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>l)&&(l!=3||Fu||this.g&&(this.h.h||this.g.ja()||Qf(this.g)))){this.J||l!=4||e==7||(e==8||0>=h?Wi(3):Wi(2)),dc(this);var n=this.g.da();this.ca=n;t:if(y_(this)){var r=Qf(this.g);t="";var s=r.length,i=tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),wi(this);var o="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Nb(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qi(a)){var u=a;break t}}u=null}if(n=u)hs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zu(this,n);else{this.i=!1,this.o=3,yt(12),Rr(this),wi(this);break e}}this.S?(E_(this,l,o),Fu&&this.i&&l==3&&(u_(this.U,this.V,"tick",this.mb),this.V.start())):(hs(this.j,this.m,o,null),zu(this,o)),l==4&&Rr(this),this.i&&!this.J&&(l==4?q_(this.l,this):(this.i=!1,po(this)))}else rR(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,yt(12)):(this.o=0,yt(13)),Rr(this),wi(this)}}}catch{}finally{}};function y_(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function E_(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=Fb(t,n),s==Ea){e==4&&(t.o=4,yt(14),r=!1),hs(t.j,t.m,null,"[Incomplete Response]");break}else if(s==ju){t.o=4,yt(15),hs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else hs(t.j,t.m,s,null),zu(t,s);y_(t)&&s!=Ea&&s!=ju&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,yt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),vh(e),e.M=!0,yt(11))):(hs(t.j,t.m,n,"[Invalid Chunked Response]"),Rr(t),wi(t))}L.mb=function(){if(this.g){var t=tn(this.g),e=this.g.ja();this.C<e.length&&(dc(this),E_(this,t,e),this.i&&t!=4&&po(this))}};function Fb(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Ea:(n=Number(e.substring(n,r)),isNaN(n)?ju:(r+=1,r+n>e.length?Ea:(e=e.slice(r,r+n),t.C=r+n,e)))}L.cancel=function(){this.J=!0,Rr(this)};function po(t){t.Y=Date.now()+t.P,v_(t,t.P)}function v_(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ho(dt(t.lb,t),e)}function dc(t){t.B&&(ee.clearTimeout(t.B),t.B=null)}L.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(kb(this.j,this.A),this.L!=2&&(Wi(),yt(17)),Rr(this),this.o=2,wi(this)):v_(this,this.Y-t)};function wi(t){t.l.H==0||t.J||q_(t.l,t)}function Rr(t){dc(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,lh(t.V),l_(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function zu(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Gu(n.i,t))){if(!t.K&&Gu(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)wa(n),gc(n);else break e;Eh(n),yt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ho(dt(n.ib,n),6e3));if(1>=S_(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Pr(n,11)}else if((t.K||n.g==t)&&wa(n),!qi(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var i=r.i;i.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(ph(i,i.h),i.h=null))}if(r.F){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,Se(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=z_(r,r.J?r.pa:null,r.Y),o.K){C_(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(dc(a),po(a)),r.g=o}else U_(r);0<n.j.length&&_c(n)}else u[0]!="stop"&&u[0]!="close"||Pr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Pr(n,7):yh(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Wi(4)}catch{}}function Lb(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(rc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Bb(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(rc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function I_(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(rc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Bb(t),r=Lb(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var w_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ub(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Dr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Dr){this.h=t.h,va(this,t.j),this.s=t.s,this.g=t.g,Ia(this,t.m),this.l=t.l;var e=t.i,n=new Hi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Gf(this,n),this.o=t.o}else t&&(e=String(t).match(w_))?(this.h=!1,va(this,e[1]||"",!0),this.s=li(e[2]||""),this.g=li(e[3]||"",!0),Ia(this,e[4]),this.l=li(e[5]||"",!0),Gf(this,e[6]||"",!0),this.o=li(e[7]||"")):(this.h=!1,this.i=new Hi(null,this.h))}Dr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(hi(e,Wf,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(hi(e,Wf,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(hi(n,n.charAt(0)=="/"?jb:qb,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",hi(n,zb)),t.join("")};function En(t){return new Dr(t)}function va(t,e,n){t.j=n?li(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ia(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Gf(t,e,n){e instanceof Hi?(t.i=e,Gb(t.i,t.h)):(n||(e=hi(e,Kb)),t.i=new Hi(e,t.h))}function Se(t,e,n){t.i.set(e,n)}function fc(t){return Se(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function li(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hi(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,$b),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $b(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Wf=/[#\/\?@]/g,qb=/[#\?:]/g,jb=/[#\?]/g,Kb=/[#\?@]/g,zb=/#/g;function Hi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function or(t){t.g||(t.g=new Map,t.h=0,t.i&&Ub(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}L=Hi.prototype;L.add=function(t,e){or(this),this.i=null,t=Us(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function T_(t,e){or(t),e=Us(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function A_(t,e){return or(t),e=Us(t,e),t.g.has(e)}L.forEach=function(t,e){or(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};L.ta=function(){or(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};L.Z=function(t){or(this);let e=[];if(typeof t=="string")A_(this,t)&&(e=e.concat(this.g.get(Us(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};L.set=function(t,e){return or(this),this.i=null,t=Us(this,t),A_(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};L.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function b_(t,e,n){T_(t,e),0<n.length&&(t.i=null,t.g.set(Us(t,e),th(n)),t.h+=n.length)}L.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Us(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Gb(t,e){e&&!t.j&&(or(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(T_(this,r),b_(this,s,n))},t)),t.j=e}var Wb=class{constructor(t,e){this.g=t,this.map=e}};function R_(t){this.l=t||Hb,ee.PerformanceNavigationTiming?(t=ee.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Hb=10;function P_(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function S_(t){return t.h?1:t.g?t.g.size:0}function Gu(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function ph(t,e){t.g?t.g.add(e):t.h=e}function C_(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}R_.prototype.cancel=function(){if(this.i=V_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function V_(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return th(t.i)}var Qb=class{stringify(t){return ee.JSON.stringify(t,void 0)}parse(t){return ee.JSON.parse(t,void 0)}};function Yb(){this.g=new Qb}function Xb(t,e,n){const r=n||"";try{I_(t,function(s,i){let o=s;uo(s)&&(o=ch(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Jb(t,e){const n=new cc;if(ee.Image){const r=new Image;r.onload=Uo(qo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Uo(qo,n,r,"TestLoadImage: error",!1,e),r.onabort=Uo(qo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uo(qo,n,r,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function qo(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function go(t){this.l=t.fc||null,this.j=t.ob||!1}et(go,dh);go.prototype.g=function(){return new mc(this.l,this.j)};go.prototype.i=function(t){return function(){return t}}({});function mc(t,e){Ze.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=gh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}et(mc,Ze);var gh=0;L=mc.prototype;L.open=function(t,e){if(this.readyState!=gh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Qi(this)};L.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};L.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=gh};L.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;x_(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function x_(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}L.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_o(this):Qi(this),this.readyState==3&&x_(this)}};L.Za=function(t){this.g&&(this.response=this.responseText=t,_o(this))};L.Ya=function(t){this.g&&(this.response=t,_o(this))};L.ka=function(){this.g&&_o(this)};function _o(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Qi(t)}L.setRequestHeader=function(t,e){this.v.append(t,e)};L.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};L.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Qi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Zb=ee.JSON.parse;function Me(t){Ze.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=D_,this.L=this.M=!1}et(Me,Ze);var D_="",eR=/^https?$/i,tR=["POST","PUT"];L=Me.prototype;L.Oa=function(t){this.M=t};L.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():qu.g(),this.C=this.u?zf(this.u):zf(qu),this.g.onreadystatechange=dt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Hf(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=ee.FormData&&t instanceof ee.FormData,!(0<=Qg(tR,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{O_(this),0<this.B&&((this.L=nR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dt(this.ua,this)):this.A=hh(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Hf(this,i)}};function nR(t){return As&&typeof t.timeout=="number"&&t.ontimeout!==void 0}L.ua=function(){typeof eh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,at(this,"timeout"),this.abort(8))};function Hf(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,N_(t),pc(t)}function N_(t){t.F||(t.F=!0,at(t,"complete"),at(t,"error"))}L.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,at(this,"complete"),at(this,"abort"),pc(this))};L.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pc(this,!0)),Me.$.N.call(this)};L.La=function(){this.s||(this.G||this.v||this.l?k_(this):this.kb())};L.kb=function(){k_(this)};function k_(t){if(t.h&&typeof eh<"u"&&(!t.C[1]||tn(t)!=4||t.da()!=2)){if(t.v&&tn(t)==4)hh(t.La,0,t);else if(at(t,"readystatechange"),tn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(w_)[1]||null;!s&&ee.self&&ee.self.location&&(s=ee.self.location.protocol.slice(0,-1)),r=!eR.test(s?s.toLowerCase():"")}n=r}if(n)at(t,"complete"),at(t,"success");else{t.m=6;try{var i=2<tn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",N_(t)}}finally{pc(t)}}}}function pc(t,e){if(t.g){O_(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||at(t,"ready");try{n.onreadystatechange=r}catch{}}}function O_(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ee.clearTimeout(t.A),t.A=null)}L.isActive=function(){return!!this.g};function tn(t){return t.g?t.g.readyState:0}L.da=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}};L.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};L.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Zb(e)}};function Qf(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case D_:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function rR(t){const e={};t=(t.g&&2<=tn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(qi(t[r]))continue;var n=Sb(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}Ib(e,function(r){return r.join(", ")})}L.Ia=function(){return this.m};L.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function M_(t){let e="";return rh(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function _h(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=M_(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Se(t,e,n))}function ei(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function F_(t){this.Ga=0,this.j=[],this.l=new cc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ei("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ei("baseRetryDelayMs",5e3,t),this.hb=ei("retryDelaySeedMs",1e4,t),this.eb=ei("forwardChannelMaxRetries",2,t),this.xa=ei("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new R_(t&&t.concurrentRequestLimit),this.Ja=new Yb,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}L=F_.prototype;L.ra=8;L.H=1;function yh(t){if(L_(t),t.H==3){var e=t.W++,n=En(t.I);if(Se(n,"SID",t.K),Se(n,"RID",e),Se(n,"TYPE","terminate"),yo(t,n),e=new mo(t,t.l,e),e.L=2,e.v=fc(En(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon)try{n=ee.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ee.Image&&(new Image().src=e.v,n=!0),n||(e.g=G_(e.l,null),e.g.ha(e.v)),e.G=Date.now(),po(e)}K_(t)}function gc(t){t.g&&(vh(t),t.g.cancel(),t.g=null)}function L_(t){gc(t),t.u&&(ee.clearTimeout(t.u),t.u=null),wa(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ee.clearTimeout(t.m),t.m=null)}function _c(t){if(!P_(t.i)&&!t.m){t.m=!0;var e=t.Na;Ki||a_(),zi||(Ki(),zi=!0),uh.add(e,t),t.C=0}}function sR(t,e){return S_(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ho(dt(t.Na,t,e),j_(t,t.C)),t.C++,!0)}L.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new mo(this,this.l,t);let i=this.s;if(this.U&&(i?(i=Zg(i),e_(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=B_(this,s,e),n=En(this.I),Se(n,"RID",t),Se(n,"CVER",22),this.F&&Se(n,"X-HTTP-Session-Id",this.F),yo(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(M_(i)))+"&"+e:this.o&&_h(n,this.o,i)),ph(this.i,s),this.bb&&Se(n,"TYPE","init"),this.P?(Se(n,"$req",e),Se(n,"SID","null"),s.aa=!0,Ku(s,n,null)):Ku(s,n,e),this.H=2}}else this.H==3&&(t?Yf(this,t):this.j.length==0||P_(this.i)||Yf(this))};function Yf(t,e){var n;e?n=e.m:n=t.W++;const r=En(t.I);Se(r,"SID",t.K),Se(r,"RID",n),Se(r,"AID",t.V),yo(t,r),t.o&&t.s&&_h(r,t.o,t.s),n=new mo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=B_(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ph(t.i,n),Ku(n,r,e)}function yo(t,e){t.na&&rh(t.na,function(n,r){Se(e,r,n)}),t.h&&I_({},function(n,r){Se(e,r,n)})}function B_(t,e,n){n=Math.min(t.j.length,n);var r=t.h?dt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let u=s[c].g;const l=s[c].map;if(u-=i,0>u)i=Math.max(0,s[c].g-100),a=!1;else try{Xb(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function U_(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ki||a_(),zi||(Ki(),zi=!0),uh.add(e,t),t.A=0}}function Eh(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ho(dt(t.Ma,t),j_(t,t.A)),t.A++,!0)}L.Ma=function(){if(this.u=null,$_(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ho(dt(this.jb,this),t)}};L.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,yt(10),gc(this),$_(this))};function vh(t){t.B!=null&&(ee.clearTimeout(t.B),t.B=null)}function $_(t){t.g=new mo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=En(t.wa);Se(e,"RID","rpc"),Se(e,"SID",t.K),Se(e,"AID",t.V),Se(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Se(e,"TO",t.qa),Se(e,"TYPE","xmlhttp"),yo(t,e),t.o&&t.s&&_h(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=fc(En(e)),n.s=null,n.S=!0,__(n,t)}L.ib=function(){this.v!=null&&(this.v=null,gc(this),Eh(this),yt(19))};function wa(t){t.v!=null&&(ee.clearTimeout(t.v),t.v=null)}function q_(t,e){var n=null;if(t.g==e){wa(t),vh(t),t.g=null;var r=2}else if(Gu(t.i,e))n=e.F,C_(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=uc(),at(r,new f_(r,n)),_c(t)}else U_(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&sR(t,e)||r==2&&Eh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Pr(t,5);break;case 4:Pr(t,10);break;case 3:Pr(t,6);break;default:Pr(t,2)}}}function j_(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Pr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=dt(t.pb,t);n||(n=new Dr("//www.google.com/images/cleardot.gif"),ee.location&&ee.location.protocol=="http"||va(n,"https"),fc(n)),Jb(n.toString(),r)}else yt(2);t.H=0,t.h&&t.h.za(e),K_(t),L_(t)}L.pb=function(t){t?(this.l.info("Successfully pinged google.com"),yt(2)):(this.l.info("Failed to ping google.com"),yt(1))};function K_(t){if(t.H=0,t.ma=[],t.h){const e=V_(t.i);(e.length!=0||t.j.length!=0)&&(Uf(t.ma,e),Uf(t.ma,t.j),t.i.i.length=0,th(t.j),t.j.length=0),t.h.ya()}}function z_(t,e,n){var r=n instanceof Dr?En(n):new Dr(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ia(r,r.m);else{var s=ee.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Dr(null);r&&va(i,r),e&&(i.g=e),s&&Ia(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Se(r,n,e),Se(r,"VER",t.ra),yo(t,r),r}function G_(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Me(new go({ob:!0})):new Me(t.va),e.Oa(t.J),e}L.isActive=function(){return!!this.h&&this.h.isActive(this)};function W_(){}L=W_.prototype;L.Ba=function(){};L.Aa=function(){};L.za=function(){};L.ya=function(){};L.isActive=function(){return!0};L.Va=function(){};function Ta(){if(As&&!(10<=Number(_b)))throw Error("Environmental error: no available transport.")}Ta.prototype.g=function(t,e){return new Dt(t,e)};function Dt(t,e){Ze.call(this),this.g=new F_(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!qi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qi(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new $s(this)}et(Dt,Ze);Dt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;yt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=z_(t,null,t.Y),_c(t)};Dt.prototype.close=function(){yh(this.g)};Dt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ch(t),t=n);e.j.push(new Wb(e.fb++,t)),e.H==3&&_c(e)};Dt.prototype.N=function(){this.g.h=null,delete this.j,yh(this.g),delete this.g,Dt.$.N.call(this)};function H_(t){fh.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}et(H_,fh);function Q_(){mh.call(this),this.status=1}et(Q_,mh);function $s(t){this.g=t}et($s,W_);$s.prototype.Ba=function(){at(this.g,"a")};$s.prototype.Aa=function(t){at(this.g,new H_(t))};$s.prototype.za=function(t){at(this.g,new Q_)};$s.prototype.ya=function(){at(this.g,"b")};function iR(){this.blockSize=-1}function Wt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}et(Wt,iR);Wt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function cu(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Wt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)cu(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){cu(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){cu(this,r),s=0;break}}this.h=s,this.i+=e};Wt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ie(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var oR={};function Ih(t){return-128<=t&&128>t?mb(t,function(e){return new Ie([e|0],0>e?-1:0)}):new Ie([t|0],0>t?-1:0)}function nn(t){if(isNaN(t)||!isFinite(t))return ps;if(0>t)return it(nn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Wu;return new Ie(e,0)}function Y_(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return it(Y_(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=nn(Math.pow(e,8)),r=ps,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=nn(Math.pow(e,i)),r=r.R(i).add(nn(o))):(r=r.R(n),r=r.add(nn(o)))}return r}var Wu=4294967296,ps=Ih(0),Hu=Ih(1),Xf=Ih(16777216);L=Ie.prototype;L.ea=function(){if(Mt(this))return-it(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Wu+r)*e,e*=Wu}return t};L.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(pn(this))return"0";if(Mt(this))return"-"+it(this).toString(t);for(var e=nn(Math.pow(t,6)),n=this,r="";;){var s=ba(n,e).g;n=Aa(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,pn(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};L.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function pn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Mt(t){return t.h==-1}L.X=function(t){return t=Aa(this,t),Mt(t)?-1:pn(t)?0:1};function it(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ie(n,~t.h).add(Hu)}L.abs=function(){return Mt(this)?it(this):this};L.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Ie(n,n[n.length-1]&-2147483648?-1:0)};function Aa(t,e){return t.add(it(e))}L.R=function(t){if(pn(this)||pn(t))return ps;if(Mt(this))return Mt(t)?it(this).R(it(t)):it(it(this).R(t));if(Mt(t))return it(this.R(it(t)));if(0>this.X(Xf)&&0>t.X(Xf))return nn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,c=t.D(s)&65535;n[2*r+2*s]+=o*c,jo(n,2*r+2*s),n[2*r+2*s+1]+=i*c,jo(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,jo(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,jo(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ie(n,0)};function jo(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ti(t,e){this.g=t,this.h=e}function ba(t,e){if(pn(e))throw Error("division by zero");if(pn(t))return new ti(ps,ps);if(Mt(t))return e=ba(it(t),e),new ti(it(e.g),it(e.h));if(Mt(e))return e=ba(t,it(e)),new ti(it(e.g),e.h);if(30<t.g.length){if(Mt(t)||Mt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Hu,r=e;0>=r.X(t);)n=Jf(n),r=Jf(r);var s=rs(n,1),i=rs(r,1);for(r=rs(r,2),n=rs(n,2);!pn(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=rs(r,1),n=rs(n,1)}return e=Aa(t,s.R(e)),new ti(s,e)}for(s=ps;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=nn(n),o=i.R(e);Mt(o)||0<o.X(t);)n-=r,i=nn(n),o=i.R(e);pn(i)&&(i=Hu),s=s.add(i),t=Aa(t,o)}return new ti(s,t)}L.gb=function(t){return ba(this,t).h};L.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ie(n,this.h&t.h)};L.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ie(n,this.h|t.h)};L.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ie(n,this.h^t.h)};function Jf(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ie(n,t.h)}function rs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Ie(s,t.h)}Ta.prototype.createWebChannel=Ta.prototype.g;Dt.prototype.send=Dt.prototype.u;Dt.prototype.open=Dt.prototype.m;Dt.prototype.close=Dt.prototype.close;lc.NO_ERROR=0;lc.TIMEOUT=8;lc.HTTP_ERROR=6;m_.COMPLETE="complete";p_.EventType=fo;fo.OPEN="a";fo.CLOSE="b";fo.ERROR="c";fo.MESSAGE="d";Ze.prototype.listen=Ze.prototype.O;Me.prototype.listenOnce=Me.prototype.P;Me.prototype.getLastError=Me.prototype.Sa;Me.prototype.getLastErrorCode=Me.prototype.Ia;Me.prototype.getStatus=Me.prototype.da;Me.prototype.getResponseJson=Me.prototype.Wa;Me.prototype.getResponseText=Me.prototype.ja;Me.prototype.send=Me.prototype.ha;Me.prototype.setWithCredentials=Me.prototype.Oa;Wt.prototype.digest=Wt.prototype.l;Wt.prototype.reset=Wt.prototype.reset;Wt.prototype.update=Wt.prototype.j;Ie.prototype.add=Ie.prototype.add;Ie.prototype.multiply=Ie.prototype.R;Ie.prototype.modulo=Ie.prototype.gb;Ie.prototype.compare=Ie.prototype.X;Ie.prototype.toNumber=Ie.prototype.ea;Ie.prototype.toString=Ie.prototype.toString;Ie.prototype.getBits=Ie.prototype.D;Ie.fromNumber=nn;Ie.fromString=Y_;var aR=function(){return new Ta},cR=function(){return uc()},uu=lc,uR=m_,lR=Gr,Zf={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},hR=go,Ko=p_,dR=Me,fR=Wt,gs=Ie;const em="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs="10.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new Ql("@firebase/firestore");function Qu(){return Yn.logLevel}function mR(t){Yn.setLogLevel(t)}function P(t,...e){if(Yn.logLevel<=pe.DEBUG){const n=e.map(wh);Yn.debug(`Firestore (${qs}): ${t}`,...n)}}function Le(t,...e){if(Yn.logLevel<=pe.ERROR){const n=e.map(wh);Yn.error(`Firestore (${qs}): ${t}`,...n)}}function Ht(t,...e){if(Yn.logLevel<=pe.WARN){const n=e.map(wh);Yn.warn(`Firestore (${qs}): ${t}`,...n)}}function wh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t="Unexpected state"){const e=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: `+t;throw Le(e),new Error(e)}function W(t,e){t||$()}function pR(t,e){t||$()}function F(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}}class _R{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yR{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Je;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Je,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Je)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(W(typeof r.accessToken=="string"),new X_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return W(e===null||typeof e=="string"),new Ye(e)}}class ER{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ER(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(W(typeof n.token=="string"),this.R=n.token,new IR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=TR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function bs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function Z_(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ne(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.timestamp=e}static fromTimestamp(e){return new G(e)}static min(){return new G(new Ne(0,0))}static max(){return new G(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(),r===void 0?r=e.length-n:r>e.length-n&&$(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class de extends Yi{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new b(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const AR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends Yi{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return AR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new b(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new b(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new b(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new b(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.path=e}static fromPath(e){return new k(de.fromString(e))}static fromName(e){return new k(de.fromString(e).popFirst(5))}static empty(){return new k(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new k(new de(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Yu(t){return t.fields.find(e=>e.kind===2)}function gr(t){return t.fields.filter(e=>e.kind!==2)}ey.UNKNOWN_ID=-1;class bR{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ra{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ra(0,Nt.min())}}function ty(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=G.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new Nt(s,k.empty(),e)}function ny(t){return new Nt(t.readTime,t.key,-1)}class Nt{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nt(G.min(),k.empty(),-1)}static max(){return new Nt(G.max(),k.empty(),-1)}}function Th(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=k.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ar(t){if(t.code!==v.FAILED_PRECONDITION||t.message!==ry)throw t;P("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,r)=>{n(e)})}static reject(e){return new E((n,r)=>{r(e)})}static waitFor(e){return new E((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=E.resolve(!1);for(const r of e)n=n.next(s=>s?E.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new E((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(l=>{o[u]=l,++a,a===i&&r(o)},l=>s(l))}})}static doWhile(e,n){return new E((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.m=new Je,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new Ti(e,n.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=Ah(r.target.error);this.m.reject(new Ti(e,s))}}static open(e,n,r,s){try{return new yc(n,e.transaction(s,r))}catch(i){throw new Ti(n,i)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new PR(n)}}class Kt{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Kt.D(Du())===12.2&&Le("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),vr(window.indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Fg())return!1;if(Kt.C())return!0;const e=Du(),n=Kt.D(e),r=0<n&&n<10,s=Kt.F(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static F(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async N(e){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ti(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new b(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new b(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ti(e,o))},s.onupgradeneeded=i=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.S.B(o,s.transaction,i.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const a=yc.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(u=>(a.p(),u)).catch(u=>(a.abort(u),E.reject(u))).toPromise();return c.catch(()=>{}),await a.g,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(P("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class RR{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return vr(this.q.delete())}}class Ti extends b{constructor(e,n){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function cr(t){return t.name==="IndexedDbTransactionError"}class PR{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(P("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vr(r)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),vr(this.store.add(e))}get(e){return vr(this.store.get(e)).next(n=>(n===void 0&&(n=null),P("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),vr(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),vr(this.store.count())}G(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const s=this.cursor(r),i=[];return this.j(s,(o,a)=>{i.push(a)}).next(()=>i)}{const s=this.store.getAll(r.range);return new E((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new E((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}J(e,n){P("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.j(s,(i,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.j(s,n)}X(e){const n=this.cursor({});return new E((r,s)=>{n.onerror=i=>{const o=Ah(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}j(e,n){const r=[];return new E((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new RR(a),u=n(a.primaryKey,a.value,c);if(u instanceof E){const l=u.catch(h=>(c.done(),E.reject(h)));r.push(l)}c.isDone?s():c.U===null?a.continue():a.continue(c.U)}}).next(()=>E.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function vr(t){return new E((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Ah(r.target.error);n(s)}})}let tm=!1;function Ah(t){const e=Kt.D(Du());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new b("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tm||(tm=!0,setTimeout(()=>{throw r},0)),r}}return t}class SR{constructor(e,n){this.asyncQueue=e,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){P("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{P("IndexBackiller",`Documents written: ${await this.ee.ne()}`)}catch(n){cr(n)?P("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await ar(n)}await this.te(6e4)})}}class CR{constructor(e,n){this.localStore=e,this.persistence=n}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,e))}re(e,n){const r=new Set;let s=n,i=!0;return E.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return P("IndexBackiller",`Processing collection: ${o}`),this.ie(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ie(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(s,i)).next(a=>(P("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}se(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=ny(i);Th(o,r)>0&&(r=o)}),new Nt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}At.ae=-1;function Eo(t){return t==null}function Xi(t){return t===0&&1/t==-1/0}function iy(t){return typeof t=="number"&&Number.isInteger(t)&&!Xi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nm(e)),e=VR(t.get(n),e);return nm(e)}function VR(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function nm(t){return t+""}function rn(t){const e=t.length;if(W(e>=2),e===2)return W(t.charAt(0)===""&&t.charAt(1)===""),de.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&$(),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:$()}i=o+2}return new de(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e){return[t,Et(e)]}function oy(t,e,n){return[t,Et(e),n]}const xR={},DR=["prefixPath","collectionGroup","readTime","documentId"],NR=["prefixPath","collectionGroup","documentId"],kR=["collectionGroup","readTime","prefixPath","documentId"],OR=["canonicalId","targetId"],MR=["targetId","path"],FR=["path","targetId"],LR=["collectionId","parent"],BR=["indexId","uid"],UR=["uid","sequenceNumber"],$R=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qR=["indexId","uid","orderedDocumentKey"],jR=["userId","collectionPath","documentId"],KR=["userId","collectionPath","largestBatchId"],zR=["userId","collectionGroup","largestBatchId"],ay=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GR=[...ay,"documentOverlays"],cy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uy=cy,WR=[...uy,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends sy{constructor(e,n){super(),this.ue=e,this.currentSequenceNumber=n}}function tt(t,e){const n=F(t);return Kt.O(n.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ly(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zo(this.root,e,this.comparator,!0)}}class zo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();const e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new im(this.data.getIterator())}getIteratorFrom(e){return new im(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ve(this.comparator);return n.data=e,n}}class im{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ss(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new bt([])}unionWith(e){let n=new Ve(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hy("Invalid base64 string: "+i):i}}(e);return new He(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new He(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}He.EMPTY_BYTE_STRING=new He("");const QR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xn(t){if(W(!!t),typeof t=="string"){let e=0;const n=QR.exec(t);if(W(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jn(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bh(t){const e=t.mapValue.fields.__previous_value__;return Ec(e)?bh(e):e}function Ji(t){const e=Xn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Zn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Zn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ra={nullValue:"NULL_VALUE"};function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ec(t)?4:dy(t)?9007199254740991:10:$()}function cn(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ji(t).isEqual(Ji(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Xn(s.timestampValue),a=Xn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Jn(s.bytesValue).isEqual(Jn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),a=Oe(i.doubleValue);return o===a?Xi(o)===Xi(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return bs(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(sm(o)!==sm(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!cn(o[c],a[c])))return!1;return!0}(t,e);default:return $()}}function Zi(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function er(t,e){if(t===e)return 0;const n=Mr(t),r=Mr(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Oe(i.integerValue||i.doubleValue),c=Oe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return om(t.timestampValue,e.timestampValue);case 4:return om(Ji(t),Ji(e));case 5:return ne(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Jn(i),c=Jn(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const l=ne(a[u],c[u]);if(l!==0)return l}return ne(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ne(Oe(i.latitude),Oe(o.latitude));return a!==0?a:ne(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const l=er(a[u],c[u]);if(l)return l}return ne(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Ln.mapValue&&o===Ln.mapValue)return 0;if(i===Ln.mapValue)return 1;if(o===Ln.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let h=0;h<c.length&&h<l.length;++h){const d=ne(c[h],l[h]);if(d!==0)return d;const f=er(a[c[h]],u[l[h]]);if(f!==0)return f}return ne(c.length,l.length)}(t.mapValue,e.mapValue);default:throw $()}}function om(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=Xn(t),r=Xn(e),s=ne(n.seconds,r.seconds);return s!==0?s:ne(n.nanos,r.nanos)}function Rs(t){return Ju(t)}function Ju(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return k.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ju(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ju(n.fields[o])}`;return s+"}"}(t.mapValue):$()}function Fr(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zu(t){return!!t&&"integerValue"in t}function eo(t){return!!t&&"arrayValue"in t}function am(t){return!!t&&"nullValue"in t}function cm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sa(t){return!!t&&"mapValue"in t}function Ai(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ai(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ai(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dy(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function XR(t){return"nullValue"in t?ra:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Fr(Zn.empty(),k.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:$()}function JR(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Fr(Zn.empty(),k.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ln:$()}function um(t,e){const n=er(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function lm(t,e){const n=er(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.value=e}static empty(){return new ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ai(n)}setAll(e){let n=Be.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ai(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());sa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Wr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ot(Ai(this.value))}}function fy(t){const e=[];return Wr(t.fields,(n,r)=>{const s=new Be([n]);if(sa(r)){const i=fy(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ce(e,0,G.min(),G.min(),G.min(),ot.empty(),0)}static newFoundDocument(e,n,r,s){return new Ce(e,1,n,G.min(),r,s,0)}static newNoDocument(e,n){return new Ce(e,2,n,G.min(),G.min(),ot.empty(),0)}static newUnknownDocument(e,n){return new Ce(e,3,n,G.min(),G.min(),ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ce&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ce(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n){this.position=e,this.inclusive=n}}function hm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=k.comparator(k.fromName(o.referenceValue),n.key):r=er(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function dm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{}class ce extends my{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eP(e,n,r):n==="array-contains"?new rP(e,r):n==="in"?new vy(e,r):n==="not-in"?new sP(e,r):n==="array-contains-any"?new iP(e,r):new ce(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tP(e,r):new nP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(er(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(er(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ve extends my{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ve(e,n)}matches(e){return Ps(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Ps(t){return t.op==="and"}function el(t){return t.op==="or"}function Rh(t){return py(t)&&Ps(t)}function py(t){for(const e of t.filters)if(e instanceof ve)return!1;return!0}function tl(t){if(t instanceof ce)return t.field.canonicalString()+t.op.toString()+Rs(t.value);if(Rh(t))return t.filters.map(e=>tl(e)).join(",");{const e=t.filters.map(n=>tl(n)).join(",");return`${t.op}(${e})`}}function gy(t,e){return t instanceof ce?function(r,s){return s instanceof ce&&r.op===s.op&&r.field.isEqual(s.field)&&cn(r.value,s.value)}(t,e):t instanceof ve?function(r,s){return s instanceof ve&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&gy(o,s.filters[a]),!0):!1}(t,e):void $()}function _y(t,e){const n=t.filters.concat(e);return ve.create(n,t.op)}function yy(t){return t instanceof ce?function(n){return`${n.field.canonicalString()} ${n.op} ${Rs(n.value)}`}(t):t instanceof ve?function(n){return n.op.toString()+" {"+n.getFilters().map(yy).join(" ,")+"}"}(t):"Filter"}class eP extends ce{constructor(e,n,r){super(e,n,r),this.key=k.fromName(r.referenceValue)}matches(e){const n=k.comparator(e.key,this.key);return this.matchesComparison(n)}}class tP extends ce{constructor(e,n){super(e,"in",n),this.keys=Ey("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nP extends ce{constructor(e,n){super(e,"not-in",n),this.keys=Ey("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ey(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>k.fromName(r.referenceValue))}class rP extends ce{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eo(n)&&Zi(n.arrayValue,this.value)}}class vy extends ce{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zi(this.value.arrayValue,n)}}class sP extends ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zi(this.value.arrayValue,n)}}class iP extends ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function nl(t,e=null,n=[],r=[],s=null,i=null,o=null){return new oP(t,e,n,r,s,i,o)}function Lr(t){const e=F(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tl(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Eo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rs(r)).join(",")),e.he=n}return e.he}function vo(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dm(t.startAt,e.startAt)&&dm(t.endAt,e.endAt)}function Pa(t){return k.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Sa(t,e){return t.filters.filter(n=>n instanceof ce&&n.field.isEqual(e))}function fm(t,e,n){let r=ra,s=!0;for(const i of Sa(t,e)){let o=ra,a=!0;switch(i.op){case"<":case"<=":o=XR(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=ra}um({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];um({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function mm(t,e,n){let r=Ln,s=!0;for(const i of Sa(t,e)){let o=Ln,a=!0;switch(i.op){case">=":case">":o=JR(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Ln}lm({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];lm({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function Iy(t,e,n,r,s,i,o,a){return new wn(t,e,n,r,s,i,o,a)}function js(t){return new wn(t)}function pm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ph(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function vc(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Sh(t){return t.collectionGroup!==null}function Nr(t){const e=F(t);if(e.Pe===null){e.Pe=[];const n=vc(e),r=Ph(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new _s(n)),e.Pe.push(new _s(Be.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new _s(Be.keyField(),i))}}}return e.Pe}function St(t){const e=F(t);if(!e.Ie)if(e.limitType==="F")e.Ie=nl(e.path,e.collectionGroup,Nr(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Nr(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new _s(i.field,o))}const r=e.endAt?new tr(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new tr(e.startAt.position,e.startAt.inclusive):null;e.Ie=nl(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.Ie}function rl(t,e){e.getFirstInequalityField(),vc(t);const n=t.filters.concat([e]);return new wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ca(t,e,n){return new wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Io(t,e){return vo(St(t),St(e))&&t.limitType===e.limitType}function wy(t){return`${Lr(St(t))}|lt:${t.limitType}`}function sl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yy(s)).join(", ")}]`),Eo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Rs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Rs(s)).join(",")),`Target(${r})`}(St(t))}; limitType=${t.limitType})`}function wo(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):k.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Nr(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=hm(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Nr(r),s)||r.endAt&&!function(o,a,c){const u=hm(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Nr(r),s))}(t,e)}function Ty(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ay(t){return(e,n)=>{let r=!1;for(const s of Nr(t)){const i=aP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aP(t,e,n){const r=t.field.isKeyField()?k.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?er(c,u):$()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ly(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new Re(k.comparator);function Rt(){return cP}const by=new Re(k.comparator);function di(...t){let e=by;for(const n of t)e=e.insert(n.key,n);return e}function Ry(t){let e=by;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function sn(){return bi()}function Py(){return bi()}function bi(){return new ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const uP=new Re(k.comparator),lP=new Ve(k.comparator);function se(...t){let e=lP;for(const n of t)e=e.add(n);return e}const hP=new Ve(ne);function Ch(){return hP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xi(e)?"-0":e}}function Cy(t){return{integerValue:""+t}}function Vy(t,e){return iy(e)?Cy(e):Sy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(){this._=void 0}}function dP(t,e,n){return t instanceof Ss?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ec(i)&&(i=bh(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Br?Dy(t,e):t instanceof Ur?Ny(t,e):function(s,i){const o=xy(s,i),a=gm(o)+gm(s.Te);return Zu(o)&&Zu(s.Te)?Cy(a):Sy(s.serializer,a)}(t,e)}function fP(t,e,n){return t instanceof Br?Dy(t,e):t instanceof Ur?Ny(t,e):n}function xy(t,e){return t instanceof Cs?function(r){return Zu(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ss extends Ic{}class Br extends Ic{constructor(e){super(),this.elements=e}}function Dy(t,e){const n=ky(e);for(const r of t.elements)n.some(s=>cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ur extends Ic{constructor(e){super(),this.elements=e}}function Ny(t,e){let n=ky(e);for(const r of t.elements)n=n.filter(s=>!cn(s,r));return{arrayValue:{values:n}}}class Cs extends Ic{constructor(e,n){super(),this.serializer=e,this.Te=n}}function gm(t){return Oe(t.integerValue||t.doubleValue)}function ky(t){return eo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.field=e,this.transform=n}}function mP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Br&&s instanceof Br||r instanceof Ur&&s instanceof Ur?bs(r.elements,s.elements,cn):r instanceof Cs&&s instanceof Cs?cn(r.Te,s.Te):r instanceof Ss&&s instanceof Ss}(t.transform,e.transform)}class pP{constructor(e,n){this.version=e,this.transformResults=n}}class De{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new De}static exists(e){return new De(void 0,e)}static updateTime(e){return new De(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ia(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wc{}function Oy(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zs(t.key,De.none()):new Ks(t.key,t.data,De.none());{const n=t.data,r=ot.empty();let s=new Ve(Be.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Tn(t.key,r,new bt(s.toArray()),De.none())}}function gP(t,e,n){t instanceof Ks?function(s,i,o){const a=s.value.clone(),c=ym(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Tn?function(s,i,o){if(!ia(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ym(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(My(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ri(t,e,n,r){return t instanceof Ks?function(i,o,a,c){if(!ia(i.precondition,o))return a;const u=i.value.clone(),l=Em(i.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tn?function(i,o,a,c){if(!ia(i.precondition,o))return a;const u=Em(i.fieldTransforms,c,o),l=o.data;return l.setAll(My(i)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return ia(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function _P(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=xy(r.transform,s||null);i!=null&&(n===null&&(n=ot.empty()),n.set(r.field,i))}return n||null}function _m(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&bs(r,s,(i,o)=>mP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ks extends wc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Tn extends wc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function My(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ym(t,e,n){const r=new Map;W(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,fP(o,a,n[s]))}return r}function Em(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,dP(i,o,e))}return r}class zs extends wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vh extends wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&gP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ri(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ri(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Py();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=Oy(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(n,r)=>_m(n,r))&&bs(this.baseMutations,e.baseMutations,(n,r)=>_m(n,r))}}class Dh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){W(e.mutations.length===r.length);let s=function(){return uP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Dh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,he;function Fy(t){switch(t){default:return $();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function Ly(t){if(t===void 0)return Le("GRPC error has no .code"),v.UNKNOWN;switch(t){case Ke.OK:return v.OK;case Ke.CANCELLED:return v.CANCELLED;case Ke.UNKNOWN:return v.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return v.INTERNAL;case Ke.UNAVAILABLE:return v.UNAVAILABLE;case Ke.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Ke.NOT_FOUND:return v.NOT_FOUND;case Ke.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Ke.ABORTED:return v.ABORTED;case Ke.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Ke.DATA_LOSS:return v.DATA_LOSS;default:return $()}}(he=Ke||(Ke={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Go}static getOrCreateInstance(){return Go===null&&(Go=new kh),Go}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Go=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=new gs([4294967295,4294967295],0);function vm(t){const e=By().encode(t),n=new fR;return n.update(e),new Uint8Array(n.digest())}function Im(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new gs([n,r],0),new gs([s,i],0)]}class Oh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fi(`Invalid padding: ${n}`);if(r<0)throw new fi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fi(`Invalid padding when bitmap length is 0: ${n}`);this.de=8*e.length-n,this.Ae=gs.fromNumber(this.de)}Re(e,n,r){let s=e.add(n.multiply(gs.fromNumber(r)));return s.compare(EP)===1&&(s=new gs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ae).toNumber()}Ve(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.de===0)return!1;const n=vm(e),[r,s]=Im(n);for(let i=0;i<this.hashCount;i++){const o=this.Re(r,s,i);if(!this.Ve(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Oh(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.de===0)return;const n=vm(e),[r,s]=Im(n);for(let i=0;i<this.hashCount;i++){const o=this.Re(r,s,i);this.me(o)}}me(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,bo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ao(G.min(),s,new Re(ne),Rt(),se())}}class bo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bo(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,r,s){this.fe=e,this.removedTargetIds=n,this.key=r,this.ge=s}}class Uy{constructor(e,n){this.targetId=e,this.pe=n}}class $y{constructor(e,n,r=He.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class wm{constructor(){this.ye=0,this.we=Am(),this.Se=He.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return this.ye!==0}get Ce(){return this.De}Fe(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}Me(){let e=se(),n=se(),r=se();return this.we.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:$()}}),new bo(this.Se,this.be,e,n,r)}xe(){this.De=!1,this.we=Am()}Oe(e,n){this.De=!0,this.we=this.we.insert(e,n)}Ne(e){this.De=!0,this.we=this.we.remove(e)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class vP{constructor(e){this.qe=e,this.Qe=new Map,this.Ke=Rt(),this.$e=Tm(),this.Ue=new Re(ne)}We(e){for(const n of e.fe)e.ge&&e.ge.isFoundDocument()?this.Ge(n,e.ge):this.ze(n,e.key,e.ge);for(const n of e.removedTargetIds)this.ze(n,e.key,e.ge)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||this.removeTarget(n);break;case 3:this.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Fe(e.resumeToken));break;default:$()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){var n,r;const s=e.targetId,i=e.pe.count,o=this.Xe(s);if(o){const a=o.target;if(Pa(a))if(i===0){const c=new k(a.path);this.ze(s,c,Ce.newNoDocument(c,G.min()))}else W(i===1);else{const c=this.et(s);if(c!==i){const u=this.tt(e,c);if(u.status!==0){this.Ye(s);const l=u.status===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(s,l)}(n=kh.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(h,d,f,_){var y,I,R,V,N,x;const j={localCacheCount:f,existenceFilterCount:_.count},J=_.unchangedNames;return J&&(j.bloomFilter={applied:h===0,hashCount:(y=J==null?void 0:J.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(V=(R=(I=J==null?void 0:J.bits)===null||I===void 0?void 0:I.bitmap)===null||R===void 0?void 0:R.length)!==null&&V!==void 0?V:0,padding:(x=(N=J==null?void 0:J.bits)===null||N===void 0?void 0:N.padding)!==null&&x!==void 0?x:0},d&&(j.bloomFilter.mightContain=d)),j}(u.status,(r=u.nt)!==null&&r!==void 0?r:null,c,e.pe))}}}}tt(e,n){const{unchangedNames:r,count:s}=e.pe;if(!r||!r.bits)return{status:1};const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=r;let c,u;try{c=Jn(i).toUint8Array()}catch(h){if(h instanceof hy)return Ht("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw h}try{u=new Oh(c,o,a)}catch(h){return Ht(h instanceof fi?"BloomFilter error: ":"Applying bloom filter failed: ",h),{status:1}}const l=h=>{const d=this.qe.rt();return u.mightContain(`projects/${d.projectId}/databases/${d.database}/documents/${h}`)};return u.de===0?{status:1}:{status:s===n-this.it(e.targetId,l)?0:2,nt:l}}it(e,n){const r=this.qe.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{n(i.path.canonicalString())||(this.ze(e,i,null),s++)}),s}st(e){const n=new Map;this.Qe.forEach((i,o)=>{const a=this.Xe(o);if(a){if(i.current&&Pa(a.target)){const c=new k(a.target.path);this.Ke.get(c)!==null||this.ot(o,c)||this.ze(o,c,Ce.newNoDocument(c,e))}i.Ce&&(n.set(o,i.Me()),i.xe())}});let r=se();this.$e.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Xe(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.Ke.forEach((i,o)=>o.setReadTime(e));const s=new Ao(e,n,this.Ue,this.Ke,r);return this.Ke=Rt(),this.$e=Tm(),this.Ue=new Re(ne),s}Ge(e,n){if(!this.Je(e))return;const r=this.ot(e,n.key)?2:0;this.He(e).Oe(n.key,r),this.Ke=this.Ke.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ot(e,n)?s.Oe(n,1):s.Ne(n),this.$e=this.$e.insert(n,this._t(n).delete(e)),r&&(this.Ke=this.Ke.insert(n,r))}removeTarget(e){this.Qe.delete(e)}et(e){const n=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Be(e){this.He(e).Be()}He(e){let n=this.Qe.get(e);return n||(n=new wm,this.Qe.set(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ve(ne),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||P("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.Qe.get(e);return n&&n.ve?null:this.qe.ut(e)}Ye(e){this.Qe.set(e,new wm),this.qe.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ot(e,n){return this.qe.getRemoteKeysForTarget(e).has(n)}}function Tm(){return new Re(k.comparator)}function Am(){return new Re(k.comparator)}const IP=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),wP=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),TP=(()=>({and:"AND",or:"OR"}))();class AP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function il(t,e){return t.useProto3Json||Eo(e)?e:{value:e}}function Vs(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bP(t,e){return Vs(t,e.toTimestamp())}function $e(t){return W(!!t),G.fromTimestamp(function(n){const r=Xn(n);return new Ne(r.seconds,r.nanos)}(t))}function Mh(t,e){return function(r){return new de(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function jy(t){const e=de.fromString(t);return W(Jy(e)),e}function to(t,e){return Mh(t.databaseId,e.path)}function on(t,e){const n=jy(e);if(n.get(1)!==t.databaseId.projectId)throw new b(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new k(zy(n))}function ol(t,e){return Mh(t.databaseId,e)}function Ky(t){const e=jy(t);return e.length===4?de.emptyPath():zy(e)}function no(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zy(t){return W(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bm(t,e,n){return{name:to(t,e),fields:n.value.mapValue.fields}}function Gy(t,e,n){const r=on(t,e.name),s=$e(e.updateTime),i=e.createTime?$e(e.createTime):G.min(),o=new ot({mapValue:{fields:e.fields}}),a=Ce.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function RP(t,e){return"found"in e?function(r,s){W(!!s.found),s.found.name,s.found.updateTime;const i=on(r,s.found.name),o=$e(s.found.updateTime),a=s.found.createTime?$e(s.found.createTime):G.min(),c=new ot({mapValue:{fields:s.found.fields}});return Ce.newFoundDocument(i,o,a,c)}(t,e):"missing"in e?function(r,s){W(!!s.missing),W(!!s.readTime);const i=on(r,s.missing),o=$e(s.readTime);return Ce.newNoDocument(i,o)}(t,e):$()}function PP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,l){return u.useProto3Json?(W(l===void 0||typeof l=="string"),He.fromBase64String(l||"")):(W(l===void 0||l instanceof Uint8Array),He.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const l=u.code===void 0?v.UNKNOWN:Ly(u.code);return new b(l,u.message||"")}(o);n=new $y(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=on(t,r.document.name),i=$e(r.document.updateTime),o=r.document.createTime?$e(r.document.createTime):G.min(),a=new ot({mapValue:{fields:r.document.fields}}),c=Ce.newFoundDocument(s,i,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new oa(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=on(t,r.document),i=r.readTime?$e(r.readTime):G.min(),o=Ce.newNoDocument(s,i),a=r.removedTargetIds||[];n=new oa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=on(t,r.document),i=r.removedTargetIds||[];n=new oa([],i,s,null)}else{if(!("filter"in e))return $();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new yP(s,i),a=r.targetId;n=new Uy(a,o)}}return n}function ro(t,e){let n;if(e instanceof Ks)n={update:bm(t,e.key,e.value)};else if(e instanceof zs)n={delete:to(t,e.key)};else if(e instanceof Tn)n={update:bm(t,e.key,e.data),updateMask:NP(e.fieldMask)};else{if(!(e instanceof Vh))return $();n={verify:to(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ss)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Br)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ur)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cs)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw $()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:$()}(t,e.precondition)),n}function al(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?De.updateTime($e(i.updateTime)):i.exists!==void 0?De.exists(i.exists):De.none()}(e.currentDocument):De.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)W(a.setToServerValue==="REQUEST_TIME"),c=new Ss;else if("appendMissingElements"in a){const l=a.appendMissingElements.values||[];c=new Br(l)}else if("removeAllFromArray"in a){const l=a.removeAllFromArray.values||[];c=new Ur(l)}else"increment"in a?c=new Cs(o,a.increment):$();const u=Be.fromServerFormat(a.fieldPath);return new To(u,c)}(t,s)):[];if(e.update){e.update.name;const s=on(t,e.update.name),i=new ot({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new bt(u.map(l=>Be.fromServerFormat(l)))}(e.updateMask);return new Tn(s,i,o,n,r)}return new Ks(s,i,n,r)}if(e.delete){const s=on(t,e.delete);return new zs(s,n)}if(e.verify){const s=on(t,e.verify);return new Vh(s,n)}return $()}function SP(t,e){return t&&t.length>0?(W(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?$e(s.updateTime):$e(i);return o.isEqual(G.min())&&(o=$e(i)),new pP(o,s.transformResults||[])}(n,e))):[]}function Wy(t,e){return{documents:[ol(t,e.path)]}}function Hy(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=ol(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ol(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(c){if(c.length!==0)return Xy(ve.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:cs(h.field),direction:VP(h.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=il(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function Qy(t){let e=Ky(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){W(r===1);const l=n.from[0];l.allDescendants?s=l.collectionId:e=e.child(l.collectionId)}let i=[];n.where&&(i=function(h){const d=Yy(h);return d instanceof ve&&Rh(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(_){return new _s(us(_.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Eo(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(h){const d=!!h.before,f=h.values||[];return new tr(f,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new tr(f,d)}(n.endAt)),Iy(e,s,o,i,a,"F",c,u)}function CP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Yy(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=us(n.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=us(n.unaryFilter.field);return ce.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=us(n.unaryFilter.field);return ce.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=us(n.unaryFilter.field);return ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(t):t.fieldFilter!==void 0?function(n){return ce.create(us(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ve.create(n.compositeFilter.filters.map(r=>Yy(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return $()}}(n.compositeFilter.op))}(t):$()}function VP(t){return IP[t]}function xP(t){return wP[t]}function DP(t){return TP[t]}function cs(t){return{fieldPath:t.canonicalString()}}function us(t){return Be.fromServerFormat(t.fieldPath)}function Xy(t){return t instanceof ce?function(n){if(n.op==="=="){if(cm(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NAN"}};if(am(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cm(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NAN"}};if(am(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(n.field),op:xP(n.op),value:n.value}}}(t):t instanceof ve?function(n){const r=n.getFilters().map(s=>Xy(s));return r.length===1?r[0]:{compositeFilter:{op:DP(n.op),filters:r}}}(t):$()}function NP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Jy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n,r,s,i=G.min(),o=G.min(),a=He.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new gn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this.ct=e}}function kP(t,e){let n;if(e.document)n=Gy(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=k.fromSegments(e.noDocument.path),s=qr(e.noDocument.readTime);n=Ce.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return $();{const r=k.fromSegments(e.unknownDocument.path),s=qr(e.unknownDocument.version);n=Ce.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Ne(s[0],s[1]);return G.fromTimestamp(i)}(e.readTime)),n}function Rm(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Va(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:to(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Vs(i,o.version.toTimestamp()),createTime:Vs(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$r(e.version)};else{if(!e.isUnknownDocument())return $();r.unknownDocument={path:n.path.toArray(),version:$r(e.version)}}return r}function Va(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $r(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qr(t){const e=new Ne(t.seconds,t.nanoseconds);return G.fromTimestamp(e)}function Ir(t,e){const n=(e.baseMutations||[]).map(i=>al(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>al(t.ct,i)),s=Ne.fromMillis(e.localWriteTimeMs);return new xh(e.batchId,s,n,r)}function mi(t){const e=qr(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?qr(t.lastLimboFreeSnapshotVersion):G.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return W(i.documents.length===1),St(js(Ky(i.documents[0])))}(t.query):function(i){return St(Qy(i))}(t.query),new gn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,He.fromBase64String(t.resumeToken))}function eE(t,e){const n=$r(e.snapshotVersion),r=$r(e.lastLimboFreeSnapshotVersion);let s;s=Pa(e.target)?Wy(t.ct,e.target):Hy(t.ct,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lr(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Fh(t){const e=Qy({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ca(e,e.limit,"L"):e}function lu(t,e){return new Nh(e.largestBatchId,al(t.ct,e.overlayMutation))}function Pm(t,e){const n=e.path.lastSegment();return[t,Et(e.path.popLast()),n]}function Sm(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:$r(r.readTime),documentKey:Et(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{getBundleMetadata(e,n){return Cm(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:qr(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return Cm(e).put(function(s){return{bundleId:s.id,createTime:$r($e(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Vm(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Fh(i.bundledQuery),readTime:qr(i.readTime)}}(r)})}saveNamedQuery(e,n){return Vm(e).put(function(s){return{name:s.name,readTime:$r($e(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function Cm(t){return tt(t,"bundles")}function Vm(t){return tt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Tc(e,r)}getOverlay(e,n){return ni(e).get(Pm(this.userId,n)).next(r=>r?lu(this.serializer,r):null)}getOverlays(e,n){const r=sn();return E.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Nh(n,o);s.push(this.ht(e,a))}),E.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Et(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(ni(e).J("collectionPathOverlayIndex",a))}),E.waitFor(i)}getOverlaysForCollection(e,n,r){const s=sn(),i=Et(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ni(e).G("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=lu(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=sn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ni(e).Z({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{const h=lu(this.serializer,u);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):l.done()}).next(()=>i)}ht(e,n){return ni(e).put(function(s,i,o){const[a,c,u]=Pm(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ro(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function ni(t){return tt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Oe(e.integerValue));else if("doubleValue"in e){const r=Oe(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Xi(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Jn(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?dy(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):$()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const s of Object.keys(r))this.Rt(s,n),this.It(r[s],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const s of r)this.It(s,n)}gt(e,n){this.Et(n,37),k.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}wr.bt=new wr;function MP(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function xm(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=MP(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class FP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.vt(r.value),r=n.next();this.Ct()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.vt(r);else if(r<2048)this.vt(960|r>>>6),this.vt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.vt(480|r>>>12),this.vt(128|63&r>>>6),this.vt(128|63&r);else{const s=n.codePointAt(0);this.vt(240|s>>>18),this.vt(128|63&s>>>12),this.vt(128|63&s>>>6),this.vt(128|63&s)}}this.Ct()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const s=n.codePointAt(0);this.Mt(240|s>>>18),this.Mt(128|63&s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s)}}this.xt()}Bt(e){const n=this.Lt(e),r=xm(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}qt(e){const n=this.Lt(e),r=xm(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}vt(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ct(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class LP{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class BP{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class ri{constructor(){this.Gt=new FP,this.zt=new LP(this.Gt),this.jt=new BP(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Tr(this.indexId,this.documentKey,this.arrayValue,r)}}function Cn(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Dm(t.arrayValue,e.arrayValue),n!==0?n:(n=Dm(t.directionalValue,e.directionalValue),n!==0?n:k.comparator(t.documentKey,e.documentKey)))}function Dm(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=r:this.Zt.push(r)}}en(e){W(e.collectionGroup===this.collectionId);const n=Yu(e);if(n!==void 0&&!this.tn(n))return!1;const r=gr(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.tn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt!==void 0){if(!s.has(this.Xt.field.canonicalString())){const a=r[i];if(!this.nn(this.Xt,a)||!this.rn(this.Yt[o++],a))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t){var e,n;if(W(t instanceof ce||t instanceof ve),t instanceof ce){if(t instanceof vy){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>ce.create(t.field,"==",i)))||[];return ve.create(s,"or")}return t}const r=t.filters.map(s=>tE(s));return ve.create(r,t.op)}function $P(t){if(t.getFilters().length===0)return[];const e=ll(tE(t));return W(nE(e)),cl(e)||ul(e)?[e]:e.getFilters()}function cl(t){return t instanceof ce}function ul(t){return t instanceof ve&&Rh(t)}function nE(t){return cl(t)||ul(t)||function(n){if(n instanceof ve&&el(n)){for(const r of n.getFilters())if(!cl(r)&&!ul(r))return!1;return!0}return!1}(t)}function ll(t){if(W(t instanceof ce||t instanceof ve),t instanceof ce)return t;if(t.filters.length===1)return ll(t.filters[0]);const e=t.filters.map(r=>ll(r));let n=ve.create(e,t.op);return n=xa(n),nE(n)?n:(W(n instanceof ve),W(Ps(n)),W(n.filters.length>1),n.filters.reduce((r,s)=>Lh(r,s)))}function Lh(t,e){let n;return W(t instanceof ce||t instanceof ve),W(e instanceof ce||e instanceof ve),n=t instanceof ce?e instanceof ce?function(s,i){return ve.create([s,i],"and")}(t,e):Nm(t,e):e instanceof ce?Nm(e,t):function(s,i){if(W(s.filters.length>0&&i.filters.length>0),Ps(s)&&Ps(i))return _y(s,i.getFilters());const o=el(s)?s:i,a=el(s)?i:s,c=o.filters.map(u=>Lh(u,a));return ve.create(c,"or")}(t,e),xa(n)}function Nm(t,e){if(Ps(e))return _y(e,t.getFilters());{const n=e.filters.map(r=>Lh(t,r));return ve.create(n,"or")}}function xa(t){if(W(t instanceof ce||t instanceof ve),t instanceof ce)return t;const e=t.getFilters();if(e.length===1)return xa(e[0]);if(py(t))return t;const n=e.map(s=>xa(s)),r=[];return n.forEach(s=>{s instanceof ce?r.push(s):s instanceof ve&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ve.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.sn=new Bh}addToCollectionParentIndex(e,n){return this.sn.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(Nt.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(Nt.min())}updateCollectionGroup(e,n,r){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class Bh{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ve(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ve(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new Uint8Array(0);class jP{constructor(e,n){this.user=e,this.databaseId=n,this.on=new Bh,this._n=new ur(r=>Lr(r),(r,s)=>vo(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const i={collectionId:r,parent:Et(s)};return km(e).put(i)}return E.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Z_(n),""],!1,!0);return km(e).G(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(rn(o.parent))}return r})}addFieldIndex(e,n){const r=Ho(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ii(e);return i.next(a=>{o.put(Sm(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Ho(e),s=ii(e),i=si(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=si(e);let s=!0;const i=new Map;return E.forEach(this.an(n),o=>this.un(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=se();const a=[];return E.forEach(i,(c,u)=>{P("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(c)} to execute ${Lr(n)}`);const l=function(N,x){const j=Yu(x);if(j===void 0)return null;for(const J of Sa(N,j.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(u,c),h=function(N,x){const j=new Map;for(const J of gr(x))for(const oe of Sa(N,J.fieldPath))switch(oe.op){case"==":case"in":j.set(J.fieldPath.canonicalString(),oe.value);break;case"not-in":case"!=":return j.set(J.fieldPath.canonicalString(),oe.value),Array.from(j.values())}return null}(u,c),d=function(N,x){const j=[];let J=!0;for(const oe of gr(x)){const B=oe.kind===0?fm(N,oe.fieldPath,N.startAt):mm(N,oe.fieldPath,N.startAt);j.push(B.value),J&&(J=B.inclusive)}return new tr(j,J)}(u,c),f=function(N,x){const j=[];let J=!0;for(const oe of gr(x)){const B=oe.kind===0?mm(N,oe.fieldPath,N.endAt):fm(N,oe.fieldPath,N.endAt);j.push(B.value),J&&(J=B.inclusive)}return new tr(j,J)}(u,c),_=this.cn(c,u,d),y=this.cn(c,u,f),I=this.ln(c,u,h),R=this.hn(c.indexId,l,_,d.inclusive,y,f.inclusive,I);return E.forEach(R,V=>r.H(V,n.limit).next(N=>{N.forEach(x=>{const j=k.fromSegments(x.documentKey);o.has(j)||(o=o.add(j),a.push(j))})}))}).next(()=>a)}return E.resolve(null)})}an(e){let n=this._n.get(e);return n||(e.filters.length===0?n=[e]:n=$P(ve.create(e.filters,"and")).map(r=>nl(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this._n.set(e,n),n)}hn(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),l=[];for(let h=0;h<c;++h){const d=n?this.Pn(n[h/u]):Wo,f=this.In(e,d,r[h%u],s),_=this.Tn(e,d,i[h%u],o),y=a.map(I=>this.In(e,d,I,!0));l.push(...this.createRange(f,_,y))}return l}In(e,n,r,s){const i=new Tr(e,k.empty(),n,r);return s?i:i.Jt()}Tn(e,n,r,s){const i=new Tr(e,k.empty(),n,r);return s?i.Jt():i}un(e,n){const r=new UP(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.an(n);return E.forEach(s,i=>this.un(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Ve(Be.comparator),l=!1;for(const h of c.filters)for(const d of h.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?l=!0:u=u.add(d.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(l?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}En(e,n){const r=new ri;for(const s of gr(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Ht(s.kind);wr.bt.Pt(i,o)}return r.Wt()}Pn(e){const n=new ri;return wr.bt.Pt(e,n.Ht(0)),n.Wt()}dn(e,n){const r=new ri;return wr.bt.Pt(Fr(this.databaseId,n),r.Ht(function(i){const o=gr(i);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}ln(e,n,r){if(r===null)return[];let s=[];s.push(new ri);let i=0;for(const o of gr(e)){const a=r[i++];for(const c of s)if(this.An(n,o.fieldPath)&&eo(a))s=this.Rn(s,o,a);else{const u=c.Ht(o.kind);wr.bt.Pt(a,u)}}return this.Vn(s)}cn(e,n,r){return this.ln(e,n,r.position)}Vn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}Rn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new ri;c.seed(a.Wt()),wr.bt.Pt(o,c.Ht(n.kind)),i.push(c)}return i}An(e,n){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ho(e),s=ii(e);return(n?r.G("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.G()).next(i=>{const o=[];return E.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(l,h){const d=h?new Ra(h.sequenceNumber,new Nt(qr(h.readTime),new k(rn(h.documentKey)),h.largestBatchId)):Ra.empty(),f=l.fields.map(([_,y])=>new bR(Be.fromServerFormat(_),y));return new ey(l.indexId,l.collectionGroup,f,d)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ne(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Ho(e),i=ii(e);return this.mn(e).next(o=>s.G("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>E.forEach(a,c=>i.put(Sm(c.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return E.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?E.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),E.forEach(a,c=>this.fn(e,s,c).next(u=>{const l=this.gn(i,c);return u.isEqual(l)?E.resolve():this.pn(e,i,c,u,l)}))))})}yn(e,n,r,s){return si(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.dn(r,n.key),documentKey:n.key.path.toArray()})}wn(e,n,r,s){return si(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.dn(r,n.key),n.key.path.toArray()])}fn(e,n,r){const s=si(e);let i=new Ve(Cn);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.dn(r,n)])},(o,a)=>{i=i.add(new Tr(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}gn(e,n){let r=new Ve(Cn);const s=this.En(n,e);if(s==null)return r;const i=Yu(n);if(i!=null){const o=e.data.field(i.fieldPath);if(eo(o))for(const a of o.arrayValue.values||[])r=r.add(new Tr(n.indexId,e.key,this.Pn(a),s))}else r=r.add(new Tr(n.indexId,e.key,Wo,s));return r}pn(e,n,r,s,i){P("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,u,l,h,d){const f=c.getIterator(),_=u.getIterator();let y=ss(f),I=ss(_);for(;y||I;){let R=!1,V=!1;if(y&&I){const N=l(y,I);N<0?V=!0:N>0&&(R=!0)}else y!=null?V=!0:R=!0;R?(h(I),I=ss(_)):V?(d(y),y=ss(f)):(y=ss(f),I=ss(_))}}(s,i,Cn,a=>{o.push(this.yn(e,n,r,a))},a=>{o.push(this.wn(e,n,r,a))}),E.waitFor(o)}mn(e){let n=1;return ii(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Cn(o,a)).filter((o,a,c)=>!a||Cn(o,c[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Cn(o,e),c=Cn(o,n);if(a===0)s[0]=e.Jt();else if(a>0&&c<0)s.push(o),s.push(o.Jt());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Sn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Wo,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Wo,[]];i.push(IDBKeyRange.bound(a,c))}return i}Sn(e,n){return Cn(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Om)}getMinOffset(e,n){return E.mapArray(this.an(n),r=>this.un(e,r).next(s=>s||$())).next(Om)}}function km(t){return tt(t,"collectionParents")}function si(t){return tt(t,"indexEntries")}function Ho(t){return tt(t,"indexConfiguration")}function ii(t){return tt(t,"indexState")}function Om(t){W(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Th(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Nt(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Tt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Z({range:o},(l,h,d)=>(a++,d.delete()));i.push(c.next(()=>{W(a===1)}));const u=[];for(const l of n.mutations){const h=oy(e,l.key.path,n.batchId);i.push(s.delete(h)),u.push(l.key)}return E.waitFor(i).next(()=>u)}function Da(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw $();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(41943040,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);class Ac{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.bn={}}static lt(e,n,r,s){W(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Ac(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vn(e).Z({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=ls(e),o=Vn(e);return o.add({}).next(a=>{W(typeof a=="number");const c=new xh(a,n,r,s),u=function(f,_,y){const I=y.baseMutations.map(V=>ro(f.ct,V)),R=y.mutations.map(V=>ro(f.ct,V));return{userId:_,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:I,mutations:R}}(this.serializer,this.userId,c),l=[];let h=new Ve((d,f)=>ne(d.canonicalString(),f.canonicalString()));for(const d of s){const f=oy(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(o.put(u)),l.push(i.put(f,xR))}return h.forEach(d=>{l.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.bn[a]=c.keys()}),E.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return Vn(e).get(n).next(r=>r?(W(r.userId===this.userId),Ir(this.serializer,r)):null)}Dn(e,n){return this.bn[n]?E.resolve(this.bn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.bn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Vn(e).Z({index:"userMutationsIndex",range:s},(o,a,c)=>{a.userId===this.userId&&(W(a.batchId>=r),i=Ir(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vn(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vn(e).G("userMutationsIndex",n).next(r=>r.map(s=>Ir(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=na(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return ls(e).Z({range:s},(o,a,c)=>{const[u,l,h]=o,d=rn(l);if(u===this.userId&&n.path.isEqual(d))return Vn(e).get(h).next(f=>{if(!f)throw $();W(f.userId===this.userId),i.push(Ir(this.serializer,f))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ve(ne);const s=[];return n.forEach(i=>{const o=na(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=ls(e).Z({range:a},(u,l,h)=>{const[d,f,_]=u,y=rn(f);d===this.userId&&i.path.isEqual(y)?r=r.add(_):h.done()});s.push(c)}),E.waitFor(s).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=na(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ve(ne);return ls(e).Z({range:o},(c,u,l)=>{const[h,d,f]=c,_=rn(d);h===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(f)):l.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Vn(e).get(i).next(o=>{if(o===null)throw $();W(o.userId===this.userId),r.push(Ir(this.serializer,o))}))}),E.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return rE(e.ue,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),E.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return E.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return ls(e).Z({range:r},(i,o,a)=>{if(i[0]===this.userId){const c=rn(i[1]);s.push(c)}else a.done()}).next(()=>{W(s.length===0)})})}containsKey(e,n){return sE(e,this.userId,n)}Fn(e){return iE(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sE(t,e,n){const r=na(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ls(t).Z({range:i,Y:!0},(a,c,u)=>{const[l,h,d]=a;l===e&&h===s&&(o=!0),u.done()}).next(()=>o)}function Vn(t){return tt(t,"mutations")}function ls(t){return tt(t,"documentMutations")}function iE(t){return tt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.Mn=e}next(){return this.Mn+=2,this.Mn}static xn(){return new jr(0)}static On(){return new jr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Nn(e).next(n=>{const r=new jr(n.highestTargetId);return n.highestTargetId=r.next(),this.Bn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Nn(e).next(n=>G.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Nn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Nn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Bn(e,s)))}addTargetData(e,n){return this.Ln(e,n).next(()=>this.Nn(e).next(r=>(r.targetCount+=1,this.kn(n,r),this.Bn(e,r))))}updateTargetData(e,n){return this.Ln(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>is(e).delete(n.targetId)).next(()=>this.Nn(e)).next(r=>(W(r.targetCount>0),r.targetCount-=1,this.Bn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return is(e).Z((o,a)=>{const c=mi(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>E.waitFor(i)).next(()=>s)}forEachTarget(e,n){return is(e).Z((r,s)=>{const i=mi(s);n(i)})}Nn(e){return Fm(e).get("targetGlobalKey").next(n=>(W(n!==null),n))}Bn(e,n){return Fm(e).put("targetGlobalKey",n)}Ln(e,n){return is(e).put(eE(this.serializer,n))}kn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Nn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Lr(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return is(e).Z({range:s,index:"queryTargetsIndex"},(o,a,c)=>{const u=mi(a);vo(n,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Mn(e);return n.forEach(o=>{const a=Et(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),E.waitFor(s)}removeMatchingKeys(e,n,r){const s=Mn(e);return E.forEach(n,i=>{const o=Et(i.path);return E.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Mn(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Mn(e);let i=se();return s.Z({range:r,Y:!0},(o,a,c)=>{const u=rn(o[1]),l=new k(u);i=i.add(l)}).next(()=>i)}containsKey(e,n){const r=Et(n.path),s=IDBKeyRange.bound([r],[Z_(r)],!1,!0);let i=0;return Mn(e).Z({index:"documentTargetsIndex",Y:!0,range:s},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}ut(e,n){return is(e).get(n).next(r=>r?mi(r):null)}}function is(t){return tt(t,"targets")}function Fm(t){return tt(t,"targetGlobal")}function Mn(t){return tt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm([t,e],[n,r]){const s=ne(t,n);return s===0?ne(e,r):s}class zP{constructor(e){this.qn=e,this.buffer=new Ve(Lm),this.Qn=0}Kn(){return++this.Qn}$n(e){const n=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Lm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Un=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Wn(6e4)}stop(){this.Un&&(this.Un.cancel(),this.Un=null)}get started(){return this.Un!==null}Wn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Un=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cr(n)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ar(n)}await this.Wn(3e5)})}}class WP{constructor(e,n){this.Gn=e,this.params=n}calculateTargetCount(e,n){return this.Gn.zn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return E.resolve(At.ae);const r=new zP(n);return this.Gn.forEachTarget(e,s=>r.$n(s.sequenceNumber)).next(()=>this.Gn.jn(e,s=>r.$n(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Gn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Gn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),E.resolve(Mm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mm):this.Hn(e,n))}getCacheSize(e){return this.Gn.getCacheSize(e)}Hn(e,n){let r,s,i,o,a,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Qu()<=pe.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),E.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function HP(t,e){return new WP(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.db=e,this.garbageCollector=HP(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Jn(e){let n=0;return this.jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}jn(e,n){return this.Yn(e,(r,s)=>n(s))}addReference(e,n,r){return Qo(e,r)}removeReference(e,n,r){return Qo(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Qo(e,n)}Zn(e,n){return function(s,i){let o=!1;return iE(s).X(a=>sE(s,a,i).next(c=>(c&&(o=!0),E.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Yn(e,(o,a)=>{if(a<=n){const c=this.Zn(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,G.min()),Mn(e).delete(function(h){return[0,Et(h.path)]}(o))))});s.push(c)}}).next(()=>E.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Qo(e,n)}Yn(e,n){const r=Mn(e);let s,i=At.ae;return r.Z({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==At.ae&&n(new k(rn(s)),i),i=u,s=c):i=At.ae}).next(()=>{i!==At.ae&&n(new k(rn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qo(t,e){return Mn(t).put(function(r,s){return{targetId:0,path:Et(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.changes=new ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ce.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?E.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return mr(e).put(r)}removeEntry(e,n,r){return mr(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Va(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Xn(e,r)))}getEntry(e,n){let r=Ce.newInvalidDocument(n);return mr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(oi(n))},(s,i)=>{r=this.er(n,i)}).next(()=>r)}tr(e,n){let r={size:0,document:Ce.newInvalidDocument(n)};return mr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(oi(n))},(s,i)=>{r={document:this.er(n,i),size:Da(i)}}).next(()=>r)}getEntries(e,n){let r=Rt();return this.nr(e,n,(s,i)=>{const o=this.er(s,i);r=r.insert(s,o)}).next(()=>r)}rr(e,n){let r=Rt(),s=new Re(k.comparator);return this.nr(e,n,(i,o)=>{const a=this.er(i,o);r=r.insert(i,a),s=s.insert(i,Da(o))}).next(()=>({documents:r,ir:s}))}nr(e,n,r){if(n.isEmpty())return E.resolve();let s=new Ve($m);n.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(oi(s.first()),oi(s.last())),o=s.getIterator();let a=o.getNext();return mr(e).Z({index:"documentKeyIndex",range:i},(c,u,l)=>{const h=k.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&$m(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?l.W(oi(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),Va(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mr(e).G(IDBKeyRange.bound(o,a,!0)).next(c=>{let u=Rt();for(const l of c){const h=this.er(k.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);h.isFoundDocument()&&(wo(n,h)||s.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,s){let i=Rt();const o=Um(n,r),a=Um(n,Nt.max());return mr(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,l)=>{const h=this.er(k.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(h.key,h),i.size===s&&l.done()}).next(()=>i)}newChangeBuffer(e){return new XP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Bm(e).get("remoteDocumentGlobalKey").next(n=>(W(!!n),n))}Xn(e,n){return Bm(e).put("remoteDocumentGlobalKey",n)}er(e,n){if(n){const r=kP(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(G.min())))return r}return Ce.newInvalidDocument(e)}}function aE(t){return new YP(t)}class XP extends oE{constructor(e,n){super(),this.sr=e,this.trackRemovals=n,this._r=new ur(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Ve((i,o)=>ne(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this._r.get(i);if(n.push(this.sr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Rm(this.sr.serializer,o);s=s.add(i.path.popLast());const u=Da(c);r+=u-a.size,n.push(this.sr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=Rm(this.sr.serializer,o.convertToNoDocument(G.min()));n.push(this.sr.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.sr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.sr.updateMetadata(e,r)),E.waitFor(n)}getFromCache(e,n){return this.sr.tr(e,n).next(r=>(this._r.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.sr.rr(e,n).next(({documents:r,ir:s})=>(s.forEach((i,o)=>{this._r.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Bm(t){return tt(t,"remoteDocumentGlobal")}function mr(t){return tt(t,"remoteDocumentsV14")}function oi(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Um(t,e){const n=e.documentKey.path.toArray();return[t,Va(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $m(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ne(n[i],r[i]),s)return s;return s=ne(n.length,r.length),s||(s=ne(n[n.length-2],r[r.length-2]),s||ne(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ri(r.mutation,s,bt.empty(),Ne.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=sn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=di();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=sn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Rt();const o=bi(),a=function(){return bi()}();return n.forEach((c,u)=>{const l=r.get(u.key);s.has(u.key)&&(l===void 0||l.mutation instanceof Tn)?i=i.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),Ri(l.mutation,u,l.mutation.getFieldMask(),Ne.now())):o.set(u.key,bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var h;return a.set(u,new JP(l,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=bi();let s=new Re((o,a)=>o-a),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let l=r.get(c)||bt.empty();l=a.applyToLocalView(u,l),r.set(c,l);const h=(s.get(a.batchId)||se()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,h=Py();l.forEach(d=>{if(!i.has(d)){const f=Oy(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return k.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sh(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):E.resolve(sn());let a=-1,c=i;return o.next(u=>E.forEach(u,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(l)?E.resolve():this.remoteDocumentCache.getEntry(e,l).next(d=>{c=c.insert(l,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,se())).next(l=>({batchId:a,changes:Ry(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new k(n)).next(r=>{let s=di();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=di();return this.indexManager.getCollectionParents(e,s).next(o=>E.forEach(o,a=>{const c=function(l,h){return new wn(h,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r).next(u=>{u.forEach((l,h)=>{i=i.insert(l,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,Ce.newInvalidDocument(u)))});let o=di();return i.forEach((a,c)=>{const u=s.get(a);u!==void 0&&Ri(u.mutation,c,bt.empty(),Ne.now()),wo(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.serializer=e,this.ar=new Map,this.ur=new Map}getBundleMetadata(e,n){return E.resolve(this.ar.get(n))}saveBundleMetadata(e,n){return this.ar.set(n.id,function(s){return{id:s.id,version:s.version,createTime:$e(s.createTime)}}(n)),E.resolve()}getNamedQuery(e,n){return E.resolve(this.ur.get(n))}saveNamedQuery(e,n){return this.ur.set(n.name,function(s){return{name:s.name,query:Fh(s.bundledQuery),readTime:$e(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.overlays=new Re(k.comparator),this.cr=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sn();return E.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),E.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.cr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.cr.delete(r)),E.resolve()}getOverlaysForCollection(e,n,r){const s=sn(),i=n.length+1,o=new k(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return E.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((u,l)=>u-l);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=i.get(u.largestBatchId);l===null&&(l=sn(),i=i.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=sn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=s)););return E.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.cr.get(s.largestBatchId).delete(r.key);this.cr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Nh(n,r));let i=this.cr.get(n);i===void 0&&(i=se(),this.cr.set(n,i)),this.cr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this.lr=new Ve(Qe.hr),this.Pr=new Ve(Qe.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.lr=this.lr.add(r),this.Pr=this.Pr.add(r)}Tr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Er(new Qe(e,n))}dr(e,n){e.forEach(r=>this.removeReference(r,n))}Ar(e){const n=new k(new de([])),r=new Qe(n,e),s=new Qe(n,e+1),i=[];return this.Pr.forEachInRange([r,s],o=>{this.Er(o),i.push(o.key)}),i}Rr(){this.lr.forEach(e=>this.Er(e))}Er(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}Vr(e){const n=new k(new de([])),r=new Qe(n,e),s=new Qe(n,e+1);let i=se();return this.Pr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Qe(e,0),r=this.lr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.mr=n}static hr(e,n){return k.comparator(e.key,n.key)||ne(e.mr,n.mr)}static Ir(e,n){return ne(e.mr,n.mr)||k.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Ve(Qe.hr)}checkEmpty(e){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xh(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.pr=this.pr.add(new Qe(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.yr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.wr(r),i=s<0?0:s;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.gr-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),s=new Qe(n,Number.POSITIVE_INFINITY),i=[];return this.pr.forEachInRange([r,s],o=>{const a=this.yr(o.mr);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ve(ne);return n.forEach(s=>{const i=new Qe(s,0),o=new Qe(s,Number.POSITIVE_INFINITY);this.pr.forEachInRange([i,o],a=>{r=r.add(a.mr)})}),E.resolve(this.Sr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;k.isDocumentKey(i)||(i=i.child(""));const o=new Qe(new k(i),0);let a=new Ve(ne);return this.pr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.mr)),!0)},o),E.resolve(this.Sr(a))}Sr(e){const n=[];return e.forEach(r=>{const s=this.yr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){W(this.br(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.pr;return E.forEach(n.mutations,s=>{const i=new Qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.pr=r})}Cn(e){}containsKey(e,n){const r=new Qe(n,0),s=this.pr.firstAfterOrEqual(r);return E.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,E.resolve()}br(e,n){return this.wr(e)}wr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}yr(e){const n=this.wr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.Dr=e,this.docs=function(){return new Re(k.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Dr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():Ce.newInvalidDocument(n))}getEntries(e,n){let r=Rt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ce.newInvalidDocument(s))}),E.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rt();const o=n.path,a=new k(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Th(ny(l),r)<=0||(s.has(l.key)||wo(n,l))&&(i=i.insert(l.key,l.mutableCopy()))}return E.resolve(i)}getAllFromCollectionGroup(e,n,r,s){$()}vr(e,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rS(this)}getSize(e){return E.resolve(this.size)}}class rS extends oE{constructor(e){super(),this.sr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.sr.addEntry(e,s)):this.sr.removeEntry(r)}),E.waitFor(n)}getFromCache(e,n){return this.sr.getEntry(e,n)}getAllFromCache(e,n){return this.sr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.persistence=e,this.Cr=new ur(n=>Lr(n),vo),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new Uh,this.targetCount=0,this.Or=jr.xn()}forEachTarget(e,n){return this.Cr.forEach((r,s)=>n(s)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.Fr)}allocateTargetId(e){return this.highestTargetId=this.Or.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Fr&&(this.Fr=n),E.resolve()}Ln(e){this.Cr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Or=new jr(n),this.highestTargetId=n),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}addTargetData(e,n){return this.Ln(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.Ln(n),E.resolve()}removeTargetData(e,n){return this.Cr.delete(n.target),this.Mr.Ar(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Cr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Cr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),E.waitFor(i).next(()=>s)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const r=this.Cr.get(n)||null;return E.resolve(r)}addMatchingKeys(e,n,r){return this.Mr.Tr(n,r),E.resolve()}removeMatchingKeys(e,n,r){this.Mr.dr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Mr.Ar(n),E.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Mr.Vr(n);return E.resolve(r)}containsKey(e,n){return E.resolve(this.Mr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.Nr={},this.overlays={},this.Br=new At(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=e(this),this.kr=new sS(this),this.indexManager=new qP,this.remoteDocumentCache=function(s){return new nS(s)}(r=>this.referenceDelegate.qr(r)),this.serializer=new Zy(n),this.Qr=new ZP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Nr[e.toKey()];return r||(r=new tS(n,this.referenceDelegate),this.Nr[e.toKey()]=r),r}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(e,n,r){P("MemoryPersistence","Starting transaction:",e);const s=new iS(this.Br.next());return this.referenceDelegate.Kr(),r(s).next(i=>this.referenceDelegate.$r(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ur(e,n){return E.or(Object.values(this.Nr).map(r=>()=>r.containsKey(e,n)))}}class iS extends sy{constructor(e){super(),this.currentSequenceNumber=e}}class bc{constructor(e){this.persistence=e,this.Wr=new Uh,this.Gr=null}static zr(e){return new bc(e)}get jr(){if(this.Gr)return this.Gr;throw $()}addReference(e,n,r){return this.Wr.addReference(r,n),this.jr.delete(r.toString()),E.resolve()}removeReference(e,n,r){return this.Wr.removeReference(r,n),this.jr.add(r.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.jr.add(n.toString()),E.resolve()}removeTarget(e,n){this.Wr.Ar(n.targetId).forEach(s=>this.jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Kr(){this.Gr=new Set}$r(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.jr,r=>{const s=k.fromPath(r);return this.Hr(e,s).next(i=>{i||n.removeEntry(s,G.min())})}).next(()=>(this.Gr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hr(e,n).next(r=>{r?this.jr.delete(n.toString()):this.jr.add(n.toString())})}qr(e){return 0}Hr(e,n){return E.or([()=>E.resolve(this.Wr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ur(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.serializer=e}B(e,n,r,s){const i=new yc("createOrUpgrade",n);r<1&&s>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rm,{unique:!0}),c.createObjectStore("documentMutations")}(e),qm(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=E.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),qm(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:G.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").G().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rm,{unique:!0});const h=u.store("mutations"),d=l.map(f=>h.put(f));return E.waitFor(d)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.Yr(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Zr(i)))),r<7&&s>=7&&(o=o.next(()=>this.Xr(i))),r<8&&s>=8&&(o=o.next(()=>this.ei(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.ti(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:jR});u.createIndex("collectionPathOverlayIndex",KR,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",zR,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:DR});u.createIndex("documentKeyIndex",NR),u.createIndex("collectionGroupIndex",kR)}(e)).next(()=>this.ni(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ri(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:BR}).createIndex("sequenceNumberIndex",UR,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:$R}).createIndex("documentKeyIndex",qR,{unique:!1})}(e))),o}Zr(e){let n=0;return e.store("remoteDocuments").Z((r,s)=>{n+=Da(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Yr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next(s=>E.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",o).next(a=>E.forEach(a,c=>{W(c.userId===i.userId);const u=Ir(this.serializer,c);return rE(e,i.userId,u).next(()=>{})}))}))}Xr(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.Z((o,a)=>{const c=new de(o),u=function(h){return[0,Et(h)]}(c);i.push(n.get(u).next(l=>l?E.resolve():(h=>n.put({targetId:0,path:Et(h),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>E.waitFor(i))})}ei(e,n){e.createObjectStore("collectionParents",{keyPath:LR});const r=n.store("collectionParents"),s=new Bh,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Et(c)})}};return n.store("remoteDocuments").Z({Y:!0},(o,a)=>{const c=new de(o);return i(c.popLast())}).next(()=>n.store("documentMutations").Z({Y:!0},([o,a,c],u)=>{const l=rn(a);return i(l.popLast())}))}ti(e){const n=e.store("targets");return n.Z((r,s)=>{const i=mi(s),o=eE(this.serializer,i);return n.put(o)})}ni(e,n){const r=n.store("remoteDocuments"),s=[];return r.Z((i,o)=>{const a=n.store("remoteDocumentsV14"),c=function(h){return h.document?new k(de.fromString(h.document.name).popFirst(5)):h.noDocument?k.fromSegments(h.noDocument.path):h.unknownDocument?k.fromSegments(h.unknownDocument.path):$()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>E.waitFor(s))}ri(e,n){const r=n.store("mutations"),s=aE(this.serializer),i=new uE(bc.zr,this.serializer.ct);return r.G().next(o=>{const a=new Map;return o.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:se();Ir(this.serializer,c).keys().forEach(h=>l=l.add(h)),a.set(c.userId,l)}),E.forEach(a,(c,u)=>{const l=new Ye(u),h=Tc.lt(this.serializer,l),d=i.getIndexManager(l),f=Ac.lt(l,this.serializer,d,i.referenceDelegate);return new cE(s,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new Xu(n,At.ae),c).next()})})}}function qm(t){t.createObjectStore("targetDocuments",{keyPath:MR}).createIndex("documentTargetsIndex",FR,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",OR,{unique:!0}),t.createObjectStore("targetGlobal")}const hu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $h{constructor(e,n,r,s,i,o,a,c,u,l,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ii=i,this.window=o,this.document=a,this.si=u,this.oi=l,this._i=h,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=d=>Promise.resolve(),!$h.v())throw new b(v.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QP(this,s),this.Pi=n+"main",this.serializer=new Zy(c),this.Ii=new Kt(this.Pi,this._i,new oS(this.serializer)),this.kr=new KP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=aE(this.serializer),this.Qr=new OP,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,l===!1&&Le("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ei().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new b(v.FAILED_PRECONDITION,hu);return this.di(),this.Ai(),this.Ri(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.kr.getHighestSequenceNumber(e))}).then(e=>{this.Br=new At(e,this.si)}).then(()=>{this.Lr=!0}).catch(e=>(this.Ii&&this.Ii.close(),Promise.reject(e)))}Vi(e){return this.hi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ii.k(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.Ei()}))}Ei(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yo(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.mi(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.hi(!1)))})}).next(()=>this.fi(e)).next(n=>this.isPrimary&&!n?this.gi(e).next(()=>!1):!!n&&this.pi(e).next(()=>!0))).catch(e=>{if(cr(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.hi(e)),this.isPrimary=e})}mi(e){return ai(e).get("owner").next(n=>E.resolve(this.yi(n)))}wi(e){return Yo(e).delete(this.clientId)}async Si(){if(this.isPrimary&&!this.bi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=tt(n,"clientMetadata");return r.G().next(s=>{const i=this.Di(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return E.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ti)for(const n of e)this.Ti.removeItem(this.vi(n.clientId))}}Ri(){this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ei().then(()=>this.Si()).then(()=>this.Ri()))}yi(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.oi?E.resolve(!0):ai(e).get("owner").next(n=>{if(n!==null&&this.bi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new b(v.FAILED_PRECONDITION,hu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yo(e).G().next(r=>this.Di(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&P("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),await this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Xu(e,At.ae);return this.gi(n).next(()=>this.wi(n))}),this.Ii.close(),this.Oi()}Di(e,n){return e.filter(r=>this.bi(r.updateTimeMs,n)&&!this.Ci(r.clientId))}Ni(){return this.runTransaction("getActiveClients","readonly",e=>Yo(e).G().next(n=>this.Di(n,18e5).map(r=>r.clientId)))}get started(){return this.Lr}getMutationQueue(e,n){return Ac.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jP(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Tc.lt(this.serializer,e)}getBundleCache(){return this.Qr}runTransaction(e,n,r){P("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(c){return c===15?WR:c===14?uy:c===13?cy:c===12?GR:c===11?ay:void $()}(this._i);let o;return this.Ii.runTransaction(e,s,i,a=>(o=new Xu(a,this.Br?this.Br.next():At.ae),n==="readwrite-primary"?this.mi(o).next(c=>!!c||this.fi(o)).next(c=>{if(!c)throw Le(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.hi(!1)),new b(v.FAILED_PRECONDITION,ry);return r(o)}).next(c=>this.pi(o).next(()=>c)):this.Bi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Bi(e){return ai(e).get("owner").next(n=>{if(n!==null&&this.bi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.yi(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new b(v.FAILED_PRECONDITION,hu)})}pi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ai(e).put("owner",n)}static v(){return Kt.v()}gi(e){const n=ai(e);return n.get("owner").next(r=>this.yi(r)?(P("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):E.resolve())}bi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Le(`Detected an update time that is in the future: ${e} > ${r}`),!1))}di(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ui=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ei()))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground=this.document.visibilityState==="visible")}Mi(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}Ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ai=()=>{this.Fi();const n=/(?:Version|Mobile)\/1[456]/;kA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ai))}xi(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}Ci(e){var n;try{const r=((n=this.Ti)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Le("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Fi(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Le("Failed to set zombie client id.",e)}}Oi(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ai(t){return tt(t,"owner")}function Yo(t){return tt(t,"clientMetadata")}function qh(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Li=r,this.ki=s}static qi(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.Qi=!1}initialize(e,n){this.Ki=e,this.indexManager=n,this.Qi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.$i(e,n).next(i=>i||this.Ui(e,n,s,r)).next(i=>i||this.Wi(e,n))}$i(e,n){if(pm(n))return E.resolve(null);let r=St(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ca(n,null,"F"),r=St(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.Ki.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Gi(n,a);return this.zi(n,u,o,c.readTime)?this.$i(e,Ca(n,null,"F")):this.ji(e,u,n,c)}))})))}Ui(e,n,r,s){return pm(n)||s.isEqual(G.min())?this.Wi(e,n):this.Ki.getDocuments(e,r).next(i=>{const o=this.Gi(n,i);return this.zi(n,o,r,s)?this.Wi(e,n):(Qu()<=pe.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sl(n)),this.ji(e,o,n,ty(s,-1)))})}Gi(e,n){let r=new Ve(Ay(e));return n.forEach((s,i)=>{wo(e,i)&&(r=r.add(i))}),r}zi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Wi(e,n){return Qu()<=pe.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",sl(n)),this.Ki.getDocumentsMatchingQuery(e,n,Nt.min())}ji(e,n,r,s){return this.Ki.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,r,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new Re(ne),this.Yi=new ur(i=>Lr(i),vo),this.Zi=new Map,this.Xi=e.getRemoteDocumentCache(),this.kr=e.getTargetCache(),this.Qr=e.getBundleCache(),this.es(r)}es(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cE(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function hE(t,e,n,r){return new aS(t,e,n,r)}async function dE(t,e){const n=F(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.es(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=se();for(const u of s){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of i){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({ts:u,removedBatchIds:o,addedBatchIds:a}))})})}function cS(t,e){const n=F(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){const h=u.batch,d=h.keys();let f=E.resolve();return d.forEach(_=>{f=f.next(()=>l.getEntry(c,_)).next(y=>{const I=u.docVersions.get(_);W(I!==null),y.version.compareTo(I)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=se();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function fE(t){const e=F(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.kr.getLastRemoteSnapshotVersion(n))}function uS(t,e){const n=F(t),r=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];e.targetChanges.forEach((l,h)=>{const d=s.get(h);if(!d)return;a.push(n.kr.removeMatchingKeys(i,l.removedDocuments,h).next(()=>n.kr.addMatchingKeys(i,l.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(He.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),s=s.insert(h,f),function(y,I,R){return y.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(d,f,l)&&a.push(n.kr.updateTargetData(i,f))});let c=Rt(),u=se();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,l))}),a.push(mE(i,o,e.documentUpdates).next(l=>{c=l.ns,u=l.rs})),!r.isEqual(G.min())){const l=n.kr.getLastRemoteSnapshotVersion(i).next(h=>n.kr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(l)}return E.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ji=s,i))}function mE(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Rt();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(G.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ns:o,rs:s}})}function lS(t,e){const n=F(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xs(t,e){const n=F(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.kr.getTargetData(r,e).next(i=>i?(s=i,E.resolve(s)):n.kr.allocateTargetId(r).next(o=>(s=new gn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.kr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Ds(t,e,n){const r=F(t),s=r.Ji.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!cr(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function Na(t,e,n){const r=F(t);let s=G.min(),i=se();return r.persistence.runTransaction("Execute query","readonly",o=>function(c,u,l){const h=F(c),d=h.Yi.get(l);return d!==void 0?E.resolve(h.Ji.get(d)):h.kr.getTargetData(u,l)}(r,o,St(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?s:G.min(),n?i:se())).next(a=>(_E(r,Ty(e),a),{documents:a,ss:i})))}function pE(t,e){const n=F(t),r=F(n.kr),s=n.Ji.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ut(i,e).next(o=>o?o.target:null))}function gE(t,e){const n=F(t),r=n.Zi.get(e)||G.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Xi.getAllFromCollectionGroup(s,e,ty(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(_E(n,e,s),s))}function _E(t,e,n){let r=t.Zi.get(e)||G.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Zi.set(e,r)}async function hS(t,e,n,r){const s=F(t);let i=se(),o=Rt();for(const u of n){const l=e.os(u.metadata.name);u.document&&(i=i.add(l));const h=e._s(u);h.setReadTime(e.us(u.metadata.readTime)),o=o.insert(l,h)}const a=s.Xi.newChangeBuffer({trackRemovals:!0}),c=await xs(s,function(l){return St(js(de.fromString(`__bundle__/docs/${l}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",u=>mE(u,a,o).next(l=>(a.apply(u),l)).next(l=>s.kr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>s.kr.addMatchingKeys(u,i,c.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(u,l.ns,l.rs)).next(()=>l.ns)))}async function dS(t,e,n=se()){const r=await xs(t,St(Fh(e.bundledQuery))),s=F(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=$e(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Qr.saveNamedQuery(i,e);const a=r.withResumeToken(He.EMPTY_BYTE_STRING,o);return s.Ji=s.Ji.insert(a.targetId,a),s.kr.updateTargetData(i,a).next(()=>s.kr.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.kr.addMatchingKeys(i,n,r.targetId)).next(()=>s.Qr.saveNamedQuery(i,e))})}function jm(t,e){return`firestore_clients_${t}_${e}`}function Km(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function du(t,e){return`firestore_targets_${t}_${e}`}class ka{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static cs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new b(s.error.code,s.error.message))),o?new ka(e,n,s.state,i):(Le("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ls(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pi{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static cs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new b(r.error.code,r.error.message))),i?new Pi(e,r.state,s):(Le("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ls(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Oa{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static cs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Ch();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=iy(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Oa(e,i):(Le("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Kh{constructor(e,n){this.clientId=e,this.onlineState=n}static cs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Kh(n.clientId,n.onlineState):(Le("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hl{constructor(){this.activeTargetIds=Ch()}hs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ps(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ls(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fu{constructor(e,n,r,s,i){this.window=e,this.ii=n,this.persistenceKey=r,this.Is=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new Re(ne),this.started=!1,this.As=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Rs=jm(this.persistenceKey,this.Is),this.Vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new hl),this.fs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.gs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.ps=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.ys=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.ws=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ni();for(const r of e){if(r===this.Is)continue;const s=this.getItem(jm(this.persistenceKey,r));if(s){const i=Oa.cs(r,s);i&&(this.ds=this.ds.insert(i.clientId,i))}}this.Ss();const n=this.storage.getItem(this.ys);if(n){const r=this.bs(n);r&&this.Ds(r)}for(const r of this.As)this.Es(r);this.As=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.vs(this.ds)}isActiveQueryTarget(e){let n=!1;return this.ds.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Cs(e,"pending")}updateMutationState(e,n,r){this.Cs(e,n,r),this.Fs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(du(this.persistenceKey,e));if(r){const s=Pi.cs(e,r);s&&(n=s.state)}}return this.Ms.hs(e),this.Ss(),n}removeLocalQueryTarget(e){this.Ms.Ps(e),this.Ss()}isLocalQueryTarget(e){return this.Ms.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(du(this.persistenceKey,e))}updateQueryState(e,n,r){this.xs(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Fs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Os(e)}notifyBundleLoaded(e){this.Ns(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return P("SharedClientState","READ",e,n),n}setItem(e,n){P("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){P("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Es(e){const n=e;if(n.storageArea===this.storage){if(P("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Rs)return void Le("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.fs.test(n.key)){if(n.newValue==null){const r=this.Bs(n.key);return this.Ls(r,null)}{const r=this.ks(n.key,n.newValue);if(r)return this.Ls(r.clientId,r)}}else if(this.gs.test(n.key)){if(n.newValue!==null){const r=this.qs(n.key,n.newValue);if(r)return this.Qs(r)}}else if(this.ps.test(n.key)){if(n.newValue!==null){const r=this.Ks(n.key,n.newValue);if(r)return this.$s(r)}}else if(n.key===this.ys){if(n.newValue!==null){const r=this.bs(n.newValue);if(r)return this.Ds(r)}}else if(n.key===this.Vs){const r=function(i){let o=At.ae;if(i!=null)try{const a=JSON.parse(i);W(typeof a=="number"),o=a}catch(a){Le("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==At.ae&&this.sequenceNumberHandler(r)}else if(n.key===this.ws){const r=this.Us(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Ws(s)))}}}else this.As.push(n)})}}get Ms(){return this.ds.get(this.Is)}Ss(){this.setItem(this.Rs,this.Ms.ls())}Cs(e,n,r){const s=new ka(this.currentUser,e,n,r),i=Km(this.persistenceKey,this.currentUser,e);this.setItem(i,s.ls())}Fs(e){const n=Km(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Os(e){const n={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(n))}xs(e,n,r){const s=du(this.persistenceKey,e),i=new Pi(e,n,r);this.setItem(s,i.ls())}Ns(e){const n=JSON.stringify(Array.from(e));this.setItem(this.ws,n)}Bs(e){const n=this.fs.exec(e);return n?n[1]:null}ks(e,n){const r=this.Bs(e);return Oa.cs(r,n)}qs(e,n){const r=this.gs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return ka.cs(new Ye(i),s,n)}Ks(e,n){const r=this.ps.exec(e),s=Number(r[1]);return Pi.cs(s,n)}bs(e){return Kh.cs(e)}Us(e){return JSON.parse(e)}async Qs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Gs(e.batchId,e.state,e.error);P("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}$s(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}Ls(e,n){const r=n?this.ds.insert(e,n):this.ds.remove(e),s=this.vs(this.ds),i=this.vs(r),o=[],a=[];return i.forEach(c=>{s.has(c)||o.push(c)}),s.forEach(c=>{i.has(c)||a.push(c)}),this.syncEngine.js(o,a).then(()=>{this.ds=r})}Ds(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}vs(e){let n=Ch();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class yE{constructor(){this.Hs=new hl,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hs.hs(e),this.Js[e]||"not-current"}updateQueryState(e,n,r){this.Js[e]=n}removeLocalQueryTarget(e){this.Hs.Ps(e)}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){delete this.Js[e]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(e){return this.Hs.activeTargetIds.has(e)}start(){return this.Hs=new hl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{Ys(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(e){this.ro.push(e)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ro)e(0)}no(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ro)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo=null;function mu(){return Xo===null?Xo=function(){return 268435456+Math.round(2147483648*Math.random())}():Xo++,"0x"+Xo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.so=e.so,this.oo=e.oo}_o(e){this.ao=e}uo(e){this.co=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.so(e)}ho(){this.ao()}Po(e){this.co(e)}Io(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class gS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http";this.To=r+"://"+n.host,this.Eo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get Ao(){return!1}Ro(n,r,s,i,o){const a=mu(),c=this.Vo(n,r);P("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={};return this.mo(u,i,o),this.fo(n,c,u,s).then(l=>(P("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Ht("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",s),l})}po(n,r,s,i,o,a){return this.Ro(n,r,s,i,o)}mo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}Vo(n,r){const s=mS[n];return`${this.To}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}fo(e,n,r,s){const i=mu();return new Promise((o,a)=>{const c=new dR;c.setWithCredentials(!0),c.listenOnce(uR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case uu.NO_ERROR:const l=c.getResponseJson();P(ut,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(l)),o(l);break;case uu.TIMEOUT:P(ut,`RPC '${e}' ${i} timed out`),a(new b(v.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const h=c.getStatus();if(P(ut,`RPC '${e}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const _=function(I){const R=I.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(R)>=0?R:v.UNKNOWN}(f.status);a(new b(_,f.message))}else a(new b(v.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new b(v.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{P(ut,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);P(ut,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}yo(e,n,r){const s=mu(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aR(),a=cR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new hR({})),this.mo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const l=i.join("");P(ut,`Creating RPC '${e}' stream ${s}: ${l}`,c);const h=o.createWebChannel(l,c);let d=!1,f=!1;const _=new pS({so:I=>{f?P(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(d||(P(ut,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),P(ut,`RPC '${e}' stream ${s} sending:`,I),h.send(I))},oo:()=>h.close()}),y=(I,R,V)=>{I.listen(R,N=>{try{V(N)}catch(x){setTimeout(()=>{throw x},0)}})};return y(h,Ko.EventType.OPEN,()=>{f||P(ut,`RPC '${e}' stream ${s} transport opened.`)}),y(h,Ko.EventType.CLOSE,()=>{f||(f=!0,P(ut,`RPC '${e}' stream ${s} transport closed`),_.Po())}),y(h,Ko.EventType.ERROR,I=>{f||(f=!0,Ht(ut,`RPC '${e}' stream ${s} transport errored:`,I),_.Po(new b(v.UNAVAILABLE,"The operation could not be completed")))}),y(h,Ko.EventType.MESSAGE,I=>{var R;if(!f){const V=I.data[0];W(!!V);const N=V,x=N.error||((R=N[0])===null||R===void 0?void 0:R.error);if(x){P(ut,`RPC '${e}' stream ${s} received error:`,x);const j=x.status;let J=function(Q){const re=Ke[Q];if(re!==void 0)return Ly(re)}(j),oe=x.message;J===void 0&&(J=v.INTERNAL,oe="Unknown error status: "+j+" with message "+x.message),f=!0,_.Po(new b(J,oe)),h.close()}else P(ut,`RPC '${e}' stream ${s} received:`,V),_.Io(V)}}),y(a,lR.STAT_EVENT,I=>{I.stat===Zf.PROXY?P(ut,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Zf.NOPROXY&&P(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.ho()},0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(){return typeof window<"u"?window:null}function aa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){return new AP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ii=e,this.timerId=n,this.wo=r,this.So=s,this.bo=i,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}reset(){this.Do=0}Fo(){this.Do=this.bo}Mo(e){this.cancel();const n=Math.floor(this.Do+this.xo()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-r);s>0&&P("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Do} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.vo=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}Oo(){this.vo!==null&&(this.vo.skipDelay(),this.vo=null)}cancel(){this.vo!==null&&(this.vo.cancel(),this.vo=null)}xo(){return(Math.random()-.5)*this.Do}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r,s,i,o,a,c){this.ii=e,this.No=r,this.Bo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Lo=0,this.ko=null,this.qo=null,this.stream=null,this.Qo=new zh(e,n)}Ko(){return this.state===1||this.state===5||this.$o()}$o(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Uo()}async stop(){this.Ko()&&await this.close(0)}Wo(){this.state=0,this.Qo.reset()}Go(){this.$o()&&this.ko===null&&(this.ko=this.ii.enqueueAfterDelay(this.No,6e4,()=>this.zo()))}jo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.$o())return this.close(0)}Ho(){this.ko&&(this.ko.cancel(),this.ko=null)}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}async close(e,n){this.Ho(),this.Jo(),this.Qo.cancel(),this.Lo++,e!==4?this.Qo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(Le(n.toString()),Le("Using maximum backoff delay to prevent overloading the backend."),this.Qo.Fo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.uo(n)}Yo(){}auth(){this.state=1;const e=this.Zo(this.Lo),n=this.Lo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Lo===n&&this.Xo(r,s)},r=>{e(()=>{const s=new b(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.e_(s)})})}Xo(e,n){const r=this.Zo(this.Lo);this.stream=this.t_(e,n),this.stream._o(()=>{r(()=>(this.state=2,this.qo=this.ii.enqueueAfterDelay(this.Bo,1e4,()=>(this.$o()&&(this.state=3),Promise.resolve())),this.listener._o()))}),this.stream.uo(s=>{r(()=>this.e_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Uo(){this.state=5,this.Qo.Mo(async()=>{this.state=0,this.start()})}e_(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Zo(e){return n=>{this.ii.enqueueAndForget(()=>this.Lo===e?n():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _S extends vE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}t_(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.Qo.reset();const n=PP(this.serializer,e),r=function(i){if(!("targetChange"in i))return G.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?$e(o.readTime):G.min()}(e);return this.listener.n_(n,r)}r_(e){const n={};n.database=no(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Pa(c)?{documents:Wy(i,c)}:{query:Hy(i,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qy(i,o.resumeToken);const u=il(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(G.min())>0){a.readTime=Vs(i,o.snapshotVersion.toTimestamp());const u=il(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=CP(this.serializer,e);r&&(n.labels=r),this.jo(n)}i_(e){const n={};n.database=no(this.serializer),n.removeTarget=e,this.jo(n)}}class yS extends vE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.s_=!1}get o_(){return this.s_}start(){this.s_=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.s_&&this.__([])}t_(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(W(!!e.streamToken),this.lastStreamToken=e.streamToken,this.s_){this.Qo.reset();const n=SP(e.writeResults,e.commitTime),r=$e(e.commitTime);return this.listener.a_(r,n)}return W(!e.writeResults||e.writeResults.length===0),this.s_=!0,this.listener.u_()}c_(){const e={};e.database=no(this.serializer),this.jo(e)}__(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ro(this.serializer,r))};this.jo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.l_=!1}h_(){if(this.l_)throw new b(v.FAILED_PRECONDITION,"The client has already been terminated.")}Ro(e,n,r){return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Ro(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(v.UNKNOWN,s.toString())})}po(e,n,r,s){return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.po(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new b(v.UNKNOWN,i.toString())})}terminate(){this.l_=!0}}class vS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.I_=0,this.T_=null,this.E_=!0}d_(){this.I_===0&&(this.A_("Unknown"),this.T_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.T_=null,this.R_("Backend didn't respond within 10 seconds."),this.A_("Offline"),Promise.resolve())))}V_(e){this.state==="Online"?this.A_("Unknown"):(this.I_++,this.I_>=1&&(this.m_(),this.R_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.A_("Offline")))}set(e){this.m_(),this.I_=0,e==="Online"&&(this.E_=!1),this.A_(e)}A_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}R_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.E_?(Le(n),this.E_=!1):P("OnlineStateTracker",n)}m_(){this.T_!==null&&(this.T_.cancel(),this.T_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.f_=[],this.g_=new Map,this.p_=new Set,this.y_=[],this.w_=i,this.w_.Ys(o=>{r.enqueueAndForget(async()=>{lr(this)&&(P("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=F(c);u.p_.add(4),await Gs(u),u.S_.set("Unknown"),u.p_.delete(4),await Po(u)}(this))})}),this.S_=new vS(r,s)}}async function Po(t){if(lr(t))for(const e of t.y_)await e(!0)}async function Gs(t){for(const e of t.y_)await e(!1)}function Rc(t,e){const n=F(t);n.g_.has(e.targetId)||(n.g_.set(e.targetId,e),Hh(n)?Wh(n):Hs(n).$o()&&Gh(n,e))}function so(t,e){const n=F(t),r=Hs(n);n.g_.delete(e),r.$o()&&IE(n,e),n.g_.size===0&&(r.$o()?r.Go():lr(n)&&n.S_.set("Unknown"))}function Gh(t,e){if(t.b_.Be(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hs(t).r_(e)}function IE(t,e){t.b_.Be(e),Hs(t).i_(e)}function Wh(t){t.b_=new vP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.g_.get(e)||null,rt:()=>t.datastore.serializer.databaseId}),Hs(t).start(),t.S_.d_()}function Hh(t){return lr(t)&&!Hs(t).Ko()&&t.g_.size>0}function lr(t){return F(t).p_.size===0}function wE(t){t.b_=void 0}async function wS(t){t.g_.forEach((e,n)=>{Gh(t,e)})}async function TS(t,e){wE(t),Hh(t)?(t.S_.V_(e),Wh(t)):t.S_.set("Unknown")}async function AS(t,e,n){if(t.S_.set("Online"),e instanceof $y&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.g_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.g_.delete(a),s.b_.removeTarget(a))}(t,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ma(t,r)}else if(e instanceof oa?t.b_.We(e):e instanceof Uy?t.b_.Ze(e):t.b_.je(e),!n.isEqual(G.min()))try{const r=await fE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.b_.st(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=i.g_.get(u);l&&i.g_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const l=i.g_.get(c);if(!l)return;i.g_.set(c,l.withResumeToken(He.EMPTY_BYTE_STRING,l.snapshotVersion)),IE(i,c);const h=new gn(l.target,c,u,l.sequenceNumber);Gh(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){P("RemoteStore","Failed to raise snapshot:",r),await Ma(t,r)}}async function Ma(t,e,n){if(!cr(e))throw e;t.p_.add(1),await Gs(t),t.S_.set("Offline"),n||(n=()=>fE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{P("RemoteStore","Retrying IndexedDB access"),await n(),t.p_.delete(1),await Po(t)})}function TE(t,e){return e().catch(n=>Ma(t,n,e))}async function Ws(t){const e=F(t),n=nr(e);let r=e.f_.length>0?e.f_[e.f_.length-1].batchId:-1;for(;bS(e);)try{const s=await lS(e.localStore,r);if(s===null){e.f_.length===0&&n.Go();break}r=s.batchId,RS(e,s)}catch(s){await Ma(e,s)}AE(e)&&bE(e)}function bS(t){return lr(t)&&t.f_.length<10}function RS(t,e){t.f_.push(e);const n=nr(t);n.$o()&&n.o_&&n.__(e.mutations)}function AE(t){return lr(t)&&!nr(t).Ko()&&t.f_.length>0}function bE(t){nr(t).start()}async function PS(t){nr(t).c_()}async function SS(t){const e=nr(t);for(const n of t.f_)e.__(n.mutations)}async function CS(t,e,n){const r=t.f_.shift(),s=Dh.from(r,e,n);await TE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ws(t)}async function VS(t,e){e&&nr(t).o_&&await async function(r,s){if(function(o){return Fy(o)&&o!==v.ABORTED}(s.code)){const i=r.f_.shift();nr(r).Wo(),await TE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ws(r)}}(t,e),AE(t)&&bE(t)}async function Gm(t,e){const n=F(t);n.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");const r=lr(n);n.p_.add(3),await Gs(n),r&&n.S_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.p_.delete(3),await Po(n)}async function dl(t,e){const n=F(t);e?(n.p_.delete(2),await Po(n)):e||(n.p_.add(2),await Gs(n),n.S_.set("Unknown"))}function Hs(t){return t.D_||(t.D_=function(n,r,s){const i=F(n);return i.h_(),new _S(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{_o:wS.bind(null,t),uo:TS.bind(null,t),n_:AS.bind(null,t)}),t.y_.push(async e=>{e?(t.D_.Wo(),Hh(t)?Wh(t):t.S_.set("Unknown")):(await t.D_.stop(),wE(t))})),t.D_}function nr(t){return t.v_||(t.v_=function(n,r,s){const i=F(n);return i.h_(),new yS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{_o:PS.bind(null,t),uo:VS.bind(null,t),u_:SS.bind(null,t),a_:CS.bind(null,t)}),t.y_.push(async e=>{e?(t.v_.Wo(),await Ws(t)):(await t.v_.stop(),t.f_.length>0&&(P("RemoteStore",`Stopping write stream with ${t.f_.length} pending writes`),t.f_=[]))})),t.v_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Qh(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new b(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qs(t,e){if(Le("AsyncQueue",`${e}: ${t}`),cr(t))return new b(v.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.comparator=e?(n,r)=>e(n,r)||k.comparator(n.key,r.key):(n,r)=>k.comparator(n.key,r.key),this.keyedMap=di(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new ys(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.C_=new Re(k.comparator)}track(e){const n=e.doc.key,r=this.C_.get(n);r?e.type!==0&&r.type===3?this.C_=this.C_.insert(n,e):e.type===3&&r.type!==1?this.C_=this.C_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.C_=this.C_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.C_=this.C_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.C_=this.C_.remove(n):e.type===1&&r.type===2?this.C_=this.C_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.C_=this.C_.insert(n,{type:2,doc:e.doc}):$():this.C_=this.C_.insert(n,e)}F_(){const e=[];return this.C_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ns{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ns(e,n,ys.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Io(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.M_=void 0,this.listeners=[]}}class DS{constructor(){this.queries=new ur(e=>wy(e),Io),this.onlineState="Unknown",this.x_=new Set}}async function Yh(t,e){const n=F(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new xS),s)try{i.M_=await n.onListen(r)}catch(o){const a=Qs(o,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.O_(n.onlineState),i.M_&&e.N_(i.M_)&&Jh(n)}async function Xh(t,e){const n=F(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function NS(t,e){const n=F(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.N_(s)&&(r=!0);o.M_=s}}r&&Jh(n)}function kS(t,e,n){const r=F(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Jh(t){t.x_.forEach(e=>{e.next()})}class Zh{constructor(e,n,r){this.query=e,this.B_=n,this.L_=!1,this.k_=null,this.onlineState="Unknown",this.options=r||{}}N_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.L_?this.q_(e)&&(this.B_.next(e),n=!0):this.Q_(e,this.onlineState)&&(this.K_(e),n=!0),this.k_=e,n}onError(e){this.B_.error(e)}O_(e){this.onlineState=e;let n=!1;return this.k_&&!this.L_&&this.Q_(this.k_,e)&&(this.K_(this.k_),n=!0),n}Q_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.U_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}q_(e){if(e.docChanges.length>0)return!0;const n=this.k_&&this.k_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}K_(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.L_=!0,this.B_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.W_=e,this.byteLength=n}G_(){return"metadata"in this.W_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.serializer=e}os(e){return on(this.serializer,e)}_s(e){return e.metadata.exists?Gy(this.serializer,e.document,!1):Ce.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}us(e){return $e(e)}}class MS{constructor(e,n,r){this.z_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RE(e)}j_(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.W_.namedQuery)this.queries.push(e.W_.namedQuery);else if(e.W_.documentMetadata){this.documents.push({metadata:e.W_.documentMetadata}),e.W_.documentMetadata.exists||++n;const r=de.fromString(e.W_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.W_.document&&(this.documents[this.documents.length-1].document=e.W_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}H_(e){const n=new Map,r=new Hm(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.os(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||se()).add(i);n.set(o,a)}}return n}async complete(){const e=await hS(this.localStore,new Hm(this.serializer),this.documents,this.z_.id),n=this.H_(this.documents);for(const r of this.queries)await dS(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,J_:this.collectionGroups,Y_:e}}}function RE(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.key=e}}class SE{constructor(e){this.key=e}}class CE{constructor(e,n){this.query=e,this.Z_=n,this.X_=null,this.hasCachedResults=!1,this.current=!1,this.ea=se(),this.mutatedKeys=se(),this.ta=Ay(e),this.na=new ys(this.ta)}get ra(){return this.Z_}ia(e,n){const r=n?n.sa:new Wm,s=n?n.na:this.na;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((l,h)=>{const d=s.get(l),f=wo(this.query,h)?h:null,_=!!d&&this.mutatedKeys.has(d.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let I=!1;d&&f?d.data.isEqual(f.data)?_!==y&&(r.track({type:3,doc:f}),I=!0):this.oa(d,f)||(r.track({type:2,doc:f}),I=!0,(c&&this.ta(f,c)>0||u&&this.ta(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),I=!0):d&&!f&&(r.track({type:1,doc:d}),I=!0,(c||u)&&(a=!0)),I&&(f?(o=o.add(f),i=y?i.add(l):i.delete(l)):(o=o.delete(l),i=i.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{na:o,sa:r,zi:a,mutatedKeys:i}}oa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.na;this.na=e.na,this.mutatedKeys=e.mutatedKeys;const i=e.sa.F_();i.sort((u,l)=>function(d,f){const _=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return _(d)-_(f)}(u.type,l.type)||this.ta(u.doc,l.doc)),this._a(r);const o=n?this.aa():[],a=this.ea.size===0&&this.current?1:0,c=a!==this.X_;return this.X_=a,i.length!==0||c?{snapshot:new Ns(this.query,e.na,s,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ua:o}:{ua:o}}O_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({na:this.na,sa:new Wm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ua:[]}}ca(e){return!this.Z_.has(e)&&!!this.na.has(e)&&!this.na.get(e).hasLocalMutations}_a(e){e&&(e.addedDocuments.forEach(n=>this.Z_=this.Z_.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Z_=this.Z_.delete(n)),this.current=e.current)}aa(){if(!this.current)return[];const e=this.ea;this.ea=se(),this.na.forEach(r=>{this.ca(r.key)&&(this.ea=this.ea.add(r.key))});const n=[];return e.forEach(r=>{this.ea.has(r)||n.push(new SE(r))}),this.ea.forEach(r=>{e.has(r)||n.push(new PE(r))}),n}la(e){this.Z_=e.ss,this.ea=se();const n=this.ia(e.documents);return this.applyChanges(n,!0)}ha(){return Ns.fromInitialDocuments(this.query,this.na,this.mutatedKeys,this.X_===0,this.hasCachedResults)}}class FS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LS{constructor(e){this.key=e,this.Pa=!1}}class BS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ia={},this.Ta=new ur(a=>wy(a),Io),this.Ea=new Map,this.da=new Set,this.Aa=new Re(k.comparator),this.Ra=new Map,this.Va=new Uh,this.ma={},this.fa=new Map,this.ga=jr.On(),this.onlineState="Unknown",this.pa=void 0}get isPrimaryClient(){return this.pa===!0}}async function US(t,e){const n=sd(t);let r,s;const i=n.Ta.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.ha();else{const o=await xs(n.localStore,St(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await ed(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Rc(n.remoteStore,o)}return s}async function ed(t,e,n,r,s){t.ya=(h,d,f)=>async function(y,I,R,V){let N=I.view.ia(R);N.zi&&(N=await Na(y.localStore,I.query,!1).then(({documents:J})=>I.view.ia(J,N)));const x=V&&V.targetChanges.get(I.targetId),j=I.view.applyChanges(N,y.isPrimaryClient,x);return fl(y,I.targetId,j.ua),j.snapshot}(t,h,d,f);const i=await Na(t.localStore,e,!0),o=new CE(e,i.ss),a=o.ia(i.documents),c=bo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);fl(t,n,u.ua);const l=new FS(e,n,o);return t.Ta.set(e,l),t.Ea.has(n)?t.Ea.get(n).push(e):t.Ea.set(n,[e]),u.snapshot}async function $S(t,e){const n=F(t),r=n.Ta.get(e),s=n.Ea.get(r.targetId);if(s.length>1)return n.Ea.set(r.targetId,s.filter(i=>!Io(i,e))),void n.Ta.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ds(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),so(n.remoteStore,r.targetId),ks(n,r.targetId)}).catch(ar)):(ks(n,r.targetId),await Ds(n.localStore,r.targetId,!0))}async function qS(t,e,n){const r=id(t);try{const s=await function(o,a){const c=F(o),u=Ne.now(),l=a.reduce((f,_)=>f.add(_.key),se());let h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=Rt(),y=se();return c.Xi.getEntries(f,l).next(I=>{_=I,_.forEach((R,V)=>{V.isValidDocument()||(y=y.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,_)).next(I=>{h=I;const R=[];for(const V of a){const N=_P(V,h.get(V.key).overlayedDocument);N!=null&&R.push(new Tn(V.key,N,fy(N.value.mapValue),De.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,R,a)}).next(I=>{d=I;const R=I.applyToLocalDocumentSet(h,y);return c.documentOverlayCache.saveOverlays(f,I.batchId,R)})}).then(()=>({batchId:d.batchId,changes:Ry(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.ma[o.currentUser.toKey()];u||(u=new Re(ne)),u=u.insert(a,c),o.ma[o.currentUser.toKey()]=u}(r,s.batchId,n),await An(r,s.changes),await Ws(r.remoteStore)}catch(s){const i=Qs(s,"Failed to persist write");n.reject(i)}}async function VE(t,e){const n=F(t);try{const r=await uS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ra.get(i);o&&(W(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Pa=!0:s.modifiedDocuments.size>0?W(o.Pa):s.removedDocuments.size>0&&(W(o.Pa),o.Pa=!1))}),await An(n,r,e)}catch(r){await ar(r)}}function Qm(t,e,n){const r=F(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Ta.forEach((i,o)=>{const a=o.view.O_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=F(o);c.onlineState=a;let u=!1;c.queries.forEach((l,h)=>{for(const d of h.listeners)d.O_(a)&&(u=!0)}),u&&Jh(c)}(r.eventManager,e),s.length&&r.Ia.n_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jS(t,e,n){const r=F(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ra.get(e),i=s&&s.key;if(i){let o=new Re(k.comparator);o=o.insert(i,Ce.newNoDocument(i,G.min()));const a=se().add(i),c=new Ao(G.min(),new Map,new Re(ne),o,a);await VE(r,c),r.Aa=r.Aa.remove(i),r.Ra.delete(e),rd(r)}else await Ds(r.localStore,e,!1).then(()=>ks(r,e,n)).catch(ar)}async function KS(t,e){const n=F(t),r=e.batch.batchId;try{const s=await cS(n.localStore,e);nd(n,r,null),td(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await An(n,s)}catch(s){await ar(s)}}async function zS(t,e,n){const r=F(t);try{const s=await function(o,a){const c=F(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(W(h!==null),l=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);nd(r,e,n),td(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await An(r,s)}catch(s){await ar(s)}}async function GS(t,e){const n=F(t);lr(n.remoteStore)||P("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=F(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();const s=n.fa.get(r)||[];s.push(e),n.fa.set(r,s)}catch(r){const s=Qs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function td(t,e){(t.fa.get(e)||[]).forEach(n=>{n.resolve()}),t.fa.delete(e)}function nd(t,e,n){const r=F(t);let s=r.ma[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.ma[r.currentUser.toKey()]=s}}function ks(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ea.get(e))t.Ta.delete(r),n&&t.Ia.wa(r,n);t.Ea.delete(e),t.isPrimaryClient&&t.Va.Ar(e).forEach(r=>{t.Va.containsKey(r)||xE(t,r)})}function xE(t,e){t.da.delete(e.path.canonicalString());const n=t.Aa.get(e);n!==null&&(so(t.remoteStore,n),t.Aa=t.Aa.remove(e),t.Ra.delete(n),rd(t))}function fl(t,e,n){for(const r of n)r instanceof PE?(t.Va.addReference(r.key,e),WS(t,r)):r instanceof SE?(P("SyncEngine","Document no longer in limbo: "+r.key),t.Va.removeReference(r.key,e),t.Va.containsKey(r.key)||xE(t,r.key)):$()}function WS(t,e){const n=e.key,r=n.path.canonicalString();t.Aa.get(n)||t.da.has(r)||(P("SyncEngine","New document in limbo: "+n),t.da.add(r),rd(t))}function rd(t){for(;t.da.size>0&&t.Aa.size<t.maxConcurrentLimboResolutions;){const e=t.da.values().next().value;t.da.delete(e);const n=new k(de.fromString(e)),r=t.ga.next();t.Ra.set(r,new LS(n)),t.Aa=t.Aa.insert(n,r),Rc(t.remoteStore,new gn(St(js(n.path)),r,"TargetPurposeLimboResolution",At.ae))}}async function An(t,e,n){const r=F(t),s=[],i=[],o=[];r.Ta.isEmpty()||(r.Ta.forEach((a,c)=>{o.push(r.ya(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const l=jh.qi(c.targetId,u);i.push(l)}}))}),await Promise.all(o),r.Ia.n_(s),await async function(c,u){const l=F(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>E.forEach(u,d=>E.forEach(d.Li,f=>l.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>E.forEach(d.ki,f=>l.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!cr(h))throw h;P("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=l.Ji.get(d),_=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(_);l.Ji=l.Ji.insert(d,y)}}}(r.localStore,i))}async function HS(t,e){const n=F(t);if(!n.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());const r=await dE(n.localStore,e);n.currentUser=e,function(i,o){i.fa.forEach(a=>{a.forEach(c=>{c.reject(new b(v.CANCELLED,o))})}),i.fa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await An(n,r.ts)}}function QS(t,e){const n=F(t),r=n.Ra.get(e);if(r&&r.Pa)return se().add(r.key);{let s=se();const i=n.Ea.get(e);if(!i)return s;for(const o of i){const a=n.Ta.get(o);s=s.unionWith(a.view.ra)}return s}}async function YS(t,e){const n=F(t),r=await Na(n.localStore,e.query,!0),s=e.view.la(r);return n.isPrimaryClient&&fl(n,e.targetId,s.ua),s}async function XS(t,e){const n=F(t);return gE(n.localStore,e).then(r=>An(n,r))}async function JS(t,e,n,r){const s=F(t),i=await function(a,c){const u=F(a),l=F(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>l.Dn(h,c).next(d=>d?u.localDocuments.getDocuments(h,d):E.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Ws(s.remoteStore):n==="acknowledged"||n==="rejected"?(nd(s,e,r||null),td(s,e),function(a,c){F(F(a).mutationQueue).Cn(c)}(s.localStore,e)):$(),await An(s,i)):P("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ZS(t,e){const n=F(t);if(sd(n),id(n),e===!0&&n.pa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Ym(n,r.toArray());n.pa=!0,await dl(n.remoteStore,!0);for(const i of s)Rc(n.remoteStore,i)}else if(e===!1&&n.pa!==!1){const r=[];let s=Promise.resolve();n.Ea.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(ks(n,o),Ds(n.localStore,o,!0))),so(n.remoteStore,o)}),await s,await Ym(n,r),function(o){const a=F(o);a.Ra.forEach((c,u)=>{so(a.remoteStore,u)}),a.Va.Rr(),a.Ra=new Map,a.Aa=new Re(k.comparator)}(n),n.pa=!1,await dl(n.remoteStore,!1)}}async function Ym(t,e,n){const r=F(t),s=[],i=[];for(const o of e){let a;const c=r.Ea.get(o);if(c&&c.length!==0){a=await xs(r.localStore,St(c[0]));for(const u of c){const l=r.Ta.get(u),h=await YS(r,l);h.snapshot&&i.push(h.snapshot)}}else{const u=await pE(r.localStore,o);a=await xs(r.localStore,u),await ed(r,DE(u),o,!1,a.resumeToken)}s.push(a)}return r.Ia.n_(i),s}function DE(t){return Iy(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function eC(t){return function(n){return F(F(n).persistence).Ni()}(F(t).localStore)}async function tC(t,e,n,r){const s=F(t);if(s.pa)return void P("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ea.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await gE(s.localStore,Ty(i[0])),a=Ao.createSynthesizedRemoteEventForCurrentChange(e,n==="current",He.EMPTY_BYTE_STRING);await An(s,o,a);break}case"rejected":await Ds(s.localStore,e,!0),ks(s,e,r);break;default:$()}}async function nC(t,e,n){const r=sd(t);if(r.pa){for(const s of e){if(r.Ea.has(s)){P("SyncEngine","Adding an already active target "+s);continue}const i=await pE(r.localStore,s),o=await xs(r.localStore,i);await ed(r,DE(i),o.targetId,!1,o.resumeToken),Rc(r.remoteStore,o)}for(const s of n)r.Ea.has(s)&&await Ds(r.localStore,s,!1).then(()=>{so(r.remoteStore,s),ks(r,s)}).catch(ar)}}function sd(t){const e=F(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jS.bind(null,e),e.Ia.n_=NS.bind(null,e.eventManager),e.Ia.wa=kS.bind(null,e.eventManager),e}function id(t){const e=F(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zS.bind(null,e),e}function rC(t,e,n){const r=F(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await function(f,_){const y=F(f),I=$e(_.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",R=>y.Qr.getBundleMetadata(R,_.id)).then(R=>!!R&&R.createTime.compareTo(I)>=0)}(i.localStore,c))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(RE(c));const u=new MS(c,i.localStore,o.serializer);let l=await o.Sa();for(;l;){const d=await u.j_(l);d&&a._updateProgress(d),l=await o.Sa()}const h=await u.complete();return await An(i,h.Y_,void 0),await function(f,_){const y=F(f);return y.persistence.runTransaction("Save bundle","readwrite",I=>y.Qr.saveBundleMetadata(I,_))}(i.localStore,c),a._completeWith(h.progress),Promise.resolve(h.J_)}catch(c){return Ht("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class ml{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ro(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return hE(this.persistence,new lE,e.initialUser,this.serializer)}createPersistence(e){return new uE(bc.zr,this.serializer)}createSharedClientState(e){return new yE}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class NE extends ml{constructor(e,n,r){super(),this.ba=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ba.initialize(this,e),await id(this.ba.syncEngine),await Ws(this.ba.remoteStore),await this.persistence.Vi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return hE(this.persistence,new lE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new GP(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new CR(n,this.persistence);return new SR(e.asyncQueue,r)}createPersistence(e){const n=qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new $h(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,EE(),aa(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new yE}}class sC extends NE{constructor(e,n){super(e,n,!1),this.ba=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.ba.syncEngine;this.sharedClientState instanceof fu&&(this.sharedClientState.syncEngine={Gs:JS.bind(null,n),zs:tC.bind(null,n),js:nC.bind(null,n),Ni:eC.bind(null,n),Ws:XS.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Vi(async r=>{await ZS(this.ba.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=EE();if(!fu.v(n))throw new b(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fu(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class od{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HS.bind(null,this.syncEngine),await dl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DS}()}createDatastore(e){const n=Ro(e.databaseInfo.databaseId),r=function(i){return new gS(i)}(e.databaseInfo);return function(i,o,a,c){return new ES(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new IS(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Qm(this.syncEngine,n,0),function(){return zm.v()?new zm:new fS}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,l){const h=new BS(s,i,o,a,c,u);return l&&(h.pa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=F(n);P("RemoteStore","RemoteStore shutting down."),r.p_.add(5),await Gs(r),r.w_.shutdown(),r.S_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Da(this.observer.next,e)}error(e){this.observer.error?this.Da(this.observer.error,e):Le("Uncaught Error in snapshot listener:",e.toString())}va(){this.muted=!0}Da(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.Ca=e,this.serializer=n,this.metadata=new Je,this.buffer=new Uint8Array,this.Fa=function(){return new TextDecoder("utf-8")}(),this.Ma().then(r=>{r&&r.G_()?this.metadata.resolve(r.W_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.W_)}`))},r=>this.metadata.reject(r))}close(){return this.Ca.cancel()}async getMetadata(){return this.metadata.promise}async Sa(){return await this.getMetadata(),this.Ma()}async Ma(){const e=await this.xa();if(e===null)return null;const n=this.Fa.decode(e),r=Number(n);isNaN(r)&&this.Oa(`length string (${n}) is not valid number`);const s=await this.Na(r);return new OS(JSON.parse(s),e.length+r)}Ba(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async xa(){for(;this.Ba()<0&&!await this.La(););if(this.buffer.length===0)return null;const e=this.Ba();e<0&&this.Oa("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Na(e){for(;this.buffer.length<e;)await this.La()&&this.Oa("Reached the end of bundle when more is expected.");const n=this.Fa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Oa(e){throw this.Ca.cancel(),new Error(`Invalid bundle format: ${e}`)}async La(){const e=await this.Ca.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new b(v.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(s,i){const o=F(s),a=no(o.serializer)+"/documents",c={documents:i.map(d=>to(o.serializer,d))},u=await o.po("BatchGetDocuments",a,c,i.length),l=new Map;u.forEach(d=>{const f=RP(o.serializer,d);l.set(f.key.toString(),f)});const h=[];return i.forEach(d=>{const f=l.get(d.toString());W(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=k.fromPath(r);this.mutations.push(new Vh(s,this.precondition(s)))}),await async function(r,s){const i=F(r),o=no(i.serializer)+"/documents",a={writes:s.map(c=>ro(i.serializer,c))};await i.Ro("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw $();n=G.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new b(v.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(G.min())?De.exists(!1):De.updateTime(n):De.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(G.min()))throw new b(v.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return De.updateTime(n)}return De.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.ka=r.maxAttempts,this.Qo=new zh(this.asyncQueue,"transaction_retry")}run(){this.ka-=1,this.qa()}qa(){this.Qo.Mo(async()=>{const e=new oC(this.datastore),n=this.Qa(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Ka(s)}))}).catch(r=>{this.Ka(r)})})}Qa(e){try{const n=this.updateFunction(e);return!Eo(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ka(e){this.ka>0&&this.$a(e)?(this.ka-=1,this.asyncQueue.enqueueAndForget(()=>(this.qa(),Promise.resolve()))):this.deferred.reject(e)}$a(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Fy(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ye.UNAUTHENTICATED,this.clientId=J_.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{P("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(P("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qs(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ca(t,e){t.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await dE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pl(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ad(t);P("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Gm(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Gm(e.remoteStore,i)),t._onlineComponents=e}function kE(t){return t.name==="FirebaseError"?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function ad(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{await ca(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!kE(n))throw n;Ht("Error using user provided cache. Falling back to memory cache: "+n),await ca(t,new ml)}}else P("FirestoreClient","Using default OfflineComponentProvider"),await ca(t,new ml);return t._offlineComponents}async function Sc(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),await pl(t,t._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),await pl(t,new od))),t._onlineComponents}function OE(t){return ad(t).then(e=>e.persistence)}function cd(t){return ad(t).then(e=>e.localStore)}function ME(t){return Sc(t).then(e=>e.remoteStore)}function ud(t){return Sc(t).then(e=>e.syncEngine)}function uC(t){return Sc(t).then(e=>e.datastore)}async function Os(t){const e=await Sc(t),n=e.eventManager;return n.onListen=US.bind(null,e.syncEngine),n.onUnlisten=$S.bind(null,e.syncEngine),n}function lC(t){return t.asyncQueue.enqueue(async()=>{const e=await OE(t),n=await ME(t);return e.setNetworkEnabled(!0),function(s){const i=F(s);return i.p_.delete(0),Po(i)}(n)})}function hC(t){return t.asyncQueue.enqueue(async()=>{const e=await OE(t),n=await ME(t);return e.setNetworkEnabled(!1),async function(s){const i=F(s);i.p_.add(0),await Gs(i),i.S_.set("Offline")}(n)})}function dC(t,e){const n=new Je;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(u,l){const h=F(u);return h.persistence.runTransaction("read document","readonly",d=>h.localDocuments.getDocument(d,l))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new b(v.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=Qs(a,`Failed to get document '${i} from cache`);o.reject(c)}}(await cd(t),e,n)),n.promise}function FE(t,e,n={}){const r=new Je;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const l=new Pc({next:d=>{o.enqueueAndForget(()=>Xh(i,h));const f=d.docs.has(a);!f&&d.fromCache?u.reject(new b(v.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&c&&c.source==="server"?u.reject(new b(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new Zh(js(a.path),l,{includeMetadataChanges:!0,U_:!0});return Yh(i,h)}(await Os(t),t.asyncQueue,e,n,r)),r.promise}function fC(t,e){const n=new Je;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Na(s,i,!0),c=new CE(i,a.ss),u=c.ia(a.documents),l=c.applyChanges(u,!1);o.resolve(l.snapshot)}catch(a){const c=Qs(a,`Failed to execute query '${i} against cache`);o.reject(c)}}(await cd(t),e,n)),n.promise}function LE(t,e,n={}){const r=new Je;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const l=new Pc({next:d=>{o.enqueueAndForget(()=>Xh(i,h)),d.fromCache&&c.source==="server"?u.reject(new b(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new Zh(a,l,{includeMetadataChanges:!0,U_:!0});return Yh(i,h)}(await Os(t),t.asyncQueue,e,n,r)),r.promise}function mC(t,e){const n=new Pc(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){F(s).x_.add(i),i.next()}(await Os(t),n)),()=>{n.va(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){F(s).x_.delete(i)}(await Os(t),n))}}function pC(t,e,n,r){const s=function(o,a){let c;return c=typeof o=="string"?By().encode(o):o,function(l,h){return new iC(l,h)}(function(l,h){if(l instanceof Uint8Array)return Xm(l,h);if(l instanceof ArrayBuffer)return Xm(new Uint8Array(l),h);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Ro(e));t.asyncQueue.enqueueAndForget(async()=>{rC(await ud(t),s,r)})}function gC(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=F(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Qr.getNamedQuery(o,s))}(await cd(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t,e,n){if(!n)throw new b(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UE(t,e,n,r){if(e===!0&&r===!0)throw new b(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zm(t){if(!k.isDocumentKey(t))throw new b(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ep(t){if(k.isDocumentKey(t))throw new b(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$()}function me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cc(t);throw new b(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $E(t,e){if(e<=0)throw new b(v.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new b(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new b(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new b(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new b(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new b(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class So{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new b(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gR;switch(r.type){case"firstParty":return new vR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new b(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jm.get(n);r&&(P("ComponentProvider","Removing Datastore"),Jm.delete(n),r.terminate())}(this),Promise.resolve()}}function _C(t,e,n,r={}){var s;const i=(t=me(t,So))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ht("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ye.MOCK_USER;else{a=xA(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new b(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ye(u)}t._authCredentials=new _R(new X_(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vt=class qE{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qE(this.firestore,e,this._query)}},ke=class jE{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jE(this.firestore,e,this._key)}},zn=class KE extends vt{constructor(e,n,r){super(e,n,js(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ke(this.firestore,null,new k(e))}withConverter(e){return new KE(this.firestore,e,this._path)}};function zE(t,e,...n){if(t=Ge(t),ld("collection","path",e),t instanceof So){const r=de.fromString(e,...n);return ep(r),new zn(t,null,r)}{if(!(t instanceof ke||t instanceof zn))throw new b(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return ep(r),new zn(t.firestore,null,r)}}function yC(t,e){if(t=me(t,So),ld("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new b(v.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vt(t,null,function(r){return new wn(de.emptyPath(),r)}(e))}function Fa(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=J_.V()),ld("doc","path",e),t instanceof So){const r=de.fromString(e,...n);return Zm(r),new ke(t,null,new k(r))}{if(!(t instanceof ke||t instanceof zn))throw new b(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return Zm(r),new ke(t.firestore,t instanceof zn?t.converter:null,new k(r))}}function GE(t,e){return t=Ge(t),e=Ge(e),(t instanceof ke||t instanceof zn)&&(e instanceof ke||e instanceof zn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function WE(t,e){return t=Ge(t),e=Ge(e),t instanceof vt&&e instanceof vt&&t.firestore===e.firestore&&Io(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new zh(this,"async_queue_retry"),this.Za=()=>{const n=aa();n&&P("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Qo.Oo()};const e=aa();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Za)}get isShuttingDown(){return this.Ga}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xa(),this.eu(e)}enterRestrictedMode(e){if(!this.Ga){this.Ga=!0,this.Ja=e||!1;const n=aa();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Za)}}enqueue(e){if(this.Xa(),this.Ga)return new Promise(()=>{});const n=new Je;return this.eu(()=>this.Ga&&this.Ja?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Wa.push(e),this.tu()))}async tu(){if(this.Wa.length!==0){try{await this.Wa[0](),this.Wa.shift(),this.Qo.reset()}catch(e){if(!cr(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.Wa.length>0&&this.Qo.Mo(()=>this.tu())}}eu(e){const n=this.Ua.then(()=>(this.Ha=!0,e().catch(r=>{this.ja=r,this.Ha=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Le("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ha=!1,r))));return this.Ua=n,n}enqueueAfterDelay(e,n,r){this.Xa(),this.Ya.indexOf(e)>-1&&(n=0);const s=Qh.createAndSchedule(this,e,n,r,i=>this.nu(i));return this.za.push(s),s}Xa(){this.ja&&$()}verifyOperationInProgress(){}async ru(){let e;do e=this.Ua,await e;while(e!==this.Ua)}iu(e){for(const n of this.za)if(n.timerId===e)return!0;return!1}su(e){return this.ru().then(()=>{this.za.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.za)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ru()})}ou(e){this.Ya.push(e)}nu(e){const n=this.za.indexOf(e);this.za.splice(n,1)}}function gl(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class vC{constructor(){this._progressObserver={},this._taskCompletionResolver=new Je,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=-1;let Fe=class extends So{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new EC}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||HE(this),this._firestoreClient.terminate()}};function nt(t){return t._firestoreClient||HE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function HE(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,l){return new YR(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,BE(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new cC(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function wC(t,e){YE(t=me(t,Fe));const n=nt(t);if(n._uninitializedComponentsProvider)throw new b(v.FAILED_PRECONDITION,"SDK cache is already specified.");Ht("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),s=new od;return QE(n,s,new NE(s,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function TC(t){YE(t=me(t,Fe));const e=nt(t);if(e._uninitializedComponentsProvider)throw new b(v.FAILED_PRECONDITION,"SDK cache is already specified.");Ht("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new od;return QE(e,r,new sC(r,n.cacheSizeBytes))}function QE(t,e,n){const r=new Je;return t.asyncQueue.enqueue(async()=>{try{await ca(t,n),await pl(t,e),r.resolve()}catch(s){const i=s;if(!kE(i))throw i;Ht("Error enabling indexeddb cache. Falling back to memory cache: "+i),r.reject(i)}}).then(()=>r.promise)}function AC(t){if(t._initialized&&!t._terminated)throw new b(v.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Je;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Kt.v())return Promise.resolve();const s=r+"main";await Kt.delete(s)}(qh(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function bC(t){return function(n){const r=new Je;return n.asyncQueue.enqueueAndForget(async()=>GS(await ud(n),r)),r.promise}(nt(t=me(t,Fe)))}function RC(t){return lC(nt(t=me(t,Fe)))}function PC(t){return hC(nt(t=me(t,Fe)))}function SC(t,e){const n=nt(t=me(t,Fe)),r=new vC;return pC(n,t._databaseId,e,r),r}function CC(t,e){return gC(nt(t=me(t,Fe)),e).then(n=>n?new vt(t,null,n.query):null)}function YE(t){if(t._initialized||t._terminated)throw new b(v.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new un(He.fromBase64String(e))}catch(n){throw new b(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new un(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new b(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hr=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=/^__.*__$/;class xC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ks(e,this.data,n,this.fieldTransforms)}}class XE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function JE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}class xc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._u(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get au(){return this.settings.au}uu(e){return new xc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.uu({path:r,lu:!1});return s.hu(e),s}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.uu({path:r,lu:!1});return s._u(),s}Iu(e){return this.uu({path:void 0,lu:!0})}Tu(e){return La(e,this.settings.methodName,this.settings.Eu||!1,this.path,this.settings.du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_u(){if(this.path)for(let e=0;e<this.path.length;e++)this.hu(this.path.get(e))}hu(e){if(e.length===0)throw this.Tu("Document fields must not be empty");if(JE(this.au)&&VC.test(e))throw this.Tu('Document fields cannot begin and end with "__"')}}class DC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ro(e)}Au(e,n,r,s=!1){return new xc({au:e,methodName:n,du:r,path:Be.emptyPath(),lu:!1,Eu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qr(t){const e=t._freezeSettings(),n=Ro(t._databaseId);return new DC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dc(t,e,n,r,s,i={}){const o=t.Au(i.merge||i.mergeFields?2:0,e,n,s);md("Data must be an object, but it was:",o,r);const a=tv(r,o);let c,u;if(i.merge)c=new bt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const l=[];for(const h of i.mergeFields){const d=_l(e,h,n);if(!o.contains(d))throw new b(v.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);rv(l,d)||l.push(d)}c=new bt(l),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new xC(new ot(a),c,u)}class Co extends Hr{_toFieldTransform(e){if(e.au!==2)throw e.au===1?e.Tu(`${this._methodName}() can only appear at the top level of your update data`):e.Tu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Co}}function ZE(t,e,n){return new xc({au:3,du:e.settings.du,methodName:t._methodName,lu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hd extends Hr{_toFieldTransform(e){return new To(e.path,new Ss)}isEqual(e){return e instanceof hd}}class NC extends Hr{constructor(e,n){super(e),this.Ru=n}_toFieldTransform(e){const n=ZE(this,e,!0),r=this.Ru.map(i=>Yr(i,n)),s=new Br(r);return new To(e.path,s)}isEqual(e){return this===e}}class kC extends Hr{constructor(e,n){super(e),this.Ru=n}_toFieldTransform(e){const n=ZE(this,e,!0),r=this.Ru.map(i=>Yr(i,n)),s=new Ur(r);return new To(e.path,s)}isEqual(e){return this===e}}class OC extends Hr{constructor(e,n){super(e),this.Vu=n}_toFieldTransform(e){const n=new Cs(e.serializer,Vy(e.serializer,this.Vu));return new To(e.path,n)}isEqual(e){return this===e}}function dd(t,e,n,r){const s=t.Au(1,e,n);md("Data must be an object, but it was:",s,r);const i=[],o=ot.empty();Wr(r,(c,u)=>{const l=pd(e,c,n);u=Ge(u);const h=s.Pu(l);if(u instanceof Co)i.push(l);else{const d=Yr(u,h);d!=null&&(i.push(l),o.set(l,d))}});const a=new bt(i);return new XE(o,a,s.fieldTransforms)}function fd(t,e,n,r,s,i){const o=t.Au(1,e,n),a=[_l(e,r,n)],c=[s];if(i.length%2!=0)throw new b(v.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(_l(e,i[d])),c.push(i[d+1]);const u=[],l=ot.empty();for(let d=a.length-1;d>=0;--d)if(!rv(u,a[d])){const f=a[d];let _=c[d];_=Ge(_);const y=o.Pu(f);if(_ instanceof Co)u.push(f);else{const I=Yr(_,y);I!=null&&(u.push(f),l.set(f,I))}}const h=new bt(u);return new XE(l,h,o.fieldTransforms)}function ev(t,e,n,r=!1){return Yr(n,t.Au(r?4:3,e))}function Yr(t,e){if(nv(t=Ge(t)))return md("Unsupported field value:",e,t),tv(t,e);if(t instanceof Hr)return function(r,s){if(!JE(s.au))throw s.Tu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.lu&&e.au!==4)throw e.Tu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Yr(a,s.Iu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vy(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ne.fromDate(r);return{timestampValue:Vs(s.serializer,i)}}if(r instanceof Ne){const i=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vs(s.serializer,i)}}if(r instanceof Vc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof un)return{bytesValue:qy(s.serializer,r._byteString)};if(r instanceof ke){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Tu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mh(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Tu(`Unsupported field value: ${Cc(r)}`)}(t,e)}function tv(t,e){const n={};return ly(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(r,s)=>{const i=Yr(s,e.cu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function nv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof Vc||t instanceof un||t instanceof ke||t instanceof Hr)}function md(t,e,n){if(!nv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Cc(n);throw r==="an object"?e.Tu(t+" a custom object"):e.Tu(t+" "+r)}}function _l(t,e,n){if((e=Ge(e))instanceof rr)return e._internalPath;if(typeof e=="string")return pd(t,e);throw La("Field path arguments must be of type string or ",t,!1,void 0,n)}const MC=new RegExp("[~\\*/\\[\\]]");function pd(t,e,n){if(e.search(MC)>=0)throw La(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rr(...e.split("."))._internalPath}catch{throw La(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function La(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new b(v.INVALID_ARGUMENT,a+t+c)}function rv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FC extends io{data(){return super.data()}}function Nc(t,e){return typeof e=="string"?pd(t,e):e instanceof rr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new b(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gd{}class Vo extends gd{}function xn(t,e,...n){let r=[];e instanceof gd&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof _d).length,a=i.filter(c=>c instanceof kc).length;if(o>1||o>0&&a>0)throw new b(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class kc extends Vo{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kc(e,n,r)}_apply(e){const n=this._parse(e);return ov(e._query,n),new vt(e.firestore,e.converter,rl(e._query,n))}_parse(e){const n=Qr(e.firestore);return function(i,o,a,c,u,l,h){let d;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new b(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){rp(h,l);const f=[];for(const _ of h)f.push(np(c,i,_));d={arrayValue:{values:f}}}else d=np(c,i,h)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||rp(h,l),d=ev(a,o,h,l==="in"||l==="not-in");return ce.create(u,l,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function LC(t,e,n){const r=e,s=Nc("where",t);return kc._create(s,r,n)}class _d extends gd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _d(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ve.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)ov(o,c),o=rl(o,c)}(e._query,n),new vt(e.firestore,e.converter,rl(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yd extends Vo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yd(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new b(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new b(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new _s(i,o);return function(u,l){if(Ph(u)===null){const h=vc(u);h!==null&&av(u,h,l.field)}}(s,a),a}(e._query,this._field,this._direction);return new vt(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new wn(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function BC(t,e="asc"){const n=e,r=Nc("orderBy",t);return yd._create(r,n)}class Oc extends Vo{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Oc(e,n,r)}_apply(e){return new vt(e.firestore,e.converter,Ca(e._query,this._limit,this._limitType))}}function UC(t){return $E("limit",t),Oc._create("limit",t,"F")}function $C(t){return $E("limitToLast",t),Oc._create("limitToLast",t,"L")}class Mc extends Vo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Mc(e,n,r)}_apply(e){const n=iv(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(s,i){return new wn(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function qC(...t){return Mc._create("startAt",t,!0)}function jC(...t){return Mc._create("startAfter",t,!1)}class Fc extends Vo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fc(e,n,r)}_apply(e){const n=iv(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(s,i){return new wn(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function KC(...t){return Fc._create("endBefore",t,!1)}function zC(...t){return Fc._create("endAt",t,!0)}function iv(t,e,n,r){if(n[0]=Ge(n[0]),n[0]instanceof io)return function(i,o,a,c,u){if(!c)throw new b(v.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const l=[];for(const h of Nr(i))if(h.field.isKeyField())l.push(Fr(o,c.key));else{const d=c.data.field(h.field);if(Ec(d))throw new b(v.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const f=h.field.canonicalString();throw new b(v.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(d)}return new tr(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Qr(t.firestore);return function(o,a,c,u,l,h){const d=o.explicitOrderBy;if(l.length>d.length)throw new b(v.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let _=0;_<l.length;_++){const y=l[_];if(d[_].field.isKeyField()){if(typeof y!="string")throw new b(v.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!Sh(o)&&y.indexOf("/")!==-1)throw new b(v.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);const I=o.path.child(de.fromString(y));if(!k.isDocumentKey(I))throw new b(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const R=new k(I);f.push(Fr(a,R))}else{const I=ev(c,u,y);f.push(I)}}return new tr(f,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function np(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new b(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sh(e)&&n.indexOf("/")!==-1)throw new b(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(de.fromString(n));if(!k.isDocumentKey(r))throw new b(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fr(t,new k(r))}if(n instanceof ke)return Fr(t,n._key);throw new b(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cc(n)}.`)}function rp(t,e){if(!Array.isArray(t)||t.length===0)throw new b(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ov(t,e){if(e.isInequality()){const r=vc(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new b(v.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=Ph(t);i!==null&&av(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new b(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new b(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function av(t,e,n){if(!n.isEqual(e))throw new b(v.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Ed{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw $()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Vc(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ji(e));default:return null}}convertTimestamp(e){const n=Xn(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);W(Jy(r));const s=new Zn(r.get(1),r.get(3)),i=new k(r.popFirst(5));return s.isEqual(n)||Le(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class GC extends Ed{constructor(e){super(),this.firestore=e}convertBytes(e){return new un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ke(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let vn=class extends io{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Si(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Si=class extends vn{data(e={}){return super.data(e)}},sr=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Sr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Si(this._firestore,this._userDataWriter,r.key,r,new Sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Si(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Sr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Si(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Sr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:WC(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function WC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}function cv(t,e){return t instanceof vn&&e instanceof vn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof sr&&e instanceof sr&&t._firestore===e._firestore&&WE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){t=me(t,ke);const e=me(t.firestore,Fe);return FE(nt(e),t._key).then(n=>vd(e,t,n))}class Xr extends Ed{constructor(e){super(),this.firestore=e}convertBytes(e){return new un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ke(this.firestore,null,n)}}function QC(t){t=me(t,ke);const e=me(t.firestore,Fe),n=nt(e),r=new Xr(e);return dC(n,t._key).then(s=>new vn(e,r,t._key,s,new Sr(s!==null&&s.hasLocalMutations,!0),t.converter))}function YC(t){t=me(t,ke);const e=me(t.firestore,Fe);return FE(nt(e),t._key,{source:"server"}).then(n=>vd(e,t,n))}function XC(t){t=me(t,vt);const e=me(t.firestore,Fe),n=nt(e),r=new Xr(e);return sv(t._query),LE(n,t._query).then(s=>new sr(e,r,t,s))}function JC(t){t=me(t,vt);const e=me(t.firestore,Fe),n=nt(e),r=new Xr(e);return fC(n,t._query).then(s=>new sr(e,r,t,s))}function ZC(t){t=me(t,vt);const e=me(t.firestore,Fe),n=nt(e),r=new Xr(e);return LE(n,t._query,{source:"server"}).then(s=>new sr(e,r,t,s))}function sp(t,e,n){t=me(t,ke);const r=me(t.firestore,Fe),s=Lc(t.converter,e,n);return xo(r,[Dc(Qr(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,De.none())])}function ip(t,e,n,...r){t=me(t,ke);const s=me(t.firestore,Fe),i=Qr(s);let o;return o=typeof(e=Ge(e))=="string"||e instanceof rr?fd(i,"updateDoc",t._key,e,n,r):dd(i,"updateDoc",t._key,e),xo(s,[o.toMutation(t._key,De.exists(!0))])}function eV(t){return xo(me(t.firestore,Fe),[new zs(t._key,De.none())])}function tV(t,e){const n=me(t.firestore,Fe),r=Fa(t),s=Lc(t.converter,e);return xo(n,[Dc(Qr(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,De.exists(!1))]).then(()=>r)}function uv(t,...e){var n,r,s;t=Ge(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||gl(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(gl(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let c,u,l;if(t instanceof ke)u=me(t.firestore,Fe),l=js(t._key.path),c={next:h=>{e[o]&&e[o](vd(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=me(t,vt);u=me(h.firestore,Fe),l=h._query;const d=new Xr(u);c={next:f=>{e[o]&&e[o](new sr(u,d,h,f))},error:e[o+1],complete:e[o+2]},sv(t._query)}return function(d,f,_,y){const I=new Pc(y),R=new Zh(f,I,_);return d.asyncQueue.enqueueAndForget(async()=>Yh(await Os(d),R)),()=>{I.va(),d.asyncQueue.enqueueAndForget(async()=>Xh(await Os(d),R))}}(nt(u),l,a,c)}function nV(t,e){return mC(nt(t=me(t,Fe)),gl(e)?e:{next:e})}function xo(t,e){return function(r,s){const i=new Je;return r.asyncQueue.enqueueAndForget(async()=>qS(await ud(r),s,i)),i.promise}(nt(t),e)}function vd(t,e,n){const r=n.docs.get(e._key),s=new Xr(t);return new vn(t,s,e._key,r,new Sr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sV=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qr(e)}set(e,n,r){this._verifyNotCommitted();const s=Fn(e,this._firestore),i=Lc(s.converter,n,r),o=Dc(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,De.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Fn(e,this._firestore);let o;return o=typeof(n=Ge(n))=="string"||n instanceof rr?fd(this._dataReader,"WriteBatch.update",i._key,n,r,s):dd(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,De.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fn(e,this._firestore);return this._mutations=this._mutations.concat(new zs(n._key,De.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new b(v.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Fn(t,e){if((t=Ge(t)).firestore!==e)throw new b(v.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iV=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Qr(n)}get(n){const r=Fn(n,this._firestore),s=new GC(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return $();const o=i[0];if(o.isFoundDocument())return new io(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new io(this._firestore,s,r._key,null,r.converter);throw $()})}set(n,r,s){const i=Fn(n,this._firestore),o=Lc(i.converter,r,s),a=Dc(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=Fn(n,this._firestore);let a;return a=typeof(r=Ge(r))=="string"||r instanceof rr?fd(this._dataReader,"Transaction.update",o._key,r,s,i):dd(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Fn(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Fn(e,this._firestore),r=new Xr(this._firestore);return super.get(e).then(s=>new vn(this._firestore,r,n._key,s._document,new Sr(!1,!1),n.converter))}};function oV(t,e,n){t=me(t,Fe);const r=Object.assign(Object.assign({},rV),n);return function(i){if(i.maxAttempts<1)throw new b(v.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const c=new Je;return i.asyncQueue.enqueueAndForget(async()=>{const u=await uC(i);new aC(i.asyncQueue,u,a,o,c).run()}),c.promise}(nt(t),s=>e(new iV(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){return new Co("deleteField")}function cV(){return new hd("serverTimestamp")}function uV(...t){return new NC("arrayUnion",t)}function lV(...t){return new kC("arrayRemove",t)}function hV(t){return new OC("increment",t)}(function(e,n=!0){(function(s){qs=s})(Xl),Ts(new kr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Fe(new yR(r.getProvider("auth-internal")),new wR(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new b(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zn(u.options.projectId,l)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Kn(em,"4.0.0",e),Kn(em,"4.0.0","esm2017")})();const dV="@firebase/firestore-compat",fV="0.3.13";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new b("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(){if(typeof Uint8Array>"u")throw new b("unimplemented","Uint8Arrays are not available in this environment.")}function ap(){if(!HR())throw new b("unimplemented","Blobs are unavailable in Firestore in this environment.")}let lv=class yl{constructor(e){this._delegate=e}static fromBase64String(e){return ap(),new yl(un.fromBase64String(e))}static fromUint8Array(e){return op(),new yl(un.fromUint8Array(e))}toBase64(){return ap(),this._delegate.toBase64()}toUint8Array(){return op(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){return mV(t,["next","error","complete"])}function mV(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{enableIndexedDbPersistence(e,n){return wC(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return TC(e._delegate)}clearIndexedDbPersistence(e){return AC(e._delegate)}}class hv{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zn||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ht("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){_C(this._delegate,e,n,r)}enableNetwork(){return RC(this._delegate)}disableNetwork(){return PC(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,UE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return bC(this._delegate)}onSnapshotsInSync(e){return nV(this._delegate,e)}get app(){if(!this._appCompat)throw new b("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ms(this,zE(this._delegate,e))}catch(n){throw _t(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ft(this,Fa(this._delegate,e))}catch(n){throw _t(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gt(this,yC(this._delegate,e))}catch(n){throw _t(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return oV(this._delegate,n=>e(new dv(this,n)))}batch(){return nt(this._delegate),new fv(new sV(this._delegate,e=>xo(this._delegate,e)))}loadBundle(e){return SC(this._delegate,e)}namedQuery(e){return CC(this._delegate,e).then(n=>n?new gt(this,n):null)}}class Bc extends Ed{constructor(e){super(),this.firestore=e}convertBytes(e){return new lv(new un(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ft.forKey(n,this.firestore,null)}}function gV(t){mR(t)}class dv{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Bc(e)}get(e){const n=Cr(e);return this._delegate.get(n).then(r=>new oo(this._firestore,new vn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Cr(e);return r?(Id("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Cr(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Cr(e);return this._delegate.delete(n),this}}class fv{constructor(e){this._delegate=e}set(e,n,r){const s=Cr(e);return r?(Id("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Cr(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Cr(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Kr{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Si(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ao(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Kr.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Kr(e,new Bc(e),n),s.set(n,i)),i}}Kr.INSTANCES=new WeakMap;class Ft{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new b("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ft(n,new ke(n._delegate,r,new k(e)))}static forKey(e,n,r){return new Ft(n,new ke(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ms(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ms(this.firestore,zE(this._delegate,e))}catch(n){throw _t(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ge(e),e instanceof ke?GE(this._delegate,e):!1}set(e,n){n=Id("DocumentReference.set",n);try{return n?sp(this._delegate,e,n):sp(this._delegate,e)}catch(r){throw _t(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?ip(this._delegate,e):ip(this._delegate,e,n,...r)}catch(s){throw _t(s,"updateDoc()","DocumentReference.update()")}}delete(){return eV(this._delegate)}onSnapshot(...e){const n=mv(e),r=pv(e,s=>new oo(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return uv(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=QC(this._delegate):(e==null?void 0:e.source)==="server"?n=YC(this._delegate):n=HC(this._delegate),n.then(r=>new oo(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ft(this.firestore,e?this._delegate.withConverter(Kr.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _t(t,e,n){return t.message=t.message.replace(e,n),t}function mv(t){for(const e of t)if(typeof e=="object"&&!El(e))return e;return{}}function pv(t,e){var n,r;let s;return El(t[0])?s=t[0]:El(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class oo{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ft(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return cv(this._delegate,e._delegate)}}class ao extends oo{data(e){const n=this._delegate.data(e);return pR(n!==void 0),n}}class gt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bc(e)}where(e,n,r){try{return new gt(this.firestore,xn(this._delegate,LC(e,n,r)))}catch(s){throw _t(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new gt(this.firestore,xn(this._delegate,BC(e,n)))}catch(r){throw _t(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gt(this.firestore,xn(this._delegate,UC(e)))}catch(n){throw _t(n,"limit()","Query.limit()")}}limitToLast(e){try{return new gt(this.firestore,xn(this._delegate,$C(e)))}catch(n){throw _t(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gt(this.firestore,xn(this._delegate,qC(...e)))}catch(n){throw _t(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gt(this.firestore,xn(this._delegate,jC(...e)))}catch(n){throw _t(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gt(this.firestore,xn(this._delegate,KC(...e)))}catch(n){throw _t(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gt(this.firestore,xn(this._delegate,zC(...e)))}catch(n){throw _t(n,"endAt()","Query.endAt()")}}isEqual(e){return WE(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=JC(this._delegate):(e==null?void 0:e.source)==="server"?n=ZC(this._delegate):n=XC(this._delegate),n.then(r=>new vl(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=mv(e),r=pv(e,s=>new vl(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return uv(this._delegate,n,r)}withConverter(e){return new gt(this.firestore,e?this._delegate.withConverter(Kr.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class _V{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ao(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vl{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new gt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ao(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new _V(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ao(this._firestore,r))})}isEqual(e){return cv(this._delegate,e._delegate)}}class Ms extends gt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ft(this.firestore,e):null}doc(e){try{return e===void 0?new Ft(this.firestore,Fa(this._delegate)):new Ft(this.firestore,Fa(this._delegate,e))}catch(n){throw _t(n,"doc()","CollectionReference.doc()")}}add(e){return tV(this._delegate,e).then(n=>new Ft(this.firestore,n))}isEqual(e){return GE(this._delegate,e._delegate)}withConverter(e){return new Ms(this.firestore,e?this._delegate.withConverter(Kr.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Cr(t){return me(t,ke)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(...e){this._delegate=new rr(...e)}static documentId(){return new wd(Be.keyField().canonicalString())}isEqual(e){return e=Ge(e),e instanceof rr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._delegate=e}static serverTimestamp(){const e=cV();return e._methodName="FieldValue.serverTimestamp",new Ar(e)}static delete(){const e=aV();return e._methodName="FieldValue.delete",new Ar(e)}static arrayUnion(...e){const n=uV(...e);return n._methodName="FieldValue.arrayUnion",new Ar(n)}static arrayRemove(...e){const n=lV(...e);return n._methodName="FieldValue.arrayRemove",new Ar(n)}static increment(e){const n=hV(e);return n._methodName="FieldValue.increment",new Ar(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={Firestore:hv,GeoPoint:Vc,Timestamp:Ne,Blob:lv,Transaction:dv,WriteBatch:fv,DocumentReference:Ft,DocumentSnapshot:oo,Query:gt,QueryDocumentSnapshot:ao,QuerySnapshot:vl,CollectionReference:Ms,FieldPath:wd,FieldValue:Ar,setLogLevel:gV,CACHE_SIZE_UNLIMITED:IC};function EV(t,e){t.INTERNAL.registerComponent(new kr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},yV)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){EV(t,(e,n)=>new hv(e,n,new pV)),t.registerVersion(dV,fV)}vV(Zl);const IV=eT(),wV={apiKey:"AIzaSyD4sXePUbSsXLByKw0FGv8Jvcm_zyOjVao",authDomain:"jandm-workpermit.firebaseapp.com",projectId:"jandm-workpermit",storageBucket:"jandm-workpermit.appspot.com",messagingSenderId:"346506180953",appId:"1:346506180953:web:289ca7d3eb63f0e9bbf448",measurementId:"G-4SL9MQKPQ4"};Zl.initializeApp(wV);Xw(_A).use(vA).use(IV).mount("#app");export{bV as A,DV as B,PV as C,Bt as D,CV as E,xt as F,xV as G,Kp as H,Cp as I,uw as J,VV as K,zl as L,Bo as M,Wn as N,hg as T,pA as _,Ot as a,Gp as b,ql as c,uA as d,iw as e,ht as f,SV as g,mn as h,Ue as i,FI as j,RV as k,cw as l,Zl as m,Vi as n,Ya as o,NV as p,kV as q,kl as r,co as s,TV as t,$n as u,Ml as v,yI as w,pi as x,AV as y,ea as z};
